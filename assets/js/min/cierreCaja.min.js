function isCurrentPage(t){return getCurrentPage()==t}function getCurrentPage(){var t=$("title").text().split(" ");return t=t[4].toLowerCase().trim()}function cierreCajaFunctions(){function t(t){for(var a=0,o=0;o<t.length;o++)a+=parseFloat(t[o]);return a}function a(){return moment().format("YYYY-MM-DD")}var o={total1:0,total5:0,total10:0,total20:0,total25:0,total50:0,total100:0,total200:0,total500:0,total1000:0,total2000:0},e={fecha:"",descripcion:"",monto:""},s=[{fecha:a(),descripcion:"hola",monto:2e3,id_gasto:1}],r=$("#autor-cierre").text().trim(),n=new Vue({el:"#app-cierre",data:{fecha:a(),data_cierre:{autor:r,pagos_facturas:0,pagos_extras:0,pagos_efectivo:0,pagos_banco:0,total_ingresos:0,efectivo_caja:0,total_descuadre:0,total_gastos:0,banco:0},conteo:o,suma:0,gasto:e,gastos:s},mounted:function(){this.getGastos(),this.setIngresos()},created:function(){$(".will-load").css({visibility:"visible"})},filters:{currencyFormat:function(t){return CurrencyFormat(t)}},methods:{changeTotal:function(t){var a=t.srcElement.attributes["data-unit"].value,e=t.srcElement.value;o["total"+a]=e*a*1},addGasto:function(t){var o=this.gasto;o.fecha=a(),form="data="+JSON.stringify(o);var e=axios.post(BASE_URL+"caja/add_gasto",form);e.then(function(t){var a=t.data;displayMessage(a.mensaje),n.fillGastos(a.gastos,"normal"),n.setGastoTotal(a.total_gastos)}),e.catch(function(){console.log(error)})},fillGastos:function(t,a){"group"==a?null!=t||t.length>0?(console.log([t]),n.gastos=t):n.gastos=[]:n.gastos.push(JSON.parse(t)[0])},setGastoTotal:function(t){this.data_cierre.total_gastos=t},getGasto:function(t){var a=this.gasto;form="data="+JSON.stringify(a),connectAndSend("caja/get_gasto",!1,null,n.fillGastos,form,null,null)},deleteGasto:function(t){console.log(t);var o=t.target;"i"==o.localname&&(o=o.parentElement);var e=o.attributes["data-id"].value;swal({title:"Está Seguro?",text:"Seguro de que quiere eliminar este gasto?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",cancelButtonText:"Cancelar"}).then(function(){form="data="+JSON.stringify({id:e,fecha:a()});var t=axios.post(BASE_URL+"caja/delete_gasto",form);t.then(function(t){var a=t.data;displayMessage(a.mensaje),n.fillGastos(a.gastos,"group"),n.setGastoTotal(a.total_gastos)}),t.catch(function(t){})})},getGastos:function(){var t={fecha:a()};form="data="+JSON.stringify(t);var o=axios.post(BASE_URL+"caja/get_gastos",form);o.then(function(t){var a=t.data;displayMessage(a.mensaje),n.fillGastos(a.gastos,"group"),n.setGastoTotal(a.total_gastos)}),o.catch(function(){console.log(error)})},setIngresos:function(){var t="data="+JSON.stringify({fecha:a()}),o=this.data_cierre,e=axios.post(BASE_URL+"caja/get_ingresos",t);e.then(function(t){var a=t.data;o.pagos_facturas=a.pagos_facturas,o.pagos_extras=a.pagos_extras,o.pagos_efectivo=a.pagos_efectivo,o.pagos_banco=a.pagos_banco,o.total_ingresos=parseFloat(a.pagos_facturas)+parseFloat(o.pagos_extras),o.total_descuadre=-o.pagos_efectivo+o.efectivo_caja}),e.catch(function(){console.log(error)})},cerrarCaja:function(){var t=this,a=this.data_cierre;window.cierre=a,0!=a.total_descuadre?swal({title:"Está Seguro?",text:"Hay un descuadre en la caja, quiere hacer el cierre de todos modos?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(function(){t.cerrar(a)}):t.cerrar(a)},cerrar:function(t){t.fecha=a(),form="data="+JSON.stringify(t);var o=axios.post(BASE_URL+"caja/add_cierre",form);o.then(function(t){var a=t.data;displayMessage(a.mensaje)}),o.catch(function(){console.log(error)})}},computed:{getTotal:function(a){var e=o,s=this.data_cierre,r=t([e.total1,e.total5,e.total10,e.total20,e.total25,e.total50,e.total100,e.total200,e.total500,e.total1000,e.total2000]);return this.suma=r,s.efectivo_caja=r.toFixed(2),s.total_descuadre=parseFloat(-s.pagos_efectivo)+parseFloat(s.efectivo_caja),s.banco=parseFloat(s.pagos_banco)+parseFloat(s.pagos_efectivo)-parseFloat(s.total_gastos),this.suma},decimals:function(){["pagos_facturas","pagos_extra","pagos_efectivo","pagos_banco","total_ingresos","efectivo_caja","total_descuadre","total_gasto","banco"].forEach(function(t){this.data_cierre[t]=this.data_cierre[t].toFixed(2)},this)}}})}if((isCurrentPage("cierre")||isCurrentPage("cierre2"))&&cierreCajaFunctions(),isCurrentPage("reportes")){var script=document.createElement("script");script.src=BASE_URL+"assets/js/min/reportes.min.js",$("body").append(script)}