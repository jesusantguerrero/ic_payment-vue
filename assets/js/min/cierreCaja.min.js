function isCurrentPage(t){return getCurrentPage()==t}function getCurrentPage(){var t=$("title").text().split(" ");return t=t[4].toLowerCase().trim()}function cierreCajaFunctions(){function t(t){for(var a=0,e=0;e<t.length;e++)a+=parseFloat(t[e]);return a}function a(){return moment().format("YYYY-MM-DD")}var e={total1:0,total5:0,total10:0,total20:0,total25:0,total50:0,total100:0,total200:0,total500:0,total1000:0,total2000:0},o={fecha:"",descripcion:"",monto:""},s=[{fecha:a(),descripcion:"hola",monto:2e3,id_gasto:1}],r=$("#autor-cierre").text().trim(),i=new Vue({el:"#app-cierre",data:{isHide:!1,fecha:a(),data_cierre:{autor:r,pagos_facturas:0,pagos_extras:0,pagos_efectivo:0,pagos_banco:0,total_ingresos:0,efectivo_caja:0,total_descuadre:0,total_gastos:0,banco:0},conteo:e,suma:0,gasto:o,gastos:s},mounted:function(){this.getGastos(),this.setIngresos()},created:function(){$(".will-load").css({visibility:"visible"})},filters:{currencyFormat:function(t){return CurrencyFormat(t)}},methods:{changeTotal:function(t){var a=t.srcElement.attributes["data-unit"].value,o=t.srcElement.value;e["total"+a]=o*a*1},addGasto:function(t){var e=this.gasto;e.fecha=a(),form="data="+JSON.stringify(e);var o=axios.post(BASE_URL+"caja/add_gasto",form);o.then(function(t){var a=t.data;displayMessage(a.mensaje),i.fillGastos(a.gastos,"normal"),i.setGastoTotal(a.total_gastos)}),o.catch(function(){console.log(error)})},fillGastos:function(t,a){"group"==a?null!=t||t.length>0?i.gastos=t:i.gastos=[]:i.gastos.push(JSON.parse(t)[0])},setGastoTotal:function(t){this.data_cierre.total_gastos=t},getGasto:function(t){var a=this.gasto;form="data="+JSON.stringify(a),connectAndSend("caja/get_gasto",!1,null,i.fillGastos,form,null,null)},deleteGasto:function(t){console.log(t);var e=t.target;"i"==e.localname&&(e=e.parentElement);var o=e.attributes["data-id"].value;swal({title:"Está Seguro?",text:"Seguro de que quiere eliminar este gasto?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",cancelButtonText:"Cancelar"}).then(function(){form="data="+JSON.stringify({id:o,fecha:a()});var t=axios.post(BASE_URL+"caja/delete_gasto",form);t.then(function(t){var a=t.data;displayMessage(a.mensaje),i.fillGastos(a.gastos,"group"),i.setGastoTotal(a.total_gastos)}),t.catch(function(t){})})},getGastos:function(){var t={fecha:a()};form="data="+JSON.stringify(t);var e=axios.post(BASE_URL+"caja/get_gastos",form);e.then(function(t){var a=t.data;displayMessage(a.mensaje),i.fillGastos(a.gastos,"group"),i.setGastoTotal(a.total_gastos)}),e.catch(function(){console.log(error)})},setIngresos:function(){var t="data="+JSON.stringify({fecha:a()}),e=this.data_cierre,o=axios.post(BASE_URL+"caja/get_ingresos",t);o.then(function(t){var a=t.data;e.pagos_facturas=a.pagos_facturas,e.pagos_extras=a.pagos_extras,e.pagos_efectivo=a.pagos_efectivo,e.pagos_banco=a.pagos_banco,e.total_ingresos=parseFloat(a.pagos_facturas)+parseFloat(e.pagos_extras),e.total_descuadre=-e.pagos_efectivo+e.efectivo_caja}),o.catch(function(){console.log(error)})},cerrarCaja:function(){var t=this,a=this.data_cierre;window.cierre=a,0!=a.total_descuadre?swal({title:"Está Seguro?",text:"Hay un descuadre en la caja, quiere hacer el cierre de todos modos?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(function(){t.cerrar(a)}):t.cerrar(a)},cerrar:function(t){t.fecha=a(),form="data="+JSON.stringify(t);var e=axios.post(BASE_URL+"caja/add_cierre",form);e.then(function(a){var e=a.data;displayMessage(e.mensaje),self.isHide=!0,appSummaryView.isHide=!1,appSummaryView.cierre=t,$("#app-cierre").addClass("hide"),$(".top-nav").addClass("hide"),$("#print-view").css({visibility:"visible"})}),e.catch(function(){console.log(error)})}},computed:{getTotal:function(a){var o=e,s=this.data_cierre,r=t([o.total1,o.total5,o.total10,o.total20,o.total25,o.total50,o.total100,o.total200,o.total500,o.total1000,o.total2000]);return this.suma=r,s.efectivo_caja=r.toFixed(2),s.total_descuadre=parseFloat(-s.pagos_efectivo)+parseFloat(s.efectivo_caja),s.banco=parseFloat(s.pagos_banco)+parseFloat(s.pagos_efectivo)-parseFloat(s.total_gastos)+parseFloat(s.total_descuadre),this.suma},decimals:function(){["pagos_facturas","pagos_extra","pagos_efectivo","pagos_banco","total_ingresos","efectivo_caja","total_descuadre","total_gasto","banco"].forEach(function(t){this.data_cierre[t]=this.data_cierre[t].toFixed(2)},this)}}});window.appCierre=i}if((isCurrentPage("cierre")||isCurrentPage("cierre2"))&&cierreCajaFunctions(),isCurrentPage("reportes")){var script=document.createElement("script");script.src=BASE_URL+"assets/js/min/reportes.min.js?version=4.0.22",$("body").append(script)}Vue.component("summary-print-view",{template:'    <div class="print-container">      <div class="__header">      <h2 class="__title t-center"> {{title}}</h2>      </div>      <div class="__body">      <printeable></printeable>      </div>    <div>        ',props:["somevalue"],methods:{goBack:function(){appSummaryView.isHide=!0,window.appCierre.isHide=!1,self.isHide=!0,$(".top-nav").removeClass("hide"),$("#app-cierre").removeClass("hide")}},data:function(){return{back:{link:"somelink",text:"volver a cierre"},foward:{link:BASE_URL+"app/logout",text:"cerrar session"},title:"Resumen de cierre de hoy"}}});var appSummaryView=new Vue({el:"#print-view",data:{isHide:!0,back:{link:"somelink",text:"volver a cierre"},foward:{link:BASE_URL+"app/logout",text:"cerrar session"},cierre:{autor:"",pagos_facturas:0,pagos_extras:0,pagos_efectivo:0,pagos_banco:0,total_ingresos:0,efectivo_caja:0,total_descuadre:0,total_gastos:0,banco:0}},filters:{currencyFormat:function(t){return"RD$ "+CurrencyFormat(t)},spanishDateFormat:function(t){return moment.locale("es-DO"),moment(t).format("dddd DD [de] MMMM [del] YYYY")}},methods:{goBack:function(){appSummaryView.isHide=!0,window.appCierre.isHide=!1,self.isHide=!0,$(".top-nav").removeClass("hide"),$("#app-cierre").removeClass("hide")},print:function(){print()}}});