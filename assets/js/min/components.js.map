{"version":3,"sources":["A-Lib.js","ReportesGraficos.js","closeReport.js","ExpensesReport.js","extras.js","Payments.js","Retirements.js","Tickets.js"],"names":["isCurrentPage","pageName","getCurrentPage","currentPage","$","text","split","toLowerCase","trim","fillBSTable","tableId","content","$table","bootstrapTable","find","html","addClass","css","display","filterBSTable","state","estado","fetchReportData","send","axios","get","BASE_URL","then","response","cajaWeekChart","data","appVistaDetalle","cierre","catch","error","form","_stringify2","default","year","moment","format","post","res","yearChart","gastos","ganancias","canvas","chartOptions","type","labels","datasets","label","values","backgroundColor","colors","lightBlue6","blue7","window","chartColors","blue","green","blueGreen","red","options","responsive","maintainAspectRatio","scales","yAxes","ticks","callback","index","CurrencyFormat","xAxes","replace","tooltips","callbacks","tooltipItem","yLabel","title","autor","fecha","Chart","$canvas","meses","borderColor","fill","Vue","el","table","tableHTML","hasTotals","totals","between","first_date","second_date","mounted","this","getReport","filters","currencyFormat","number","methods","self","fillTable","acum","total","listExtras","reciboReset","id_pago","id_contrato","id_servicio","id_empleado","fecha_pago","concepto","detalles_extra","cuota","mora","monto_extra","fecha_limite","complete_date","descuento","razon_descuento","deuda","abono_a","tipo","generado","appPagoExtra","recibo","visible","pagado","extra","controls","id_extra","checkbox","ultimo_pago","monto_pagado","monto_total","firstControls","hide","computed","url_recibo","hide_recibo","isPagado","goBack","extraTable","parents","removeClass","refresh","generatePayment","displayMessage","mensaje","selectExtraPayment","pagos","change","MESSAGE_INFO","getPayment","applyPayment","sender","editPayment","endpoint","preparedData","prepareData","info","extras","getPayments","console","log","deletePayment","bus","$on","row","on","val","orange","yellow","purple","grey","red3","deepOrange4","banco","dinero_real_en_caja","pago_de_facturas","pagos_de_extras","pagos_en_efectivo","pagos_via_banco","total_de_ingresos","total_descuadre","print","_print","apply","arguments","toString","getForm","object","ticketListView","dataSearch","tickets","itemClickListener","busAveria","search","fillAveriasList","$content","id_averia","ticketView","getTicket","emptyTicket","id_cliente","cliente","direccion","descripcion","celular","fecha_reparacion","tecnico","codigo","classes","mode","newComment","edit","new_comment","comments","ticket","created","quit","closeCommentMode","startComment","addComment","getComments","_deleteComment","e","commentItem","target","parentNode","idComment","attributes","value","classList","add","swal","showCancelButton","confirmButtonText","cancelButtonText","deleteComment","remove","id_reporte","editComment","updateDescription","updateTicket","updateState","fields","closeEditMode","getFields","deleteTicket","enterEditMode","selectedFields","forEach","field"],"mappings":"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","file":"components.js","sourcesContent":["function isCurrentPage(pageName){\r\n  if(getCurrentPage() == pageName){\r\n    return true\r\n  }  \r\n  return false;\r\n}\r\n\r\nfunction getCurrentPage(){\r\n  var currentPage = $(\"title\").text().split(\" \");\r\n  currentPage = currentPage[4].toLowerCase().trim();\r\n  return currentPage;\r\n}\r\n\r\nfunction fillBSTable(tableId, content) {\r\n  var $table = $(tableId);\r\n  $table.bootstrapTable('destroy');\r\n  $table.find('tbody').html(content);\r\n  $table.bootstrapTable();\r\n  $('.pull-right.search').addClass('hide')\r\n  $table.find('tbody').css({display:\"table-row-group\"});\r\n  $table.addClass('innertable');\r\n\r\n}\r\n\r\nfunction filterBSTable(tableId, state) {\r\n  $(tableId).bootstrapTable('filterBy',{\r\n    estado: state\r\n  });\r\n}","\n    if (currentPage == 'reportes'){\n      fetchReportData();\n    }\n\n    function fetchReportData() {\n      var send = axios.get(BASE_URL + 'caja/get_last_cierre')\n      send.then(function (response) {\n        cajaWeekChart(response.data);\n        appVistaDetalle.cierre = response.data.cierre;\n      })\n      send.catch(function (error) {\n\n      })\n\n      var form = \"data=\"+ JSON.stringify({year:moment().format(\"YYYY\")})\n      var send2 = axios.post(BASE_URL + 'caja/get_year_info',form)\n      send2.then(function(res){\n        var gastos    = res.data.gastos;\n        var ganancias = res.data.ganancias;\n        yearChart(gastos,ganancias);\n      })\n    }\n\n\n    window.chartColors = {\n      red: 'rgb(255, 99, 132)',\n      orange: 'rgb(255, 159, 64)',\n      yellow: 'rgb(255, 205, 86)',\n      green: 'rgb(75, 192, 192)',\n      blue: 'rgb(54, 162, 235)',\n      purple: 'rgb(153, 102, 255)',\n      grey: 'rgb(201, 203, 207)'\n    };\n    var meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n\n    var colors = {\n      green: 'rgba(0,230,118 ,1)',\n      blueGreen: 'rgba(29,233,182 ,1)',\n      blue7: 'rgba(25,118,210 ,1)',\n      lightBlue6: 'rgba(3,155,229 ,1)',\n      red3: 'rgba(229,115,115 ,1)',\n      deepOrange4: 'rgba(255,112,67 ,1)'\n    }\n\n    function cajaWeekChart(data) {\n      var canvas = $(\"#ganancias-chart\");\n      var chartOptions = {\n        type: 'bar',\n        data: {\n          labels: data.labels,\n          datasets: [{\n            label: \"Valores\",\n            data: data.values,\n            backgroundColor: [colors.lightBlue6, colors.lightBlue6, colors.blue7, window.chartColors.blue,window.chartColors.green, colors.blueGreen, window.chartColors.red,window.chartColors.red,  window.chartColors.blue],\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            yAxes: [{\n              ticks: {\n                callback: function (label, index, labels) {\n                  if (label == '' || label == null) label = 0;\n                  return \"RD$ \" + CurrencyFormat(label);\n                }\n              }\n            }],\n            xAxes: [{\n              ticks: {\n                callback: function (label, index, labels) {\n                  return label.replace(/_/g, \" \");\n                }\n              }\n            }]\n          },\n          tooltips: {\n            callbacks: {\n              label: function (tooltipItem, data) {\n                return \"RD$ \" + CurrencyFormat(tooltipItem.yLabel);\n              }\n            }\n          },\n          title: {\n            display: true,\n            text: \"Datos del ultimo cierre. hecho por \" + data.autor + \" el dia \" + data.fecha\n          }\n        }\n      };\n      var mychart = new Chart(canvas, chartOptions);\n    }\n\n    function yearChart(gastos, ganancias) {\n      var $canvas = $(\"#ganancias-mes-chart\");\n      var data = {\n          labels: meses,\n          datasets: [{\n            label: \"Gastos\",\n            backgroundColor: window.chartColors.red,\n            borderColor: window.chartColors.red,\n            data: gastos,\n            fill: false,\n          }, {\n            label: \"Banco(Ganancias)\",\n            fill: false,\n            backgroundColor: window.chartColors.blue,\n            borderColor: window.chartColors.blue,\n            data: ganancias,\n          }]\n        };\n\n        var options = {\n          responsive: true,\n          maintainAspectRatio: false,\n          scales: {\n            yAxes: [{\n              ticks: {\n                callback: function (label, index, labels) {\n                  return \"RD$ \" + CurrencyFormat(label);\n                }\n              }\n            }]\n          },\n          tooltips: {\n            callbacks: {\n              label: function (tooltipItem, data) {\n                return \"RD$ \" + CurrencyFormat(tooltipItem.yLabel);\n              }\n            }\n          },\n          title: {\n            display: true,\n            text: \"Registros de cierre Este ultimo año\"\n          }\n        }\n\n      var chart = new Chart($canvas, {\n        type: 'line',\n        data: data,\n        options: options\n      });\n\n    }\n\n    var cierre = {\n      autor: \"\",\n      banco: 0,\n      dinero_real_en_caja: 0,\n      fecha : '',\n      pago_de_facturas: 0,\n      pagos_de_extras: 0,\n      pagos_en_efectivo:0,\n      pagos_via_banco:0,\n      total_de_ingresos: 0,\n      total_descuadre:0 }\n\n    var appVistaDetalle = new Vue({\n      el: '#app-vista-detalle',\n      data: {\n        cierre: cierre,\n      },\n\n      filters: {\n        currencyFormat: function(number){\n          return \"RD$ \"+ CurrencyFormat(number);\n        }\n      },\n      methods:{\n        print: function(){\n          print()\n        }\n      }\n    })\n\n","if (isCurrentPage(\"informes\")) {\n  (function(){\n    var closeReport = new Vue({\n      el: '#cierres',\n      data: {\n       table: '',\n       tableHTML: '',\n       hasTotals: false,\n       totals: false,\n       between: {\n         first_date: '',\n         second_date: '',\n         text: ''\n       }\n      },\n\n      mounted: function () {\n        if (currentPage == 'informes') {\n          this.getReport();\n        }\n      },\n\n      filters: {\n        currencyFormat: function(number){\n          return \"RD$ \"+ CurrencyFormat(number);\n        },\n      },\n\n      methods: {\n        getReport: function () {\n          var self = this;\n          var form = 'data=' + JSON.stringify(this.between)\n          axios.post(BASE_URL + 'caja/get_cierres/true', form)\n          .then(function (res) {\n            self.fillTable(res.data.content);\n            self.hasTotals = true;\n            self.totals    = res.data.acum;\n          })\n        },\n\n        fillTable: function(content) {\n          fillBSTable('#cierres-table', content);\n        }\n      }\n    })\n  })()\n}\n","if (isCurrentPage(\"informes\")) {\r\n  (function(){\r\n    var expensesReport = new Vue({\r\n      el: '#gastos',\r\n      data: {\r\n       table: '',\r\n       tableHTML: '',\r\n       total: '',\r\n       between: {\r\n         first_date: '',\r\n         second_date: '',\r\n         text: ''\r\n       }\r\n      },\r\n    \r\n      mounted: function () {\r\n        if (currentPage == 'informes') {\r\n          this.getReport();\r\n        }\r\n      },\r\n    \r\n      filters: {\r\n        currencyFormat: function(number){\r\n          return \"RD$ \"+ CurrencyFormat(number);\r\n        },\r\n      },\r\n    \r\n      methods: {\r\n        getReport: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.between)\r\n          axios.post(BASE_URL + 'caja/get_gastos/true', form)\r\n          .then(function (res) {\r\n            self.fillTable(res.data.content)\r\n            self.total = res.data.acum;\r\n          })\r\n        },\r\n    \r\n        fillTable: function(content) {\r\n          fillBSTable('#gastos-table', content);\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"detalles\")) {\r\n  (function(){\r\n    var listExtras = '';\r\n    var reciboReset = {\r\n      id_pago: 0,\r\n      id_contrato: 0,\r\n      id_servicio: 0,\r\n      id_empleado: 0,\r\n      fecha_pago : '',\r\n      concepto : 'extra',\r\n      detalles_extra : '',\r\n      cuota: '',\r\n      mora : '',\r\n      monto_extra: '',\r\n      total: '',\r\n      estado: '',\r\n      fecha_limite: '',\r\n      complete_date : '',\r\n      descuento: '',\r\n      razon_descuento: '',\r\n      deuda: '',\r\n      abono_a: '',\r\n      tipo: '',\r\n      generado: ''\r\n    }\r\n    \r\n    var appPagoExtra = new Vue({\r\n      el: \"#app-pago-extra\",\r\n      data: {\r\n        recibo:{\r\n           id_pago: 0,\r\n           id_contrato: 0,\r\n           id_servicio: 0,\r\n           id_empleado: 0,\r\n           fecha_pago : 'dd/mm/yyyy',\r\n           concepto : 'extra',\r\n           detalles_extra : '',\r\n           cuota: '',\r\n           mora : '',\r\n           monto_extra: '',\r\n           total: '',\r\n           estado: '',\r\n           fecha_limite: '',\r\n           complete_date : '',\r\n           descuento: '',\r\n           razon_descuento: '',\r\n           deuda: '',\r\n           abono_a: '',\r\n           tipo: '',\r\n           generado: ''\r\n        },\r\n    \r\n        visible: false,\r\n        pagado: false,\r\n        extra:{\r\n          \"controls\": '',\r\n          \"id_extra\": '',\r\n          \"id_servicio\": '',\r\n          \"checkbox\": '',\r\n          \"fecha\": '',\r\n          \"concepto\": '',\r\n          \"ultimo_pago\": '',\r\n          \"monto_pagado\": '',\r\n          \"monto_total\": '',\r\n          \"estado\": ''\r\n        },\r\n        firstControls: {\r\n          hide: false\r\n        },\r\n      },\r\n      filters: {\r\n    \r\n      },\r\n      computed: {\r\n        url_recibo: function () {\r\n          return BASE_URL + 'process/getrecibo/' + this.recibo.id_pago;\r\n        },\r\n    \r\n        hide_recibo: function () {\r\n          if(this.recibo.estado == \"pagado\"){\r\n            return false\r\n          }\r\n           return this.hide_recibo = true; \r\n        },\r\n    \r\n        isPagado: function () {\r\n          this.pagado = (this.recibo.estado == 'pagado');\r\n          return this.pagado;\r\n        }\r\n      },\r\n    \r\n      methods:{\r\n    \r\n        goBack: function () {\r\n          extraTable.el.parents(\".bootstrap-table\").removeClass(\"hide\");\r\n          this.visible = false\r\n          this.extra = {concepto: ''}\r\n          extraTable.refresh(listExtras);\r\n        },\r\n    \r\n        generatePayment: function () {\r\n          if (this.pagado || this.recibo.id_pago == 0) {\r\n            var form = 'data=' + JSON.stringify(this.extra);\r\n            var send = axios.post( BASE_URL + 'extra/generate_extra_payment',form);\r\n            send.then(function(res){\r\n              var data = res.data;\r\n              displayMessage(data.mensaje);\r\n              selectExtraPayment.html(data.pagos).change();\r\n            });\r\n            send.catch(function(){\r\n              \r\n            })\r\n          } else {\r\n            displayMessage( MESSAGE_INFO + ' Debe realizar este pago antes de crear uno nuevo');\r\n          }\r\n        },\r\n    \r\n        getPayment: function (id_pago) {\r\n          var form = \"data=\" + JSON.stringify({id_pago: id_pago});\r\n          var self = this\r\n          var send = axios.post( BASE_URL + 'extra/get_payment',form);\r\n          send.then(function(res){\r\n            var data = res.data \r\n            if(data.recibo){\r\n              self.recibo = data.recibo\r\n            }\r\n          })\r\n        },\r\n    \r\n        applyPayment: function () {\r\n          if (this.recibo.id_pago != 0) {\r\n            this.sender('extra/apply_payment');\r\n          } else {\r\n            displayMessage( MESSAGE_INFO + ' Debe generar un pago primero');\r\n          }\r\n        },\r\n    \r\n        editPayment: function () {\r\n          this.sender('extra/edit_payment');\r\n        },\r\n    \r\n        sender: function(endpoint) {\r\n          var self = this;\r\n          var preparedData = this.prepareData()\r\n          var info = preparedData.info;\r\n          var data = preparedData.data;\r\n    \r\n          var form = 'data='+ JSON.stringify(data) + '&info='+ JSON.stringify(info)\r\n          var send = axios.post(BASE_URL + endpoint,form)\r\n    \r\n          send.then(function (res) {\r\n            var data = res.data\r\n            if (data.extras) {\r\n              listExtras = data.extras;\r\n            }\r\n\r\n            if (data.mensaje){\r\n              displayMessage(data.mensaje);\r\n            }\r\n\r\n            self.getPayments(self.extra.id_extra);\r\n          })\r\n          \r\n          send.catch(function(error){\r\n            console.log(error);\r\n          })\r\n        },\r\n    \r\n        prepareData: function (recibo) {\r\n          var recibo = this.recibo;\r\n          \r\n          var data = {\r\n            concepto: 'extra -', \r\n            detalles_extra: recibo.detalles_extra,\r\n            fecha_pago: recibo.fecha_pago,\r\n            cuota: recibo.cuota,\r\n            total: recibo.cuota,\r\n            estado: 'pagado',\r\n            tipo: recibo.tipo,\r\n            generado: true\r\n          };\r\n          \r\n          var info = {\r\n            id_extra: recibo.id_extra,\r\n            id_pago: recibo.id_pago\r\n          };\r\n        \r\n          return {data: data, info: info};\r\n        },\r\n        \r\n        getPayments: function (id_extra) {\r\n          var self = this;\r\n          var form = \"data=\"+ JSON.stringify({id_extra: id_extra})\r\n          var send = axios.post(BASE_URL + 'extra/get_extra_payment_of', form)\r\n          send.then(function(res){\r\n            var data = res.data;\r\n    \r\n            if(!data.pagos){\r\n              self.recibo = reciboReset\r\n            }\r\n    \r\n            selectExtraPayment.html(data.pagos).change()\r\n    \r\n          })\r\n        },\r\n    \r\n        deletePayment: function () {\r\n          var self = this;\r\n          var recibo = this.recibo\r\n          var data = {\r\n            'id_extra': recibo.id_extra,\r\n            'id_pago': recibo.id_pago\r\n          }\r\n    \r\n          var form = 'data='+ JSON.stringify(data)\r\n          var send = axios.post(BASE_URL + 'extra/delete_payment',form)\r\n    \r\n          send.then(function (res) {\r\n            var data = res.data\r\n            displayMessage(data.mensaje);\r\n            self.getPayments(self.extra.id_extra);\r\n          })\r\n          send.catch(function(error){\r\n            console.log(error);\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n    bus.$on('row-selected',function (row) {\r\n      extraTable.el.parents(\".bootstrap-table\").addClass(\"hide\");\r\n      appPagoExtra.visible = true\r\n      appPagoExtra.extra = row\r\n      listExtras = extraTable.el.find('tbody').html();\r\n      appPagoExtra.getPayments(row.id_extra);\r\n    })\r\n    \r\n    var selectExtraPayment = $(\"#select-extra-payment\");\r\n    selectExtraPayment.on('change',function(){\r\n      var id_pago = selectExtraPayment.val()\r\n      appPagoExtra.getPayment(id_pago)\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"notificaciones\")) {\r\n  (function(){\r\n    var paymentsReport = new Vue({\r\n      el: '#recibos',\r\n      data: {\r\n       table: '',\r\n       tableHTML: '',\r\n       total: '',\r\n       between: {\r\n         first_date: '',\r\n         second_date: '',\r\n         text: ''\r\n       }\r\n      },\r\n      mounted: function () {\r\n        if (currentPage == 'notificaciones') {\r\n          this.getReport();\r\n        }\r\n      },\r\n      filters: {\r\n        currencyFormat: function(number){\r\n          return \"RD$ \"+ CurrencyFormat(number);\r\n        },\r\n      },\r\n    \r\n      methods: {\r\n        getReport: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.between)\r\n          axios.post(BASE_URL + 'payment/get_receipts/', form)\r\n          .then(function (res) {\r\n            self.fillTable(res.data.content)\r\n            self.total = res.data.acum;\r\n          })\r\n        },\r\n    \r\n        fillTable: function(content) {\r\n          var $table = $('#receipts-table')\r\n          $table.bootstrapTable('destroy');\r\n          $table.find('tbody').html(content);\r\n          $table.bootstrapTable();\r\n          $table.find('tbody').css({display:\"table-row-group\"});\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"notificaciones\")) {\r\n  (function () {\r\n    var RetirementReport = new Vue({\r\n      el: '#retiros',\r\n      data: {\r\n        table: '',\r\n        tableHTML: '',\r\n        between: {\r\n          first_date: '',\r\n          second_date: ''\r\n        }\r\n      },\r\n      mounted: function () {\r\n        if (currentPage == 'notificaciones') {\r\n          this.getReport();\r\n        }\r\n      },\r\n\r\n      methods: {\r\n        getReport: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.between)\r\n          axios.post(BASE_URL + 'contract/getCancelations/', form)\r\n            .then(function (res) {\r\n              self.fillTable(res.data.content)\r\n            })\r\n        },\r\n\r\n        fillTable: function (content) {\r\n          var $table = $('#cancelation-table')\r\n          $table.bootstrapTable('destroy');\r\n          $table.find('tbody').html(content);\r\n          $table.bootstrapTable();\r\n          $table.find('tbody').css({\r\n            display: \"table-row-group\"\r\n          });\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}","if (isCurrentPage(\"notificaciones\")) {\r\n  (function () {\r\n    var ticketListView = new Vue({\r\n      el: '#averias-list-view',\r\n      data: {\r\n        dataSearch: {\r\n          text: '',\r\n          state: 'por reparar',\r\n        },\r\n        tickets: [],\r\n        hide: false\r\n      },\r\n\r\n      mounted: function () {\r\n        this.itemClickListener();\r\n        var self = this\r\n        busAveria.$on('tickets-listed', function () {\r\n          self.itemClickListener()\r\n        });\r\n      },\r\n\r\n      methods: {\r\n        search: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.dataSearch);\r\n          var send = axios.post(BASE_URL + 'api/averias/search', form);\r\n\r\n          send.then(function (res) {\r\n            self.fillAveriasList(res.data);\r\n          })\r\n\r\n          send.catch(function () {\r\n            console.error(res.data.mensaje);\r\n          })\r\n\r\n        },\r\n\r\n        fillAveriasList: function ($content) {\r\n          $('#averias-list').html($content);\r\n          ticketListView.itemClickListener();\r\n        },\r\n\r\n        itemClickListener: function () {\r\n          $('#averias-list-view .averia-item').on('click', function () {\r\n            var id_averia = $(this).find('.code').text().trim();\r\n            ticketView.getTicket(id_averia);\r\n          })\r\n        }\r\n      }\r\n    });\r\n\r\n    var emptyTicket = {\r\n      \"id_averia\": \"\",\r\n      \"id_cliente\": \"\",\r\n      \"cliente\": \"\",\r\n      \"direccion\": \"\",\r\n      \"descripcion\": \"\",\r\n      \"celular\": \"\",\r\n      \"fecha\": \"\",\r\n      \"estado\": \"\",\r\n      \"fecha_reparacion\": \"\",\r\n      \"tecnico\": \"\",\r\n      \"codigo\": '',\r\n    }\r\n\r\n    var ticketView = new Vue({\r\n      el: '#ticket-view',\r\n\r\n      data: {\r\n        classes: {\r\n          hide: true\r\n        },\r\n        mode: {\r\n          newComment: false,\r\n          edit: false,\r\n        },\r\n        new_comment: '',\r\n        comments: [],\r\n        ticket: emptyTicket\r\n      },\r\n      created: function () {\r\n        $('#ticket-view').removeClass('invisible')\r\n      },\r\n\r\n      methods: {\r\n        getTicket: function (id_averia) {\r\n          var form = 'data=' + JSON.stringify({\r\n            id_averia: id_averia\r\n          })\r\n          var send = axios.post(BASE_URL + 'api/averias/get_averia', form);\r\n\r\n          send.then(function (res) {\r\n            var data = res.data;\r\n            ticketView.classes.hide = false;\r\n            ticketListView.hide = true;\r\n            ticketView.ticket = data.ticket;\r\n            ticketView.comments = data.comments;\r\n          })\r\n        },\r\n\r\n        quit: function () {\r\n          this.ticket = emptyTicket;\r\n          this.comments = null;\r\n          this.classes.hide = true;\r\n          this.closeCommentMode();\r\n          ticketListView.hide = false;\r\n        },\r\n\r\n        print: function () {\r\n          print();\r\n        },\r\n\r\n        startComment: function () {\r\n          this.mode.newComment = true;\r\n        },\r\n\r\n        addComment: function () {\r\n          var form = getForm({\r\n            id_averia: this.ticket.id_averia,\r\n            descripcion: this.new_comment\r\n          });\r\n          var send = axios.post(BASE_URL + 'api/averias/add_comment', form);\r\n          var self = this;\r\n          send.then(function (res) {\r\n            self.getComments();\r\n            self.closeCommentMode()\r\n            displayMessage(res.data.mensaje);\r\n          });\r\n        },\r\n\r\n        _deleteComment: function (e) {\r\n          var commentItem = e.target.parentNode.parentNode\r\n          var idComment = e.target.parentNode.attributes['data-id'].value\r\n          var self = this;\r\n          commentItem.classList.add('to-delete');\r\n\r\n          swal({\r\n              title: 'Está Seguro?',\r\n              text: \"Seguro de que eliminar este reporte?\",\r\n              type: 'warning',\r\n              showCancelButton: true,\r\n              confirmButtonText: 'Eliminar',\r\n              cancelButtonText: 'Cancelar'\r\n            })\r\n            .then(function () {\r\n              self.deleteComment(idComment);\r\n              commentItem.classList.remove('to-delete')\r\n            })\r\n            .catch(function () {\r\n              commentItem.classList.remove('to-delete')\r\n            })\r\n        },\r\n\r\n        deleteComment: function (idComment) {\r\n          var self = this;\r\n          var form = getForm({\r\n            id_reporte: idComment\r\n          });\r\n          var send = axios.post(BASE_URL + 'api/averias/delete_comment', form);\r\n\r\n          send.then(function (res) {\r\n            self.getComments();\r\n            displayMessage(res.data.mensaje);\r\n          });\r\n        },\r\n\r\n        editComment: function () {\r\n\r\n        },\r\n\r\n        closeCommentMode: function () {\r\n          this.mode.newComment = false;\r\n          this.new_comment = '';\r\n        },\r\n\r\n        getComments: function () {\r\n          var form = getForm({\r\n            id_averia: this.ticket.id_averia\r\n          });\r\n          var send = axios.post(BASE_URL + 'api/averias/get_comments', form);\r\n          var self = this\r\n          send.then(function (res) {\r\n            self.comments = res.data.comments;\r\n          });\r\n        },\r\n\r\n        updateDescription: function () {\r\n          this.updateTicket(['id_averia', 'descripcion', 'tecnico', 'estado', 'fecha_reparacion']);\r\n        },\r\n\r\n        updateState: function () {\r\n          if (this.ticket.estado == 'por reparar') {\r\n            this.ticket.fecha_reparacion = ''\r\n          } else {\r\n            this.ticket.fecha_reparacion = moment().format('YYYY-MM-DD');\r\n          }\r\n        },\r\n\r\n        updateTicket: function (fields) {\r\n          this.closeEditMode();\r\n          var form = getForm(this.getFields(fields));\r\n          var send = axios.post(BASE_URL + 'api/averias/update_averia', form);\r\n\r\n          send.then(function (res) {\r\n            ticketListView.search();\r\n            displayMessage(res.data.mensaje)\r\n          })\r\n        },\r\n\r\n        deleteTicket: function () {\r\n          console.info('deleted');\r\n        },\r\n\r\n        closeEditMode: function () {\r\n          this.mode.edit = false;\r\n        },\r\n\r\n        enterEditMode: function () {\r\n          this.mode.edit = true;\r\n        },\r\n\r\n        getFields: function (fields) {\r\n          var selectedFields = {};\r\n          var self = this;\r\n          fields.forEach(function (field) {\r\n            selectedFields[field] = self.ticket[field]\r\n          }, this);\r\n\r\n          return selectedFields;\r\n        }\r\n\r\n      }\r\n    })\r\n\r\n    function getForm(object) {\r\n      return \"data=\" + JSON.stringify(object);\r\n    }\r\n  })()\r\n}"]}