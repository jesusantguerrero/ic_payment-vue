{"version":3,"sources":["A-Lib.js","closeReport.js","ExpensesReport.js","extras.js","Payments.js","ReportesGraficos.js","Retirements.js","Tickets.js"],"names":["isCurrentPage","pageName","getCurrentPage","currentPage","$","text","split","toLowerCase","trim","fillBSTable","tableId","content","$table","bootstrapTable","find","html","addClass","css","display","filterBSTable","state","estado","Vue","el","data","table","tableHTML","hasTotals","totals","between","first_date","second_date","mounted","this","getReport","filters","currencyFormat","number","CurrencyFormat","methods","self","form","JSON","stringify","axios","post","BASE_URL","then","res","fillTable","acum","total","listExtras","reciboReset","id_pago","id_contrato","id_servicio","id_empleado","fecha_pago","concepto","detalles_extra","cuota","mora","monto_extra","fecha_limite","complete_date","descuento","razon_descuento","deuda","abono_a","tipo","generado","appPagoExtra","recibo","visible","pagado","extra","controls","id_extra","checkbox","fecha","ultimo_pago","monto_pagado","monto_total","firstControls","hide","computed","url_recibo","hide_recibo","isPagado","goBack","extraTable","parents","removeClass","refresh","generatePayment","send","displayMessage","mensaje","selectExtraPayment","pagos","change","catch","MESSAGE_INFO","getPayment","applyPayment","sender","editPayment","endpoint","preparedData","prepareData","info","extras","getPayments","error","console","log","deletePayment","bus","$on","row","on","val","cajaWeekChart","canvas","chartOptions","type","labels","datasets","label","values","backgroundColor","colors","lightBlue6","blue7","window","chartColors","blue","green","blueGreen","red","options","responsive","maintainAspectRatio","scales","yAxes","ticks","callback","index","xAxes","replace","tooltips","callbacks","tooltipItem","yLabel","title","autor","Chart","yearChart","gastos","ganancias","$canvas","meses","borderColor","fill","get","response","appVistaDetalle","cierre","year","moment","format","fetchReportData","orange","yellow","purple","grey","red3","deepOrange4","banco","dinero_real_en_caja","pago_de_facturas","pagos_de_extras","pagos_en_efectivo","pagos_via_banco","total_de_ingresos","total_descuadre","print","_print","apply","arguments","toString","getForm","object","ticketListView","dataSearch","tickets","itemClickListener","busAveria","search","fillAveriasList","$content","id_averia","ticketView","getTicket","emptyTicket","id_cliente","cliente","direccion","descripcion","celular","fecha_reparacion","tecnico","codigo","classes","mode","newComment","edit","new_comment","comments","ticket","created","quit","closeCommentMode","startComment","addComment","getComments","_deleteComment","e","commentItem","target","parentNode","idComment","attributes","value","classList","add","swal","showCancelButton","confirmButtonText","cancelButtonText","deleteComment","remove","id_reporte","editComment","updateDescription","updateTicket","updateState","fields","closeEditMode","getFields","deleteTicket","enterEditMode","selectedFields","forEach","field"],"mappings":"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","file":"components.js","sourcesContent":["function isCurrentPage(pageName){\r\n  if(getCurrentPage() == pageName){\r\n    return true\r\n  }  \r\n  return false;\r\n}\r\n\r\nfunction getCurrentPage(){\r\n  var currentPage = $(\"title\").text().split(\" \");\r\n  currentPage = currentPage[4].toLowerCase().trim();\r\n  return currentPage;\r\n}\r\n\r\nfunction fillBSTable(tableId, content) {\r\n  var $table = $(tableId);\r\n  $table.bootstrapTable('destroy');\r\n  $table.find('tbody').html(content);\r\n  $table.bootstrapTable();\r\n  $('.pull-right.search').addClass('hide')\r\n  $table.find('tbody').css({display:\"table-row-group\"});\r\n  $table.addClass('innertable');\r\n\r\n}\r\n\r\nfunction filterBSTable(tableId, state) {\r\n  $(tableId).bootstrapTable('filterBy',{\r\n    estado: state\r\n  });\r\n}","if (isCurrentPage(\"informes\")) {\n  (function(){\n    var closeReport = new Vue({\n      el: '#cierres',\n      data: {\n       table: '',\n       tableHTML: '',\n       hasTotals: false,\n       totals: false,\n       between: {\n         first_date: '',\n         second_date: '',\n         text: ''\n       }\n      },\n\n      mounted: function () {\n        if (currentPage == 'informes') {\n          this.getReport();\n        }\n      },\n\n      filters: {\n        currencyFormat: function(number){\n          return \"RD$ \"+ CurrencyFormat(number);\n        },\n      },\n\n      methods: {\n        getReport: function () {\n          var self = this;\n          var form = 'data=' + JSON.stringify(this.between)\n          axios.post(BASE_URL + 'caja/get_cierres/true', form)\n          .then(function (res) {\n            self.fillTable(res.data.content);\n            self.hasTotals = true;\n            self.totals    = res.data.acum;\n          })\n        },\n\n        fillTable: function(content) {\n          fillBSTable('#cierres-table', content);\n        }\n      }\n    })\n  })()\n}\n","if (isCurrentPage(\"informes\")) {\r\n  (function(){\r\n    var expensesReport = new Vue({\r\n      el: '#gastos',\r\n      data: {\r\n       table: '',\r\n       tableHTML: '',\r\n       total: '',\r\n       between: {\r\n         first_date: '',\r\n         second_date: '',\r\n         text: ''\r\n       }\r\n      },\r\n    \r\n      mounted: function () {\r\n        if (currentPage == 'informes') {\r\n          this.getReport();\r\n        }\r\n      },\r\n    \r\n      filters: {\r\n        currencyFormat: function(number){\r\n          return \"RD$ \"+ CurrencyFormat(number);\r\n        },\r\n      },\r\n    \r\n      methods: {\r\n        getReport: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.between)\r\n          axios.post(BASE_URL + 'caja/get_gastos/true', form)\r\n          .then(function (res) {\r\n            self.fillTable(res.data.content)\r\n            self.total = res.data.acum;\r\n          })\r\n        },\r\n    \r\n        fillTable: function(content) {\r\n          fillBSTable('#gastos-table', content);\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"detalles\")) {\r\n  (function(){\r\n    var listExtras = '';\r\n    var reciboReset = {\r\n      id_pago: 0,\r\n      id_contrato: 0,\r\n      id_servicio: 0,\r\n      id_empleado: 0,\r\n      fecha_pago : '',\r\n      concepto : 'extra',\r\n      detalles_extra : '',\r\n      cuota: '',\r\n      mora : '',\r\n      monto_extra: '',\r\n      total: '',\r\n      estado: '',\r\n      fecha_limite: '',\r\n      complete_date : '',\r\n      descuento: '',\r\n      razon_descuento: '',\r\n      deuda: '',\r\n      abono_a: '',\r\n      tipo: '',\r\n      generado: ''\r\n    }\r\n    \r\n    var appPagoExtra = new Vue({\r\n      el: \"#app-pago-extra\",\r\n      data: {\r\n        recibo:{\r\n           id_pago: 0,\r\n           id_contrato: 0,\r\n           id_servicio: 0,\r\n           id_empleado: 0,\r\n           fecha_pago : 'dd/mm/yyyy',\r\n           concepto : 'extra',\r\n           detalles_extra : '',\r\n           cuota: '',\r\n           mora : '',\r\n           monto_extra: '',\r\n           total: '',\r\n           estado: '',\r\n           fecha_limite: '',\r\n           complete_date : '',\r\n           descuento: '',\r\n           razon_descuento: '',\r\n           deuda: '',\r\n           abono_a: '',\r\n           tipo: '',\r\n           generado: ''\r\n        },\r\n    \r\n        visible: false,\r\n        pagado: false,\r\n        extra:{\r\n          \"controls\": '',\r\n          \"id_extra\": '',\r\n          \"id_servicio\": '',\r\n          \"checkbox\": '',\r\n          \"fecha\": '',\r\n          \"concepto\": '',\r\n          \"ultimo_pago\": '',\r\n          \"monto_pagado\": '',\r\n          \"monto_total\": '',\r\n          \"estado\": ''\r\n        },\r\n        firstControls: {\r\n          hide: false\r\n        },\r\n      },\r\n      filters: {\r\n    \r\n      },\r\n      computed: {\r\n        url_recibo: function () {\r\n          return BASE_URL + 'process/getrecibo/' + this.recibo.id_pago;\r\n        },\r\n    \r\n        hide_recibo: function () {\r\n          if(this.recibo.estado == \"pagado\"){\r\n            return false\r\n          }\r\n           return this.hide_recibo = true; \r\n        },\r\n    \r\n        isPagado: function () {\r\n          this.pagado = (this.recibo.estado == 'pagado');\r\n          return this.pagado;\r\n        }\r\n      },\r\n    \r\n      methods:{\r\n    \r\n        goBack: function () {\r\n          extraTable.el.parents(\".bootstrap-table\").removeClass(\"hide\");\r\n          this.visible = false\r\n          this.extra = {concepto: ''}\r\n          extraTable.refresh(listExtras);\r\n        },\r\n    \r\n        generatePayment: function () {\r\n          if (this.pagado || this.recibo.id_pago == 0) {\r\n            var form = 'data=' + JSON.stringify(this.extra);\r\n            var send = axios.post( BASE_URL + 'extra/generate_extra_payment',form);\r\n            send.then(function(res){\r\n              var data = res.data;\r\n              displayMessage(data.mensaje);\r\n              selectExtraPayment.html(data.pagos).change();\r\n            });\r\n            send.catch(function(){\r\n              \r\n            })\r\n          } else {\r\n            displayMessage( MESSAGE_INFO + ' Debe realizar este pago antes de crear uno nuevo');\r\n          }\r\n        },\r\n    \r\n        getPayment: function (id_pago) {\r\n          var form = \"data=\" + JSON.stringify({id_pago: id_pago});\r\n          var self = this\r\n          var send = axios.post( BASE_URL + 'extra/get_payment',form);\r\n          send.then(function(res){\r\n            var data = res.data \r\n            if(data.recibo){\r\n              self.recibo = data.recibo\r\n            }\r\n          })\r\n        },\r\n    \r\n        applyPayment: function () {\r\n          if (this.recibo.id_pago != 0) {\r\n            this.sender('extra/apply_payment');\r\n          } else {\r\n            displayMessage( MESSAGE_INFO + ' Debe generar un pago primero');\r\n          }\r\n        },\r\n    \r\n        editPayment: function () {\r\n          this.sender('extra/edit_payment');\r\n        },\r\n    \r\n        sender: function(endpoint) {\r\n          var self = this;\r\n          var preparedData = this.prepareData()\r\n          var info = preparedData.info;\r\n          var data = preparedData.data;\r\n    \r\n          var form = 'data='+ JSON.stringify(data) + '&info='+ JSON.stringify(info)\r\n          var send = axios.post(BASE_URL + endpoint,form)\r\n    \r\n          send.then(function (res) {\r\n            var data = res.data\r\n            if (data.extras) {\r\n              listExtras = data.extras;\r\n            }\r\n\r\n            if (data.mensaje){\r\n              displayMessage(data.mensaje);\r\n            }\r\n\r\n            self.getPayments(self.extra.id_extra);\r\n          })\r\n          \r\n          send.catch(function(error){\r\n            console.log(error);\r\n          })\r\n        },\r\n    \r\n        prepareData: function (recibo) {\r\n          var recibo = this.recibo;\r\n          \r\n          var data = {\r\n            concepto: 'extra -', \r\n            detalles_extra: recibo.detalles_extra,\r\n            fecha_pago: recibo.fecha_pago,\r\n            cuota: recibo.cuota,\r\n            total: recibo.cuota,\r\n            estado: 'pagado',\r\n            tipo: recibo.tipo,\r\n            generado: true\r\n          };\r\n          \r\n          var info = {\r\n            id_extra: recibo.id_extra,\r\n            id_pago: recibo.id_pago\r\n          };\r\n        \r\n          return {data: data, info: info};\r\n        },\r\n        \r\n        getPayments: function (id_extra) {\r\n          var self = this;\r\n          var form = \"data=\"+ JSON.stringify({id_extra: id_extra})\r\n          var send = axios.post(BASE_URL + 'extra/get_extra_payment_of', form)\r\n          send.then(function(res){\r\n            var data = res.data;\r\n    \r\n            if(!data.pagos){\r\n              self.recibo = reciboReset\r\n            }\r\n    \r\n            selectExtraPayment.html(data.pagos).change()\r\n    \r\n          })\r\n        },\r\n    \r\n        deletePayment: function () {\r\n          var self = this;\r\n          var recibo = this.recibo\r\n          var data = {\r\n            'id_extra': recibo.id_extra,\r\n            'id_pago': recibo.id_pago\r\n          }\r\n    \r\n          var form = 'data='+ JSON.stringify(data)\r\n          var send = axios.post(BASE_URL + 'extra/delete_payment',form)\r\n    \r\n          send.then(function (res) {\r\n            var data = res.data\r\n            displayMessage(data.mensaje);\r\n            self.getPayments(self.extra.id_extra);\r\n          })\r\n          send.catch(function(error){\r\n            console.log(error);\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n    bus.$on('row-selected',function (row) {\r\n      extraTable.el.parents(\".bootstrap-table\").addClass(\"hide\");\r\n      appPagoExtra.visible = true\r\n      appPagoExtra.extra = row\r\n      listExtras = extraTable.el.find('tbody').html();\r\n      appPagoExtra.getPayments(row.id_extra);\r\n    })\r\n    \r\n    var selectExtraPayment = $(\"#select-extra-payment\");\r\n    selectExtraPayment.on('change',function(){\r\n      var id_pago = selectExtraPayment.val()\r\n      appPagoExtra.getPayment(id_pago)\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"notificaciones\")) {\r\n  (function(){\r\n    var paymentsReport = new Vue({\r\n      el: '#recibos',\r\n      data: {\r\n       table: '',\r\n       tableHTML: '',\r\n       total: '',\r\n       between: {\r\n         first_date: '',\r\n         second_date: '',\r\n         text: ''\r\n       }\r\n      },\r\n      mounted: function () {\r\n        if (currentPage == 'notificaciones') {\r\n          this.getReport();\r\n        }\r\n      },\r\n      filters: {\r\n        currencyFormat: function(number){\r\n          return \"RD$ \"+ CurrencyFormat(number);\r\n        },\r\n      },\r\n    \r\n      methods: {\r\n        getReport: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.between)\r\n          axios.post(BASE_URL + 'payment/get_receipts/', form)\r\n          .then(function (res) {\r\n            self.fillTable(res.data.content)\r\n            self.total = res.data.acum;\r\n          })\r\n        },\r\n    \r\n        fillTable: function(content) {\r\n          var $table = $('#receipts-table')\r\n          $table.bootstrapTable('destroy');\r\n          $table.find('tbody').html(content);\r\n          $table.bootstrapTable();\r\n          $table.find('tbody').css({display:\"table-row-group\"});\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"reportes\")) {\r\n  (function(){\r\n    if (currentPage == 'reportes'){\r\n      fetchReportData();\r\n    }\r\n    function fetchReportData() {\r\n      var send = axios.get(BASE_URL + 'caja/get_last_cierre')\r\n      send.then(function (response) {\r\n        cajaWeekChart(response.data);\r\n        appVistaDetalle.cierre = response.data.cierre;\r\n      })\r\n      send.catch(function (error) {\r\n      \r\n      })\r\n      \r\n      var form = \"data=\"+ JSON.stringify({year:moment().format(\"YYYY\")})\r\n      var send2 = axios.post(BASE_URL + 'caja/get_year_info',form)\r\n      send2.then(function(res){\r\n        var gastos    = res.data.gastos;\r\n        var ganancias = res.data.ganancias;\r\n        yearChart(gastos,ganancias);\r\n      })\r\n    }\r\n    \r\n    \r\n    window.chartColors = {\r\n      red: 'rgb(255, 99, 132)',\r\n      orange: 'rgb(255, 159, 64)',\r\n      yellow: 'rgb(255, 205, 86)',\r\n      green: 'rgb(75, 192, 192)',\r\n      blue: 'rgb(54, 162, 235)',\r\n      purple: 'rgb(153, 102, 255)',\r\n      grey: 'rgb(201, 203, 207)'\r\n    };\r\n    var meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\r\n    \r\n    var colors = {\r\n      green: 'rgba(0,230,118 ,1)',\r\n      blueGreen: 'rgba(29,233,182 ,1)',\r\n      blue7: 'rgba(25,118,210 ,1)',\r\n      lightBlue6: 'rgba(3,155,229 ,1)',\r\n      red3: 'rgba(229,115,115 ,1)',\r\n      deepOrange4: 'rgba(255,112,67 ,1)'\r\n    }\r\n    \r\n    function cajaWeekChart(data) {\r\n      var canvas = $(\"#ganancias-chart\");\r\n      var chartOptions = {\r\n        type: 'bar',\r\n        data: {\r\n          labels: data.labels,\r\n          datasets: [{\r\n            label: \"Valores\",\r\n            data: data.values,\r\n            backgroundColor: [colors.lightBlue6, colors.lightBlue6, colors.blue7, window.chartColors.blue,window.chartColors.green, colors.blueGreen, window.chartColors.red,window.chartColors.red,  window.chartColors.blue],\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          scales: {\r\n            yAxes: [{\r\n              ticks: {\r\n                callback: function (label, index, labels) {\r\n                  if (label == '' || label == null) label = 0;\r\n                  return \"RD$ \" + CurrencyFormat(label);\r\n                }\r\n              }\r\n            }],\r\n            xAxes: [{\r\n              ticks: {\r\n                callback: function (label, index, labels) {\r\n                  return label.replace(/_/g, \" \");\r\n                }\r\n              }\r\n            }]\r\n          },\r\n          tooltips: {\r\n            callbacks: {\r\n              label: function (tooltipItem, data) {\r\n                return \"RD$ \" + CurrencyFormat(tooltipItem.yLabel);\r\n              }\r\n            }\r\n          },\r\n          title: {\r\n            display: true,\r\n            text: \"Datos del ultimo cierre. hecho por \" + data.autor + \" el dia \" + data.fecha\r\n          }\r\n        }\r\n      };\r\n      var mychart = new Chart(canvas, chartOptions);\r\n    }\r\n    \r\n    function yearChart(gastos,ganancias) {\r\n      var $canvas = $(\"#ganancias-mes-chart\");\r\n      var data = {\r\n          labels: meses,\r\n          datasets: [{\r\n            label: \"Gastos\",\r\n            backgroundColor: window.chartColors.red,\r\n            borderColor: window.chartColors.red,\r\n            data: gastos,\r\n            fill: false,\r\n          }, {\r\n            label: \"Banco(Ganancias)\",\r\n            fill: false,\r\n            backgroundColor: window.chartColors.blue,\r\n            borderColor: window.chartColors.blue,\r\n            data: ganancias,\r\n          }]\r\n        };\r\n    \r\n        var options = {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          scales: {\r\n            yAxes: [{\r\n              ticks: {\r\n                callback: function (label, index, labels) {\r\n                  return \"RD$ \" + CurrencyFormat(label);\r\n                }\r\n              }\r\n            }]\r\n          },\r\n          tooltips: {\r\n            callbacks: {\r\n              label: function (tooltipItem, data) {\r\n                return \"RD$ \" + CurrencyFormat(tooltipItem.yLabel);\r\n              }\r\n            }\r\n          },\r\n          title: {\r\n            display: true,\r\n            text: \"Registros de cierre Este ultimo año\"\r\n          }\r\n        }\r\n    \r\n      var chart = new Chart($canvas, {\r\n        type: 'line',\r\n        data: data,\r\n        options: options\r\n      });\r\n    \r\n    }\r\n    \r\n    var cierre = { \r\n      autor: \"\",\r\n      banco: 0,\r\n      dinero_real_en_caja: 0,\r\n      fecha : '',\r\n      pago_de_facturas: 0,\r\n      pagos_de_extras: 0,\r\n      pagos_en_efectivo:0,\r\n      pagos_via_banco:0,\r\n      total_de_ingresos: 0,\r\n      total_descuadre:0 }\r\n    \r\n    var appVistaDetalle = new Vue({\r\n      el: '#app-vista-detalle',\r\n      data: {\r\n        cierre: cierre,\r\n      },\r\n    \r\n      filters: {\r\n        currencyFormat: function(number){\r\n          return \"RD$ \"+ CurrencyFormat(number);\r\n        }\r\n      },\r\n      methods:{\r\n        print: function(){\r\n          print()\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}\r\n","if (isCurrentPage(\"notificaciones\")) {\r\n  (function () {\r\n    var RetirementReport = new Vue({\r\n      el: '#retiros',\r\n      data: {\r\n        table: '',\r\n        tableHTML: '',\r\n        between: {\r\n          first_date: '',\r\n          second_date: ''\r\n        }\r\n      },\r\n      mounted: function () {\r\n        if (currentPage == 'notificaciones') {\r\n          this.getReport();\r\n        }\r\n      },\r\n\r\n      methods: {\r\n        getReport: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.between)\r\n          axios.post(BASE_URL + 'contract/getCancelations/', form)\r\n            .then(function (res) {\r\n              self.fillTable(res.data.content)\r\n            })\r\n        },\r\n\r\n        fillTable: function (content) {\r\n          var $table = $('#cancelation-table')\r\n          $table.bootstrapTable('destroy');\r\n          $table.find('tbody').html(content);\r\n          $table.bootstrapTable();\r\n          $table.find('tbody').css({\r\n            display: \"table-row-group\"\r\n          });\r\n        }\r\n      }\r\n    })\r\n  })()\r\n}","if (isCurrentPage(\"notificaciones\")) {\r\n  (function () {\r\n    var ticketListView = new Vue({\r\n      el: '#averias-list-view',\r\n      data: {\r\n        dataSearch: {\r\n          text: '',\r\n          state: 'por reparar',\r\n        },\r\n        tickets: [],\r\n        hide: false\r\n      },\r\n\r\n      mounted: function () {\r\n        this.itemClickListener();\r\n        var self = this\r\n        busAveria.$on('tickets-listed', function () {\r\n          self.itemClickListener()\r\n        });\r\n      },\r\n\r\n      methods: {\r\n        search: function () {\r\n          var self = this;\r\n          var form = 'data=' + JSON.stringify(this.dataSearch);\r\n          var send = axios.post(BASE_URL + 'api/averias/search', form);\r\n\r\n          send.then(function (res) {\r\n            self.fillAveriasList(res.data);\r\n          })\r\n\r\n          send.catch(function () {\r\n            console.error(res.data.mensaje);\r\n          })\r\n\r\n        },\r\n\r\n        fillAveriasList: function ($content) {\r\n          $('#averias-list').html($content);\r\n          ticketListView.itemClickListener();\r\n        },\r\n\r\n        itemClickListener: function () {\r\n          $('#averias-list-view .averia-item').on('click', function () {\r\n            var id_averia = $(this).find('.code').text().trim();\r\n            ticketView.getTicket(id_averia);\r\n          })\r\n        }\r\n      }\r\n    });\r\n\r\n    var emptyTicket = {\r\n      \"id_averia\": \"\",\r\n      \"id_cliente\": \"\",\r\n      \"cliente\": \"\",\r\n      \"direccion\": \"\",\r\n      \"descripcion\": \"\",\r\n      \"celular\": \"\",\r\n      \"fecha\": \"\",\r\n      \"estado\": \"\",\r\n      \"fecha_reparacion\": \"\",\r\n      \"tecnico\": \"\",\r\n      \"codigo\": '',\r\n    }\r\n\r\n    var ticketView = new Vue({\r\n      el: '#ticket-view',\r\n\r\n      data: {\r\n        classes: {\r\n          hide: true\r\n        },\r\n        mode: {\r\n          newComment: false,\r\n          edit: false,\r\n        },\r\n        new_comment: '',\r\n        comments: [],\r\n        ticket: emptyTicket\r\n      },\r\n      created: function () {\r\n        $('#ticket-view').removeClass('invisible')\r\n      },\r\n\r\n      methods: {\r\n        getTicket: function (id_averia) {\r\n          var form = 'data=' + JSON.stringify({\r\n            id_averia: id_averia\r\n          })\r\n          var send = axios.post(BASE_URL + 'api/averias/get_averia', form);\r\n\r\n          send.then(function (res) {\r\n            var data = res.data;\r\n            ticketView.classes.hide = false;\r\n            ticketListView.hide = true;\r\n            ticketView.ticket = data.ticket;\r\n            ticketView.comments = data.comments;\r\n          })\r\n        },\r\n\r\n        quit: function () {\r\n          this.ticket = emptyTicket;\r\n          this.comments = null;\r\n          this.classes.hide = true;\r\n          this.closeCommentMode();\r\n          ticketListView.hide = false;\r\n        },\r\n\r\n        print: function () {\r\n          print();\r\n        },\r\n\r\n        startComment: function () {\r\n          this.mode.newComment = true;\r\n        },\r\n\r\n        addComment: function () {\r\n          var form = getForm({\r\n            id_averia: this.ticket.id_averia,\r\n            descripcion: this.new_comment\r\n          });\r\n          var send = axios.post(BASE_URL + 'api/averias/add_comment', form);\r\n          var self = this;\r\n          send.then(function (res) {\r\n            self.getComments();\r\n            self.closeCommentMode()\r\n            displayMessage(res.data.mensaje);\r\n          });\r\n        },\r\n\r\n        _deleteComment: function (e) {\r\n          var commentItem = e.target.parentNode.parentNode\r\n          var idComment = e.target.parentNode.attributes['data-id'].value\r\n          var self = this;\r\n          commentItem.classList.add('to-delete');\r\n\r\n          swal({\r\n              title: 'Está Seguro?',\r\n              text: \"Seguro de que eliminar este reporte?\",\r\n              type: 'warning',\r\n              showCancelButton: true,\r\n              confirmButtonText: 'Eliminar',\r\n              cancelButtonText: 'Cancelar'\r\n            })\r\n            .then(function () {\r\n              self.deleteComment(idComment);\r\n              commentItem.classList.remove('to-delete')\r\n            })\r\n            .catch(function () {\r\n              commentItem.classList.remove('to-delete')\r\n            })\r\n        },\r\n\r\n        deleteComment: function (idComment) {\r\n          var self = this;\r\n          var form = getForm({\r\n            id_reporte: idComment\r\n          });\r\n          var send = axios.post(BASE_URL + 'api/averias/delete_comment', form);\r\n\r\n          send.then(function (res) {\r\n            self.getComments();\r\n            displayMessage(res.data.mensaje);\r\n          });\r\n        },\r\n\r\n        editComment: function () {\r\n\r\n        },\r\n\r\n        closeCommentMode: function () {\r\n          this.mode.newComment = false;\r\n          this.new_comment = '';\r\n        },\r\n\r\n        getComments: function () {\r\n          var form = getForm({\r\n            id_averia: this.ticket.id_averia\r\n          });\r\n          var send = axios.post(BASE_URL + 'api/averias/get_comments', form);\r\n          var self = this\r\n          send.then(function (res) {\r\n            self.comments = res.data.comments;\r\n          });\r\n        },\r\n\r\n        updateDescription: function () {\r\n          this.updateTicket(['id_averia', 'descripcion', 'tecnico', 'estado', 'fecha_reparacion']);\r\n        },\r\n\r\n        updateState: function () {\r\n          if (this.ticket.estado == 'por reparar') {\r\n            this.ticket.fecha_reparacion = ''\r\n          } else {\r\n            this.ticket.fecha_reparacion = moment().format('YYYY-MM-DD');\r\n          }\r\n        },\r\n\r\n        updateTicket: function (fields) {\r\n          this.closeEditMode();\r\n          var form = getForm(this.getFields(fields));\r\n          var send = axios.post(BASE_URL + 'api/averias/update_averia', form);\r\n\r\n          send.then(function (res) {\r\n            ticketListView.search();\r\n            displayMessage(res.data.mensaje)\r\n          })\r\n        },\r\n\r\n        deleteTicket: function () {\r\n          console.info('deleted');\r\n        },\r\n\r\n        closeEditMode: function () {\r\n          this.mode.edit = false;\r\n        },\r\n\r\n        enterEditMode: function () {\r\n          this.mode.edit = true;\r\n        },\r\n\r\n        getFields: function (fields) {\r\n          var selectedFields = {};\r\n          var self = this;\r\n          fields.forEach(function (field) {\r\n            selectedFields[field] = self.ticket[field]\r\n          }, this);\r\n\r\n          return selectedFields;\r\n        }\r\n\r\n      }\r\n    })\r\n\r\n    function getForm(object) {\r\n      return \"data=\" + JSON.stringify(object);\r\n    }\r\n  })()\r\n}"]}