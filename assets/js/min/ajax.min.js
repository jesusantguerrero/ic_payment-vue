function initComponents(){switch(currentPage){case"home":initClientHandlers();break;case"administrador":initAdminHandlers();break;case"clientes":initClientHandlers();break;case"servicios":initServicesHandlers();break;case"nuevo_contrato":initContractHandlers(),Contracts.getIpList();break;case"detalles":initPaymentsHandlers(),detailHandlers(),verifyContractStatus();break;case"contratos":initContractHandlers(),initClientHandlers(),verifyContractStatus();break;case"cuenta":acountHandlers();break;case"secciones":sectionHandlers()}initCajaHandlers(),initGlobalHandlers()}function initGlobalHandlers(){"notificaciones"==currentPage&&(Generals.count_table("averias"),$("#averias-view-mode").on("change",function(t){t.stopImmediatePropagation(),Damages.getAll()}),$("#installations-view-mode").on("change",function(t){t.stopImmediatePropagation(),Installations.getAll()})),"contratos"==currentPage&&initContractHandlers(),$("#btn-save-averia").on("click",function(t){t.stopImmediatePropagation(),Damages.add()}),$("#a-client-dni").on("keydown",function(t){var e=t.which,n=$(this).val();13==e&&Clients.getOne(n,fillClientFields)}),$(".btn-update-averia").on("click",function(t){t.stopImmediatePropagation();var e=$(this).parents(".averia-item").find(".code");e=e.text().trim(),Damages.update(e)}),$(".btn-update-installation").on("click",function(t){t.stopImmediatePropagation();var e=$(this).parents(".averia-item").find(".code");e=e.text().trim(),Installations.update(e)}),$("#extra-controls").on("click",function(t){t.stopImmediatePropagation(),Contracts.btnExtraPressed($(this))}),$("#extra-client-dni").on("keydown",function(t){var e=t.which,n=$(this).val();13==e&&Contracts.getAllOfClient(n)})}function initAdminHandlers(){initPagination("#t-users","users",Generals.paginate),$("#btn-save-user").on("click",function(t){t.stopImmediatePropagation(),Users.add()}),$("#btn-update-user").on("click",function(t){t.stopImmediatePropagation(),Users.update()}),$(".delete-user").on("click",function(t){t.preventDefault();var e=$(this).parents("tr"),n=e.find(".user-id").text().trim();swal({title:"Está Seguro?",text:"Desea Eliminar al Usuario "+e.find("td:nth(3)").text()+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",confirmButtonBackground:SUMMER_SKY}).then(function(){Users.delete(n)})}),$(".edit-user").on("click",function(t){t.preventDefault();var e=$(this).parents("tr").find("td");$("#e-nickname").val(e.eq(2).text()),$("#e-name").val(e.eq(3).text()),$("#e-lastname").val(e.eq(4).text()),$("#e-dni").val(e.eq(5).text()),$("#update-user-modal").modal()}),$("#update-company-data").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),Company.update()}),$("#btn-update-settings").on("click",function(t){t.preventDefault(),Settings.update()}),$("#btn-save-averia").on("click",function(t){t.stopImmediatePropagation(),Damages.add()})}function initCajaHandlers(){"administrador"==currentPage&&(initPagination("#caja","caja",Generals.paginate),Generals.count_table("caja"));var t=$("#btn-add-money"),e=$("#btn-retire-money"),n=$("#caja-user"),a=$("#caja-date");t.on("click",function(t){t.stopImmediatePropagation(),Caja.add()}),e.on("click",function(t){t.stopImmediatePropagation(),Caja.retire()}),a.on("change",function(t){t.stopImmediatePropagation(),Caja.search()}),n.on("change",function(t){t.stopImmediatePropagation(),Caja.search()})}function initClientHandlers(){"clientes"==currentPage&&(Generals.count_table("clientes"),initPagination("#t-clients","clientes",Generals.paginate)),makeRowsClickable(),verifyClientStatus(),$("#btn-save-client").on("click",function(t){t.stopImmediatePropagation(),Clients.add()}),$("#update-client").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$("tr.selected");if(e){var n=e.find(".id_cliente").text().trim();Clients.getOne(n,Clients.receiveForEdit)}}),$("#client-searcher").on("keyup",function(t){t.stopImmediatePropagation();var e=$(this).val();Generals.search(e,"clientes",fillCurrentTable)}),$("#client-searcher-newcontract").on("keyup",function(t){t.stopImmediatePropagation();var e=$(this).val();isEmpty([e])?clearTbody(".lobby-results"):Generals.search(e,"clientes",fillClientTable)}),$("#delete-client").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$("tr.selected");if(e.length>0){var n=e.find(".id_cliente").text().trim();swal({title:"Está Seguro?",text:"Desea Eliminar al(la) Cliente "+e.find("td:nth(2)").text()+" "+e.find("td:nth(3)").text()+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",confirmButtonBackground:SUMMER_SKY}).then(function(){Generals.deleteRow(n,"clientes")})}})}function initServicesHandlers(){Generals.count_table("servicios"),initPagination("#t-services","servicios",Generals.paginate),makeRowsClickable(),$("#btn-save-service").on("click",function(t){t.stopImmediatePropagation(),Services.add()}),$("#delete-service").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$("tr.selected");if(e.length>0){var n=e.find(".id_servicio").text().trim();swal({title:"Está Seguro?",text:"Desea Eliminar  Este Servicio?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",confirmButtonBackground:SUMMER_SKY}).then(function(){Generals.deleteRow(n,"servicios")})}}),$("#edit-service").on("click",function(t){t.preventDefault();var e=$("tr.selected").find("td");$("#update-service-modal input");$("#u-service-id").val(e.eq(1).text()),$("#u-service-name").val(e.eq(2).text()),$("#u-service-description").val(e.eq(3).text()),$("#u-service-monthly-payment").val(Number(e.eq(4).text().slice(3))),$("#u-service-type").val(e.eq(5).text()),$("#update-service-modal").modal()}),$("#btn-update-service").on("click",function(t){t.stopImmediatePropagation(),Services.update()}),$("#service-searcher").on("keyup",function(t){t.stopImmediatePropagation();var e=$(this).val();Generals.search(e,"servicios",fillCurrentTable,initServicesHandlers)})}function initContractHandlers(){Generals.count_table("contratos"),initPagination("#t-contracts","v_contratos",Generals.paginate),makeRowsClickable(),$("#btn-save-contract").on("click",function(t){t.stopImmediatePropagation(),Contracts.add()}),$("#btn-add-extra").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),Contracts.callExtra()});$("#contract-searcher").on("keyup",function(t){t.stopImmediatePropagation();var e=$(this).val();Generals.search(e,"v_contratos",fillCurrentTable,initContractHandlers)}),$("#btn-cancel-contract").on("click",function(t){t.preventDefault();var e=$("tr.selected"),n=e.find("td");if(void 0!=e){$(".cancel-name").text(n.eq(2).text());var a=$(".confirmed-data"),i=$("#cancel-permanently"),o=e.find(".id_contrato").text().trim(),r=e.find(".th-client").attr("data-id-cliente");deleteValidation(a,i),$("#cancel-print").attr("href",BASE_URL+"process/getcancelcontract/"+r+"/"+o),$("#cancel-contract-modal").modal(),i.on("click",function(t){t.stopImmediatePropagation(),Contracts.cancel()}),a.val(""),i.attr("disabled","")}}),$("#btn-update-contract").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$("tr.selected");if(e){var n=e.find(".id_contrato").text().trim();Contracts.getOne(n,Contracts.recieve)}}),$("#select-contract-sector").on("change",function(t){t.stopImmediatePropagation(),Contracts.getIpList()})}function initPaymentsHandlers(){ran||(Payments.getAll(),ran=!0),verifyPaymentStatus(),initPagination("#t-pagos","pagos_por_contrato",Generals.paginate),Generals.count_table("pagos_por_contratos"),$("#btn-pay").on("click",function(t){t.stopImmediatePropagation();var e=$("tr.selected");if(e){var n=e.find(".id_pago").attr("data-id").trim();Payments.update(n)}}),$("#select-contract").on("change",function(t){t.stopImmediatePropagation(),Payments.getAll()}),makeRowsClickable()}function detailHandlers(){$("#btn-save-observations").on("click",function(t){t.stopImmediatePropagation(),Clients.saveObservations()}),$(".abono-value").on("click",function(t){t.stopImmediatePropagation(),Clients.saveObservations(!0)})}function acountHandlers(){var t=$("#acount-user-id"),e=$("#acount-current-password"),n=$("#update-user-data"),a=$("#acount-new-password");$("#acount-current-password").on("keyup",function(n){n.stopImmediatePropagation(),Users.confirmPassword(t.val(),e.val())}),n.on("click",function(n){n.preventDefault(),n.stopImmediatePropagation(),Users.updatePassword(t.val(),e.val(),a.val())})}function sectionHandlers(){ran||(Sections.getIps(),ran=!0),$("#btn-add-section").on("click",function(t){t.stopImmediatePropagation(),Sections.add()}),$("#select-sector").on("change",function(t){t.stopImmediatePropagation(),Sections.getIps()})}var currentPage=$("title").text().split(" ");currentPage=currentPage[4].toLowerCase().trim();var ran=!1;$(function(){initComponents()});