function fillBSTable(e,t){var i=$(e);i.bootstrapTable("destroy"),i.find("tbody").html(t),i.bootstrapTable(),$(".pull-right.search").addClass("hide"),i.find("tbody").css({display:"table-row-group"}),i.addClass("innertable")}function filterBSTable(e,t){$(e).bootstrapTable("filterBy",{estado:t})}function getForm(e){return"data="+JSON.stringify(e)}var extraSection=new Vue({el:"#extra-section",data:{content:"",filterValue:"",tableId:"#extra-table-full"},mounted:function(){"extras"==currentPage&&this.getData()},methods:{filter:function(e){filterBSTable(this.tableId,this.filterValue)},getData:function(){var e=this;axios.post(BASE_URL+"extra/get_all").then(function(t){e.fillTable(t.data.content)})},fillTable:function(e){fillBSTable("#extra-table-full",e)}}}),configMessage={email:"",password:"",device_id:"",country_code:"",send_at:"1 second",expires_at:"1 hour"},configMessagesForm=new Vue({el:"#message-settings-section",data:{config:configMessage},mounted:function(){this.getConfig()},methods:{confirmPhone:function(){},getConfig:function(){var e,t=this;(e=axios.get(BASE_URL+"messages/get_config")).then(function(e){e.data.config&&(t.config=e.data.config)}),e.catch(function(e){console.log(e)})},saveSettings:function(e){var t,i,a;t=this.config,i="data="+JSON.stringify(t),(a=axios.post(BASE_URL+"messages/save_config",i)).then(function(e){displayMessage(e.data.mensaje)}),a.catch(function(e){console.log(e)})}}}),sendMessageApp=new Vue({el:"#send-message-modal",data:{hide_clients:!0,hide_numbers:!0,message_data:{tipo:"",clientes:"",numeros:"",mensaje:""}},mounted:function(){this.initSelect2()},computed:{letters_count:function(){return this.message_data.mensaje.length}},methods:{sendMessage:function(){var e,t;isEmpty([this.message_data.tipo,this.message_data.mensaje])?swal("Campos Requeridos","Por favor selecciones el tipo de mensaje y escriba su mensaje"):(e="data="+JSON.stringify(this.message_data),(t=axios.post(BASE_URL+"messages/send_message",e)).then(function(e){displayMessage(e.data.mensaje)}),t.catch(function(e){console.log(e)}))},initSelect2:function(){var e={dropdownParent:$("#send-message-modal")},t=$("#message-type");t.select2(e);var i={clients:$("#clients-for-message").select2({dropdownParent:$("#send-message-modal"),ajax:{url:BASE_URL+"messages/search_clients",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0}}),messageType:t};this.selec2Liteners(i)},selec2Liteners:function(e){var t=this;e.messageType.on("select2:select",function(e){e.params.data.element.attributes;var i=e.params.data.id;t.message_data.tipo=i,"otros"==i?(t.hide_clients=!0,t.hide_numbers=!1):"personalizado"==i?(t.hide_numbers=!0,t.hide_clients=!1):(t.hide_clients=!0,t.hide_numbers=!0)}),e.messageType.select2("val","mora"),e.clients.on("select2:select",function(i){for(var a=e.clients.select2("data"),n=[],s=0;s<a.length;s++)n.push({nombre_completo:a[s].text,celular:a[s].id});t.message_data.clientes=n})}}}),paymentsReport=new Vue({el:"#recibos",data:{table:"",tableHTML:"",total:"",between:{first_date:"",second_date:"",text:""}},mounted:function(){"notificaciones"==currentPage&&this.getReport()},filters:{currencyFormat:function(e){return"RD$ "+CurrencyFormat(e)}},methods:{getReport:function(){var e=this,t="data="+JSON.stringify(this.between);axios.post(BASE_URL+"payment/get_receipts/",t).then(function(t){e.fillTable(t.data.content),e.total=t.data.acum})},fillTable:function(e){var t=$("#receipts-table");t.bootstrapTable("destroy"),t.find("tbody").html(e),t.bootstrapTable(),t.find("tbody").css({display:"table-row-group"})}}}),RetirementReport=new Vue({el:"#retiros",data:{table:"",tableHTML:"",between:{first_date:"",second_date:""}},mounted:function(){"notificaciones"==currentPage&&this.getReport()},methods:{getReport:function(){var e=this,t="data="+JSON.stringify(this.between);axios.post(BASE_URL+"contract/getCancelations/",t).then(function(t){e.fillTable(t.data.content)})},fillTable:function(e){var t=$("#cancelation-table");t.bootstrapTable("destroy"),t.find("tbody").html(e),t.bootstrapTable(),t.find("tbody").css({display:"table-row-group"})}}}),ticketListView=new Vue({el:"#averias-list-view",data:{dataSearch:{text:"",state:"por reparar"},tickets:[],hide:!1},mounted:function(){this.itemClickListener();var e=this;busAveria.$on("tickets-listed",function(){e.itemClickListener()})},methods:{search:function(){var e="data="+JSON.stringify(this.dataSearch),t=axios.post(BASE_URL+"api/averias/search",e);t.then(function(e){this.fillAveriasList(e.data)}),t.catch(function(){console.error(res.data.mensaje)})},fillAveriasList:function(e){$("#averia-item-list").html(e),ticketListView.itemClickListener()},itemClickListener:function(){$("#averias-list-view .averia-item").on("click",function(){var e=$(this).find(".code").text().trim();ticketView.getTicket(e)})}}}),emptyTicket={id_averia:"",id_cliente:"",cliente:"",direccion:"",descripcion:"",celular:"",fecha:"",estado:"",fecha_reparacion:"",tecnico:"",codigo:""},ticketView=new Vue({el:"#ticket-view",data:{classes:{hide:!0},mode:{newComment:!1,edit:!1},new_comment:"",comments:[],ticket:emptyTicket},created:function(){$("#ticket-view").removeClass("invisible")},methods:{getTicket:function(e){var t="data="+JSON.stringify({id_averia:e});axios.post(BASE_URL+"api/averias/get_averia",t).then(function(e){var t=e.data;ticketView.classes.hide=!1,ticketListView.hide=!0,ticketView.ticket=t.ticket,ticketView.comments=t.comments})},quit:function(){this.ticket=emptyTicket,this.comments=null,this.classes.hide=!0,this.closeCommentMode(),ticketListView.hide=!1},print:function(){print()},startComment:function(){this.mode.newComment=!0},addComment:function(){var e=getForm({id_averia:this.ticket.id_averia,descripcion:this.new_comment}),t=this;axios.post(BASE_URL+"api/averias/add_comment",e).then(function(e){t.getComments(),t.closeCommentMode(),displayMessage(e.data.mensaje)})},_deleteComment:function(e){var t=e.target.parentNode.parentNode,i=e.target.parentNode.attributes["data-id"].value,a=this;t.classList.add("to-delete"),swal({title:"EstÃ¡ Seguro?",text:"Seguro de que eliminar este reporte?",type:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(function(){a.deleteComment(i),t.classList.remove("to-delete")}).catch(function(){t.classList.remove("to-delete")})},deleteComment:function(e){var t=this,i=getForm({id_reporte:e});axios.post(BASE_URL+"api/averias/delete_comment",i).then(function(e){t.getComments(),displayMessage(e.data.mensaje)})},editComment:function(){},closeCommentMode:function(){this.mode.newComment=!1,this.new_comment=""},getComments:function(){var e=getForm({id_averia:this.ticket.id_averia}),t=this;axios.post(BASE_URL+"api/averias/get_comments",e).then(function(e){t.comments=e.data.comments})},updateDescription:function(){this.updateTicket(["id_averia","descripcion","tecnico","estado","fecha_reparacion"])},updateState:function(){"por reparar"==this.ticket.estado?this.ticket.fecha_reparacion="":this.ticket.fecha_reparacion=moment().format("YYYY-MM-DD")},updateTicket:function(e){this.closeEditMode();var t=getForm(this.getFields(e));axios.post(BASE_URL+"api/averias/update_averia",t).then(function(e){ticketListView.search(),displayMessage(e.data.mensaje)})},deleteTicket:function(){console.info("deleted")},closeEditMode:function(){this.mode.edit=!1},enterEditMode:function(){this.mode.edit=!0},getFields:function(e){var t={},i=this;return e.forEach(function(e){t[e]=i.ticket[e]},this),t}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV4dHJhU2VjdGlvbi5qcyIsIlRpY2tldHMuanMiLCJNZXNzYWdlcy5qcyIsIlBheW1lbnRzLmpzIiwiUmV0aXJlbWVudHMuanMiXSwibmFtZXMiOlsiZmlsbEJTVGFibGUiLCJ0YWJsZUlkIiwiY29udGVudCIsIiR0YWJsZSIsIiQiLCJib290c3RyYXBUYWJsZSIsImZpbmQiLCJodG1sIiwiYWRkQ2xhc3MiLCJjc3MiLCJkaXNwbGF5IiwiZmlsdGVyQlNUYWJsZSIsInN0YXRlIiwiZXN0YWRvIiwiZ2V0Rm9ybSIsIm9iamVjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJleHRyYVNlY3Rpb24iLCJWdWUiLCJlbCIsImRhdGEiLCJmaWx0ZXJWYWx1ZSIsIm1vdW50ZWQiLCJjdXJyZW50UGFnZSIsInRoaXMiLCJnZXREYXRhIiwibWV0aG9kcyIsImZpbHRlciIsImUiLCJzZWxmIiwiYXhpb3MiLCJwb3N0IiwiQkFTRV9VUkwiLCJ0aGVuIiwicmVzIiwiZmlsbFRhYmxlIiwiY29uZmlnTWVzc2FnZSIsImVtYWlsIiwicGFzc3dvcmQiLCJkZXZpY2VfaWQiLCJjb3VudHJ5X2NvZGUiLCJzZW5kX2F0IiwiZXhwaXJlc19hdCIsImNvbmZpZ01lc3NhZ2VzRm9ybSIsImNvbmZpZyIsImdldENvbmZpZyIsImNvbmZpcm1QaG9uZSIsInNlbmQiLCJnZXQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInNhdmVTZXR0aW5ncyIsImZvcm0iLCJkaXNwbGF5TWVzc2FnZSIsIm1lbnNhamUiLCJlcnIiLCJzZW5kTWVzc2FnZUFwcCIsImhpZGVfY2xpZW50cyIsImhpZGVfbnVtYmVycyIsIm1lc3NhZ2VfZGF0YSIsInRpcG8iLCJjbGllbnRlcyIsIm51bWVyb3MiLCJpbml0U2VsZWN0MiIsImNvbXB1dGVkIiwibGV0dGVyc19jb3VudCIsImxlbmd0aCIsInNlbmRNZXNzYWdlIiwiaXNFbXB0eSIsInN3YWwiLCJvcHRpb25zIiwiZHJvcGRvd25QYXJlbnQiLCJzZWxlY3RNZXNzYWdlVHlwZSIsInNlbGVjdDIiLCJzZWxlY3RzIiwiY2xpZW50cyIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRlbGF5IiwicGFyYW1zIiwicSIsInRlcm0iLCJwYWdlIiwicHJvY2Vzc1Jlc3VsdHMiLCJyZXN1bHRzIiwiaXRlbXMiLCJwYWdpbmF0aW9uIiwibW9yZSIsInRvdGFsX2NvdW50IiwiY2FjaGUiLCJtZXNzYWdlVHlwZSIsInNlbGVjMkxpdGVuZXJzIiwib24iLCJlbGVtZW50IiwiYXR0cmlidXRlcyIsImlkIiwiaSIsInB1c2giLCJub21icmVfY29tcGxldG8iLCJ0ZXh0IiwiY2VsdWxhciIsInBheW1lbnRzUmVwb3J0IiwidGFibGUiLCJ0YWJsZUhUTUwiLCJ0b3RhbCIsImJldHdlZW4iLCJmaXJzdF9kYXRlIiwic2Vjb25kX2RhdGUiLCJnZXRSZXBvcnQiLCJmaWx0ZXJzIiwiY3VycmVuY3lGb3JtYXQiLCJudW1iZXIiLCJDdXJyZW5jeUZvcm1hdCIsImFjdW0iLCJSZXRpcmVtZW50UmVwb3J0IiwidGlja2V0TGlzdFZpZXciLCJkYXRhU2VhcmNoIiwidGlja2V0cyIsImhpZGUiLCJpdGVtQ2xpY2tMaXN0ZW5lciIsImJ1c0F2ZXJpYSIsIiRvbiIsInNlYXJjaCIsImZpbGxBdmVyaWFzTGlzdCIsIiRjb250ZW50IiwiaWRfYXZlcmlhIiwidHJpbSIsInRpY2tldFZpZXciLCJnZXRUaWNrZXQiLCJlbXB0eVRpY2tldCIsImlkX2NsaWVudGUiLCJjbGllbnRlIiwiZGlyZWNjaW9uIiwiZGVzY3JpcGNpb24iLCJmZWNoYSIsImZlY2hhX3JlcGFyYWNpb24iLCJ0ZWNuaWNvIiwiY29kaWdvIiwiY2xhc3NlcyIsIm1vZGUiLCJuZXdDb21tZW50IiwiZWRpdCIsIm5ld19jb21tZW50IiwiY29tbWVudHMiLCJ0aWNrZXQiLCJjcmVhdGVkIiwicmVtb3ZlQ2xhc3MiLCJxdWl0IiwiY2xvc2VDb21tZW50TW9kZSIsInByaW50Iiwic3RhcnRDb21tZW50IiwiYWRkQ29tbWVudCIsImdldENvbW1lbnRzIiwiX2RlbGV0ZUNvbW1lbnQiLCJjb21tZW50SXRlbSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJpZENvbW1lbnQiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImFkZCIsInRpdGxlIiwidHlwZSIsInNob3dDYW5jZWxCdXR0b24iLCJjb25maXJtQnV0dG9uVGV4dCIsImNhbmNlbEJ1dHRvblRleHQiLCJkZWxldGVDb21tZW50IiwicmVtb3ZlIiwiaWRfcmVwb3J0ZSIsImVkaXRDb21tZW50IiwidXBkYXRlRGVzY3JpcHRpb24iLCJ1cGRhdGVUaWNrZXQiLCJ1cGRhdGVTdGF0ZSIsIm1vbWVudCIsImZvcm1hdCIsImZpZWxkcyIsImNsb3NlRWRpdE1vZGUiLCJnZXRGaWVsZHMiLCJkZWxldGVUaWNrZXQiLCJpbmZvIiwiZW50ZXJFZGl0TW9kZSIsInNlbGVjdGVkRmllbGRzIiwiZm9yRWFjaCIsImZpZWxkIl0sIm1hcHBpbmdzIjoiQUErQkEsU0FBQUEsWUFBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBQyxFQUFBSCxHQUNBRSxFQUFBRSxlQUFBLFdBQ0FGLEVBQUFHLEtBQUEsU0FBQUMsS0FBQUwsR0FDQUMsRUFBQUUsaUJBQ0FELEVBQUEsc0JBQUFJLFNBQUEsUUFDQUwsRUFBQUcsS0FBQSxTQUFBRyxLQUFBQyxRQUFBLG9CQUNBUCxFQUFBSyxTQUFBLGNBSUEsU0FBQUcsY0FBQVYsRUFBQVcsR0FDQVIsRUFBQUgsR0FBQUksZUFBQSxZQUNBUSxPQUFBRCxJQ29MQSxTQUFBRSxRQUFBQyxHQUNBLE1BQUEsUUFBQUMsS0FBQUMsVUFBQUYsR0RqT0EsSUFBQUcsYUFBQSxJQUFBQyxLQUNBQyxHQUFBLGlCQUNBQyxNQUNBbkIsUUFBQSxHQUNBb0IsWUFBQSxHQUNBckIsUUFBQSxxQkFFQXNCLFFBQUEsV0FDQSxVQUFBQyxhQUNBQyxLQUFBQyxXQUdBQyxTQUNBQyxPQUFBLFNBQUFDLEdBQ0FsQixjQUFBYyxLQUFBeEIsUUFBQXdCLEtBQUFILGNBR0FJLFFBQUEsV0FDQSxJQUFBSSxFQUFBTCxL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LGVBQUFPLFNBQ0F0RSxlQUFBckIsRUFBQWQsS0FBQW9DLFlBSUE2SCxhQUFBLFdBQ0FsSSxRQUFBbUksS0FBQSxZQUdBSCxjQUFBLFdBQ0EzSixLQUFBc0gsS0FBQUUsTUFBQSxHQUdBdUMsY0FBQSxXQUNBL0osS0FBQXNILEtBQUFFLE1BQUEsR0FHQW9DLFVBQUEsU0FBQUYsR0FDQSxJQUFBTSxLQUNBM0osRUFBQUwsS0FLQSxPQUpBMEosRUFBQU8sUUFBQSxTQUFBQyxHQUNBRixFQUFBRSxHQUFBN0osRUFBQXNILE9BQUF1QyxJQUNBbEssTUFFQWdLIiwiZmlsZSI6ImNvbXBvbmVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXh0cmFTZWN0aW9uID0gbmV3IFZ1ZSh7XHJcbiAgZWw6ICcjZXh0cmEtc2VjdGlvbicsXHJcbiAgZGF0YToge1xyXG4gICAgY29udGVudDogJycsXHJcbiAgICBmaWx0ZXJWYWx1ZTogJycsXHJcbiAgICB0YWJsZUlkOiAnI2V4dHJhLXRhYmxlLWZ1bGwnXHJcbiAgfSxcclxuICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoY3VycmVudFBhZ2UgPT0gJ2V4dHJhcycpIHtcclxuICAgICAgdGhpcy5nZXREYXRhKCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBtZXRob2RzOiB7XHJcbiAgICBmaWx0ZXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZmlsdGVyQlNUYWJsZSh0aGlzLnRhYmxlSWQsdGhpcy5maWx0ZXJWYWx1ZSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBnZXREYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgYXhpb3MucG9zdChCQVNFX1VSTCArICdleHRyYS9nZXRfYWxsJylcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIHNlbGYuZmlsbFRhYmxlKHJlcy5kYXRhLmNvbnRlbnQpO1xyXG4gICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICBmaWxsVGFibGU6IGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgIGZpbGxCU1RhYmxlKCcjZXh0cmEtdGFibGUtZnVsbCcsIGNvbnRlbnQpXHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGZpbGxCU1RhYmxlKHRhYmxlSWQsIGNvbnRlbnQpIHtcclxuICB2YXIgJHRhYmxlID0gJCh0YWJsZUlkKTtcclxuICAkdGFibGUuYm9vdHN0cmFwVGFibGUoJ2Rlc3Ryb3knKTtcclxuICAkdGFibGUuZmluZCgndGJvZHknKS5odG1sKGNvbnRlbnQpO1xyXG4gICR0YWJsZS5ib290c3RyYXBUYWJsZSgpO1xyXG4gICQoJy5wdWxsLXJpZ2h0LnNlYXJjaCcpLmFkZENsYXNzKCdoaWRlJylcclxuICAkdGFibGUuZmluZCgndGJvZHknKS5jc3Moe2Rpc3BsYXk6XCJ0YWJsZS1yb3ctZ3JvdXBcIn0pO1xyXG4gICR0YWJsZS5hZGRDbGFzcygnaW5uZXJ0YWJsZScpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZmlsdGVyQlNUYWJsZSh0YWJsZUlkLHN0YXRlKSB7XHJcbiAgJCh0YWJsZUlkKS5ib290c3RyYXBUYWJsZSgnZmlsdGVyQnknLHtcclxuICAgIGVzdGFkbzogc3RhdGVcclxuICB9KTtcclxufVxyXG4iLCIgIHZhciB0aWNrZXRMaXN0VmlldyA9IG5ldyBWdWUoe1xyXG4gICAgZWw6ICcjYXZlcmlhcy1saXN0LXZpZXcnLFxyXG4gICAgZGF0YToge1xyXG4gICAgICBkYXRhU2VhcmNoOiB7XHJcbiAgICAgICAgdGV4dDogJycsXHJcbiAgICAgICAgc3RhdGU6ICdwb3IgcmVwYXJhcicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpY2tldHM6IFtdLFxyXG4gICAgICBoaWRlOiBmYWxzZVxyXG4gICAgfSxcclxuXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuaXRlbUNsaWNrTGlzdGVuZXIoKTtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICAgIGJ1c0F2ZXJpYS4kb24oJ3RpY2tldHMtbGlzdGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaXRlbUNsaWNrTGlzdGVuZXIoKVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICBzZWFyY2g6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9ybSA9ICdkYXRhPScgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGFTZWFyY2gpO1xyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9zZWFyY2gnLCBmb3JtKTtcclxuXHJcbiAgICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHRoaXMuZmlsbEF2ZXJpYXNMaXN0KHJlcy5kYXRhKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBzZW5kLmNhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVzLmRhdGEubWVuc2FqZSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBmaWxsQXZlcmlhc0xpc3Q6IGZ1bmN0aW9uICgkY29udGVudCkge1xyXG4gICAgICAgICQoJyNhdmVyaWEtaXRlbS1saXN0JykuaHRtbCgkY29udGVudCk7XHJcbiAgICAgICAgdGlja2V0TGlzdFZpZXcuaXRlbUNsaWNrTGlzdGVuZXIoKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGl0ZW1DbGlja0xpc3RlbmVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnI2F2ZXJpYXMtbGlzdC12aWV3IC5hdmVyaWEtaXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHZhciBpZF9hdmVyaWEgPSAkKHRoaXMpLmZpbmQoJy5jb2RlJykudGV4dCgpLnRyaW0oKTtcclxuICAgICAgICAgIHRpY2tldFZpZXcuZ2V0VGlja2V0KGlkX2F2ZXJpYSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB2YXIgZW1wdHlUaWNrZXQgPSB7XHJcbiAgICBcImlkX2F2ZXJpYVwiOiBcIlwiLFxyXG4gICAgXCJpZF9jbGllbnRlXCI6IFwiXCIsXHJcbiAgICBcImNsaWVudGVcIjogXCJcIixcclxuICAgIFwiZGlyZWNjaW9uXCI6IFwiXCIsXHJcbiAgICBcImRlc2NyaXBjaW9uXCI6IFwiXCIsXHJcbiAgICBcImNlbHVsYXJcIjogXCJcIixcclxuICAgIFwiZmVjaGFcIjogXCJcIixcclxuICAgIFwiZXN0YWRvXCI6IFwiXCIsXHJcbiAgICBcImZlY2hhX3JlcGFyYWNpb25cIjogXCJcIixcclxuICAgIFwidGVjbmljb1wiOiBcIlwiLFxyXG4gICAgXCJjb2RpZ29cIjogJycsXHJcbiAgfVxyXG4gIFxyXG4gIHZhciB0aWNrZXRWaWV3ID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyN0aWNrZXQtdmlldycsXHJcbiAgICBcclxuICAgIGRhdGE6IHtcclxuICAgICAgY2xhc3Nlczoge1xyXG4gICAgICAgIGhpZGU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbW9kZToge1xyXG4gICAgICAgIG5ld0NvbW1lbnQ6IGZhbHNlLFxyXG4gICAgICAgIGVkaXQ6IGZhbHNlLFxyXG4gICAgICB9LFxyXG4gICAgICBuZXdfY29tbWVudDogJycsXHJcbiAgICAgIGNvbW1lbnRzOiBbXSxcclxuICAgICAgdGlja2V0OiBlbXB0eVRpY2tldFxyXG4gICAgfSxcclxuICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgJCgnI3RpY2tldC12aWV3JykucmVtb3ZlQ2xhc3MoJ2ludmlzaWJsZScpXHJcbiAgICB9LFxyXG5cclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgZ2V0VGlja2V0OiBmdW5jdGlvbiAoaWRfYXZlcmlhKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSAnZGF0YT0nICsgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgaWRfYXZlcmlhOiBpZF9hdmVyaWFcclxuICAgICAgICB9KVxyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9nZXRfYXZlcmlhJywgZm9ybSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICB0aWNrZXRWaWV3LmNsYXNzZXMuaGlkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGlja2V0TGlzdFZpZXcuaGlkZSA9IHRydWU7XHJcbiAgICAgICAgICB0aWNrZXRWaWV3LnRpY2tldCA9IGRhdGEudGlja2V0O1xyXG4gICAgICAgICAgdGlja2V0Vmlldy5jb21tZW50cyA9IGRhdGEuY29tbWVudHM7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHF1aXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRpY2tldCA9IGVtcHR5VGlja2V0O1xyXG4gICAgICAgIHRoaXMuY29tbWVudHMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xhc3Nlcy5oaWRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNsb3NlQ29tbWVudE1vZGUoKTtcclxuICAgICAgICB0aWNrZXRMaXN0Vmlldy5oaWRlID0gZmFsc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBwcmludDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHByaW50KCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzdGFydENvbW1lbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1vZGUubmV3Q29tbWVudCA9IHRydWU7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBhZGRDb21tZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSBnZXRGb3JtKHtpZF9hdmVyaWE6IHRoaXMudGlja2V0LmlkX2F2ZXJpYSwgZGVzY3JpcGNpb246IHRoaXMubmV3X2NvbW1lbnR9KTtcclxuICAgICAgICB2YXIgc2VuZCA9IGF4aW9zLnBvc3QoQkFTRV9VUkwgKyAnYXBpL2F2ZXJpYXMvYWRkX2NvbW1lbnQnLGZvcm0pO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZW5kLnRoZW4oIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHNlbGYuZ2V0Q29tbWVudHMoKTtcclxuICAgICAgICAgIHNlbGYuY2xvc2VDb21tZW50TW9kZSgpXHJcbiAgICAgICAgICBkaXNwbGF5TWVzc2FnZShyZXMuZGF0YS5tZW5zYWplKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIF9kZWxldGVDb21tZW50OiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBjb21tZW50SXRlbSA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZVxyXG4gICAgICAgIHZhciBpZENvbW1lbnQgPSBlLnRhcmdldC5wYXJlbnROb2RlLmF0dHJpYnV0ZXNbJ2RhdGEtaWQnXS52YWx1ZVxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBjb21tZW50SXRlbS5jbGFzc0xpc3QuYWRkKCd0by1kZWxldGUnKTtcclxuXHJcbiAgICAgICAgc3dhbCh7XHJcbiAgICAgICAgICB0aXRsZTogJ0VzdMOhIFNlZ3Vybz8nLFxyXG4gICAgICAgICAgdGV4dDogXCJTZWd1cm8gZGUgcXVlIGVsaW1pbmFyIGVzdGUgcmVwb3J0ZT9cIixcclxuICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcclxuICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXHJcbiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0VsaW1pbmFyJyxcclxuICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWxhcidcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBzZWxmLmRlbGV0ZUNvbW1lbnQoaWRDb21tZW50KTtcclxuICAgICAgICAgIGNvbW1lbnRJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3RvLWRlbGV0ZScpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY29tbWVudEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgndG8tZGVsZXRlJylcclxuICAgICAgICB9KVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZGVsZXRlQ29tbWVudDogZnVuY3Rpb24gKGlkQ29tbWVudCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBmb3JtID0gZ2V0Rm9ybSh7IGlkX3JlcG9ydGU6IGlkQ29tbWVudH0pO1xyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9kZWxldGVfY29tbWVudCcsZm9ybSk7XHJcblxyXG4gICAgICAgIHNlbmQudGhlbiggZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgc2VsZi5nZXRDb21tZW50cygpO1xyXG4gICAgICAgICAgZGlzcGxheU1lc3NhZ2UocmVzLmRhdGEubWVuc2FqZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBlZGl0Q29tbWVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIGNsb3NlQ29tbWVudE1vZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1vZGUubmV3Q29tbWVudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV3X2NvbW1lbnQgPSAnJztcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldENvbW1lbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSBnZXRGb3JtKHtpZF9hdmVyaWE6IHRoaXMudGlja2V0LmlkX2F2ZXJpYX0pO1xyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9nZXRfY29tbWVudHMnLGZvcm0pO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgICAgIHNlbmQudGhlbiggZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgc2VsZi5jb21tZW50cyA9IHJlcy5kYXRhLmNvbW1lbnRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXBkYXRlRGVzY3JpcHRpb246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRpY2tldChbJ2lkX2F2ZXJpYScsJ2Rlc2NyaXBjaW9uJywndGVjbmljbycsJ2VzdGFkbycsJ2ZlY2hhX3JlcGFyYWNpb24nXSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1cGRhdGVTdGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRpY2tldC5lc3RhZG8gPT0gJ3BvciByZXBhcmFyJykge1xyXG4gICAgICAgICAgdGhpcy50aWNrZXQuZmVjaGFfcmVwYXJhY2lvbiA9ICcnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudGlja2V0LmZlY2hhX3JlcGFyYWNpb24gPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1cGRhdGVUaWNrZXQ6IGZ1bmN0aW9uIChmaWVsZHMpIHtcclxuICAgICAgICB0aGlzLmNsb3NlRWRpdE1vZGUoKTtcclxuICAgICAgICB2YXIgZm9ybSA9IGdldEZvcm0odGhpcy5nZXRGaWVsZHMoZmllbGRzKSk7XHJcbiAgICAgICAgdmFyIHNlbmQgPSBheGlvcy5wb3N0KEJBU0VfVVJMICsgJ2FwaS9hdmVyaWFzL3VwZGF0ZV9hdmVyaWEnLGZvcm0pO1xyXG5cclxuICAgICAgICBzZW5kLnRoZW4oIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHRpY2tldExpc3RWaWV3LnNlYXJjaCgpO1xyXG4gICAgICAgICAgZGlzcGxheU1lc3NhZ2UocmVzLmRhdGEubWVuc2FqZSlcclxuICAgICAgICB9KVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZGVsZXRlVGlja2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdkZWxldGVkJyk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjbG9zZUVkaXRNb2RlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tb2RlLmVkaXQgPSBmYWxzZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVudGVyRWRpdE1vZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1vZGUuZWRpdCA9IHRydWU7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRGaWVsZHM6IGZ1bmN0aW9uIChmaWVsZHMpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWRGaWVsZHMgPSB7fTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHtcclxuICAgICAgICAgIHNlbGVjdGVkRmllbGRzW2ZpZWxkXSA9IHNlbGYudGlja2V0W2ZpZWxkXVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRGaWVsZHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgZnVuY3Rpb24gZ2V0Rm9ybShvYmplY3Qpe1xyXG4gICAgcmV0dXJuIFwiZGF0YT1cIiArIEpTT04uc3RyaW5naWZ5KG9iamVjdCk7XHJcbiAgfVxyXG4iLCJcclxudmFyIGNvbmZpZ01lc3NhZ2UgPSB7XHJcbiAgZW1haWw6ICcnLFxyXG4gIHBhc3N3b3JkOiAnJyxcclxuICBkZXZpY2VfaWQ6ICcnLFxyXG4gIGNvdW50cnlfY29kZTogJycsXHJcbiAgc2VuZF9hdDogJzEgc2Vjb25kJyxcclxuICBleHBpcmVzX2F0OiAnMSBob3VyJ1xyXG59XHJcblxyXG52YXIgY29uZmlnTWVzc2FnZXNGb3JtID0gbmV3IFZ1ZSh7XHJcbiAgZWw6ICcjbWVzc2FnZS1zZXR0aW5ncy1zZWN0aW9uJyxcclxuICBkYXRhOiB7XHJcbiAgICBjb25maWc6IGNvbmZpZ01lc3NhZ2VcclxuICB9LFxyXG4gIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2V0Q29uZmlnKClcclxuICB9LFxyXG5cclxuICBtZXRob2RzOiB7XHJcbiAgICBjb25maXJtUGhvbmU6IGZ1bmN0aW9uICgpIHt9LFxyXG5cclxuICAgIGdldENvbmZpZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VuZFxyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHNlbmQgPSBheGlvcy5nZXQoQkFTRV9VUkwgKyAnbWVzc2FnZXMvZ2V0X2NvbmZpZycpXHJcbiAgICAgIHNlbmQudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgaWYocmVzLmRhdGEuY29uZmlnKXtcclxuICAgICAgICAgIHNlbGYuY29uZmlnID0gcmVzLmRhdGEuY29uZmlnXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICBzZW5kLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICBzYXZlU2V0dGluZ3M6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgIHZhciBjb25maWcsIGZvcm0sIHNlbmRcclxuICAgICAgY29uZmlnID0gdGhpcy5jb25maWdcclxuXHJcbiAgICAgIGZvcm0gPSAnZGF0YT0nICsgSlNPTi5zdHJpbmdpZnkoY29uZmlnKVxyXG4gICAgICBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdtZXNzYWdlcy9zYXZlX2NvbmZpZycsIGZvcm0pXHJcbiAgICAgIHNlbmQudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgZGlzcGxheU1lc3NhZ2UocmVzLmRhdGEubWVuc2FqZSlcclxuICAgICAgfSlcclxuICAgICAgc2VuZC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufSlcclxuXHJcbnZhciBzZW5kTWVzc2FnZUFwcCA9IG5ldyBWdWUoe1xyXG4gIGVsOiAnI3NlbmQtbWVzc2FnZS1tb2RhbCcsXHJcblxyXG4gIGRhdGE6IHtcclxuICAgIGhpZGVfY2xpZW50czogdHJ1ZSxcclxuICAgIGhpZGVfbnVtYmVyczogdHJ1ZSxcclxuXHJcbiAgICBtZXNzYWdlX2RhdGE6IHtcclxuICAgICAgdGlwbzogJycsXHJcbiAgICAgIGNsaWVudGVzOiAnJyxcclxuICAgICAgbnVtZXJvczogJycsXHJcbiAgICAgIG1lbnNhamU6ICcnXHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pbml0U2VsZWN0MigpXHJcbiAgfSxcclxuXHJcbiAgY29tcHV0ZWQ6IHtcclxuICAgIGxldHRlcnNfY291bnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZV9kYXRhLm1lbnNhamUubGVuZ3RoXHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgbWV0aG9kczoge1xyXG4gICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIGZvcm0sIHNlbmRcclxuXHJcbiAgICAgIGlmICghaXNFbXB0eShbdGhpcy5tZXNzYWdlX2RhdGEudGlwbywgdGhpcy5tZXNzYWdlX2RhdGEubWVuc2FqZV0pKSB7XHJcbiAgICAgICAgZm9ybSA9ICdkYXRhPScgKyBKU09OLnN0cmluZ2lmeSh0aGlzLm1lc3NhZ2VfZGF0YSlcclxuICAgICAgICBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdtZXNzYWdlcy9zZW5kX21lc3NhZ2UnLCBmb3JtKVxyXG4gICAgICAgIHNlbmQudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICBkaXNwbGF5TWVzc2FnZShyZXMuZGF0YS5tZW5zYWplKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgc2VuZC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3dhbCgnQ2FtcG9zIFJlcXVlcmlkb3MnLCAnUG9yIGZhdm9yIHNlbGVjY2lvbmVzIGVsIHRpcG8gZGUgbWVuc2FqZSB5IGVzY3JpYmEgc3UgbWVuc2FqZScpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaW5pdFNlbGVjdDI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgIGRyb3Bkb3duUGFyZW50OiAkKCcjc2VuZC1tZXNzYWdlLW1vZGFsJylcclxuICAgICAgfVxyXG5cclxuICAgICAgdmFyIHNlbGVjdE1lc3NhZ2VUeXBlID0gJCgnI21lc3NhZ2UtdHlwZScpXHJcbiAgICAgIHNlbGVjdE1lc3NhZ2VUeXBlLnNlbGVjdDIob3B0aW9ucylcclxuICAgICAgdmFyIHNlbGVjdENsaWVudHNGb3JNZXNzYWdlID0gJCgnI2NsaWVudHMtZm9yLW1lc3NhZ2UnKS5zZWxlY3QyKHtcclxuICAgICAgICBkcm9wZG93blBhcmVudDogJCgnI3NlbmQtbWVzc2FnZS1tb2RhbCcpLFxyXG4gICAgICAgIGFqYXg6IHtcclxuICAgICAgICAgIHVybDogQkFTRV9VUkwgKyAnbWVzc2FnZXMvc2VhcmNoX2NsaWVudHMnLFxyXG4gICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgIGRlbGF5OiAyNTAsXHJcbiAgICAgICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgcTogcGFyYW1zLnRlcm0sXHJcbiAgICAgICAgICAgICAgcGFnZTogcGFyYW1zLnBhZ2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICBwcm9jZXNzUmVzdWx0czogZnVuY3Rpb24gKGRhdGEsIHBhcmFtcykge1xyXG4gICAgICAgICAgICBwYXJhbXMucGFnZSA9IHBhcmFtcy5wYWdlIHx8IDFcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICByZXN1bHRzOiBkYXRhLml0ZW1zLFxyXG4gICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgICAgIG1vcmU6IChwYXJhbXMucGFnZSAqIDMwKSA8IGRhdGEudG90YWxfY291bnRcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjYWNoZTogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIHZhciBzZWxlY3RzID0ge1xyXG4gICAgICAgIGNsaWVudHM6IHNlbGVjdENsaWVudHNGb3JNZXNzYWdlLFxyXG4gICAgICAgIG1lc3NhZ2VUeXBlOiBzZWxlY3RNZXNzYWdlVHlwZVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2VsZWMyTGl0ZW5lcnMoc2VsZWN0cylcclxuICAgIH0sXHJcblxyXG4gICAgc2VsZWMyTGl0ZW5lcnM6IGZ1bmN0aW9uIChzZWxlY3RzKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgICBzZWxlY3RzLm1lc3NhZ2VUeXBlLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdCA9IGUucGFyYW1zLmRhdGEuZWxlbWVudFxyXG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gc2VsZWN0LmF0dHJpYnV0ZXNcclxuICAgICAgICB2YXIgdGlwbyA9IGUucGFyYW1zLmRhdGEuaWRcclxuICAgICAgICBzZWxmLm1lc3NhZ2VfZGF0YS50aXBvID0gdGlwb1xyXG5cclxuICAgICAgICBpZiAodGlwbyA9PSAnb3Ryb3MnKSB7XHJcbiAgICAgICAgICBzZWxmLmhpZGVfY2xpZW50cyA9IHRydWVcclxuICAgICAgICAgIHNlbGYuaGlkZV9udW1iZXJzID0gZmFsc2VcclxuICAgICAgICB9IGVsc2UgaWYgKHRpcG8gPT0gJ3BlcnNvbmFsaXphZG8nKSB7XHJcbiAgICAgICAgICBzZWxmLmhpZGVfbnVtYmVycyA9IHRydWVcclxuICAgICAgICAgIHNlbGYuaGlkZV9jbGllbnRzID0gZmFsc2VcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2VsZi5oaWRlX2NsaWVudHMgPSB0cnVlXHJcbiAgICAgICAgICBzZWxmLmhpZGVfbnVtYmVycyA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBzZWxlY3RzLm1lc3NhZ2VUeXBlLnNlbGVjdDIoJ3ZhbCcsJ21vcmEnKTtcclxuXHJcbiAgICAgIHNlbGVjdHMuY2xpZW50cy5vbignc2VsZWN0MjpzZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBjbGllbnRlcyA9IHNlbGVjdHMuY2xpZW50cy5zZWxlY3QyKCdkYXRhJylcclxuICAgICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsaWVudGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgJ25vbWJyZV9jb21wbGV0byc6IGNsaWVudGVzW2ldLnRleHQsXHJcbiAgICAgICAgICAgICdjZWx1bGFyJzogY2xpZW50ZXNbaV0uaWRcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYubWVzc2FnZV9kYXRhLmNsaWVudGVzID0gaXRlbXNcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn0pIiwidmFyIHBheW1lbnRzUmVwb3J0ID0gbmV3IFZ1ZSh7XHJcbiAgZWw6ICcjcmVjaWJvcycsXHJcbiAgZGF0YToge1xyXG4gICB0YWJsZTogJycsXHJcbiAgIHRhYmxlSFRNTDogJycsXHJcbiAgIHRvdGFsOiAnJyxcclxuICAgYmV0d2Vlbjoge1xyXG4gICAgIGZpcnN0X2RhdGU6ICcnLFxyXG4gICAgIHNlY29uZF9kYXRlOiAnJyxcclxuICAgICB0ZXh0OiAnJ1xyXG4gICB9XHJcbiAgfSxcclxuICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoY3VycmVudFBhZ2UgPT0gJ25vdGlmaWNhY2lvbmVzJykge1xyXG4gICAgICB0aGlzLmdldFJlcG9ydCgpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZmlsdGVyczoge1xyXG4gICAgY3VycmVuY3lGb3JtYXQ6IGZ1bmN0aW9uKG51bWJlcil7XHJcbiAgICAgIHJldHVybiBcIlJEJCBcIisgQ3VycmVuY3lGb3JtYXQobnVtYmVyKTtcclxuICAgIH0sXHJcbiAgfSxcclxuXHJcbiAgbWV0aG9kczoge1xyXG4gICAgZ2V0UmVwb3J0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgdmFyIGZvcm0gPSAnZGF0YT0nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5iZXR3ZWVuKVxyXG4gICAgICBheGlvcy5wb3N0KEJBU0VfVVJMICsgJ3BheW1lbnQvZ2V0X3JlY2VpcHRzLycsIGZvcm0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICBzZWxmLmZpbGxUYWJsZShyZXMuZGF0YS5jb250ZW50KVxyXG4gICAgICAgIHNlbGYudG90YWwgPSByZXMuZGF0YS5hY3VtO1xyXG4gICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICBmaWxsVGFibGU6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuICAgICAgdmFyICR0YWJsZSA9ICQoJyNyZWNlaXB0cy10YWJsZScpXHJcbiAgICAgICR0YWJsZS5ib290c3RyYXBUYWJsZSgnZGVzdHJveScpO1xyXG4gICAgICAkdGFibGUuZmluZCgndGJvZHknKS5odG1sKGNvbnRlbnQpO1xyXG4gICAgICAkdGFibGUuYm9vdHN0cmFwVGFibGUoKTtcclxuICAgICAgJHRhYmxlLmZpbmQoJ3Rib2R5JykuY3NzKHtkaXNwbGF5OlwidGFibGUtcm93LWdyb3VwXCJ9KTtcclxuICAgIH1cclxuICB9XHJcbn0pIiwidmFyIFJldGlyZW1lbnRSZXBvcnQgPSBuZXcgVnVlKHtcclxuICBlbDogJyNyZXRpcm9zJyxcclxuICBkYXRhOiB7XHJcbiAgIHRhYmxlOiAnJyxcclxuICAgdGFibGVIVE1MOiAnJyxcclxuICAgYmV0d2Vlbjoge1xyXG4gICAgIGZpcnN0X2RhdGU6ICcnLFxyXG4gICAgIHNlY29uZF9kYXRlOiAnJ1xyXG4gICB9XHJcbiAgfSxcclxuICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoY3VycmVudFBhZ2UgPT0gJ25vdGlmaWNhY2lvbmVzJykge1xyXG4gICAgICB0aGlzLmdldFJlcG9ydCgpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIGdldFJlcG9ydDogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgIHZhciBmb3JtID0gJ2RhdGE9JyArIEpTT04uc3RyaW5naWZ5KHRoaXMuYmV0d2VlbilcclxuICAgICAgYXhpb3MucG9zdChCQVNFX1VSTCArICdjb250cmFjdC9nZXRDYW5jZWxhdGlvbnMvJywgZm9ybSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIHNlbGYuZmlsbFRhYmxlKHJlcy5kYXRhLmNvbnRlbnQpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG5cclxuICAgIGZpbGxUYWJsZTogZnVuY3Rpb24oY29udGVudCkge1xyXG4gICAgICB2YXIgJHRhYmxlID0gJCgnI2NhbmNlbGF0aW9uLXRhYmxlJylcclxuICAgICAgJHRhYmxlLmJvb3RzdHJhcFRhYmxlKCdkZXN0cm95Jyk7XHJcbiAgICAgICR0YWJsZS5maW5kKCd0Ym9keScpLmh0bWwoY29udGVudCk7XHJcbiAgICAgICR0YWJsZS5ib290c3RyYXBUYWJsZSgpO1xyXG4gICAgICAkdGFibGUuZmluZCgndGJvZHknKS5jc3Moe2Rpc3BsYXk6XCJ0YWJsZS1yb3ctZ3JvdXBcIn0pO1xyXG4gICAgfVxyXG4gIH1cclxufSkiXX0=
