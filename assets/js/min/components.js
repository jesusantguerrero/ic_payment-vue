var configMessage={email:"",password:"",device_id:"",country_code:"",send_at:"1 second",expires_at:"1 hour"},configMessagesForm=new Vue({el:"#message-settings-section",data:{config:configMessage},mounted:function(){this.getConfig()},methods:{confirmPhone:function(){},getConfig:function(){var e,t=this;(e=axios.get(BASE_URL+"messages/get_config")).then(function(e){e.data.config&&(t.config=e.data.config)}),e.catch(function(e){console.log(e)})},saveSettings:function(e){var t,s,i;t=this.config,s="data="+JSON.stringify(t),(i=axios.post(BASE_URL+"messages/save_config",s)).then(function(e){displayMessage(e.data.mensaje)}),i.catch(function(e){console.log(e)})}}}),sendMessageApp=new Vue({el:"#send-message-modal",data:{hide_clients:!0,hide_numbers:!0,message_data:{tipo:"",clientes:"",numeros:"",mensaje:""}},mounted:function(){this.initSelect2()},computed:{letters_count:function(){return this.message_data.mensaje.length}},methods:{sendMessage:function(){var e,t;isEmpty([this.message_data.tipo,this.message_data.mensaje])?swal("Campos Requeridos","Por favor selecciones el tipo de mensaje y escriba su mensaje"):(e="data="+JSON.stringify(this.message_data),(t=axios.post(BASE_URL+"messages/send_message",e)).then(function(e){displayMessage(e.data.mensaje)}),t.catch(function(e){console.log(e)}))},initSelect2:function(){var e={dropdownParent:$("#send-message-modal")},t=$("#message-type");t.select2(e);var s={clients:$("#clients-for-message").select2({dropdownParent:$("#send-message-modal"),ajax:{url:BASE_URL+"messages/search_clients",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0}}),messageType:t};this.selec2Liteners(s)},selec2Liteners:function(e){var t=this;e.messageType.on("select2:select",function(e){e.params.data.element.attributes;var s=e.params.data.id;t.message_data.tipo=s,"otros"==s?(t.hide_clients=!0,t.hide_numbers=!1):"personalizado"==s?(t.hide_numbers=!0,t.hide_clients=!1):(t.hide_clients=!0,t.hide_numbers=!0)}),e.messageType.select2("val","mora"),e.clients.on("select2:select",function(s){for(var i=e.clients.select2("data"),n=[],a=0;a<i.length;a++)n.push({nombre_completo:i[a].text,celular:i[a].id});t.message_data.clientes=n})}}});$(function(){var e=new Vue({el:"#averias-list-view",data:{dataSearch:{text:"",state:"por reparar"},tickets:[],hide:!1},mounted:function(){this.itemClickListener();var e=this;busAveria.$on("tickets-listed",function(){e.itemClickListener()})},methods:{search:function(){var e="data="+JSON.stringify(this.dataSearch),t=axios.post(BASE_URL+"api/averias/search",e);t.then(function(e){this.fillAveriasList(e.data)}),t.catch(function(){console.error(res.data.mensaje)})},fillAveriasList:function(t){$("#averia-item-list").html(t),e.itemClickListener()},itemClickListener:function(){$(".averia-item").on("click",function(){var e=$(this).find(".code").text().trim();s.getTicket(e)})}}}),t={id_averia:"",id_cliente:"",cliente:"",direccion:"",descripcion:"",celular:"",fecha:"",estado:"",fecha_reparacion:"",codigo:""},s=new Vue({el:"#ticket-view",data:{classes:{hide:!0},comments:[],ticket:t},mounted:function(){},methods:{getTicket:function(t){var i="data="+JSON.stringify({id_averia:t});axios.post(BASE_URL+"api/averias/get_averia",i).then(function(t){var i=t.data;$("#ticket-view").removeClass("invisible"),s.classes.hide=!1,e.hide=!0,s.ticket=i.ticket,s.comments=i.comments})},quit:function(){this.ticket=null,this.comments=null,this.hide=!0,e.hide=!1},print:function(){print()},addComment:function(){},deleteComment:function(){},editComment:function(){},editTicket:function(){},deleteTicket:function(){console.info("deleted")}}})})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1lc3NhZ2VzLmpzIiwiVGlja2V0cy5qcyJdLCJuYW1lcyI6WyJjb25maWdNZXNzYWdlIiwiZW1haWwiLCJwYXNzd29yZCIsImRldmljZV9pZCIsImNvdW50cnlfY29kZSIsInNlbmRfYXQiLCJleHBpcmVzX2F0IiwiY29uZmlnTWVzc2FnZXNGb3JtIiwiVnVlIiwiZWwiLCJkYXRhIiwiY29uZmlnIiwibW91bnRlZCIsInRoaXMiLCJnZXRDb25maWciLCJtZXRob2RzIiwiY29uZmlybVBob25lIiwic2VuZCIsInNlbGYiLCJheGlvcyIsImdldCIsIkJBU0VfVVJMIiwidGhlbiIsInJlcyIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2F2ZVNldHRpbmdzIiwiZSIsImZvcm0iLCJKU09OIiwic3RyaW5naWZ5IiwicG9zdCIsImRpc3BsYXlNZXNzYWdlIiwibWVuc2FqZSIsImVyciIsInNlbmRNZXNzYWdlQXBwIiwiaGlkZV9jbGllbnRzIiwiaGlkZV9udW1iZXJzIiwibWVzc2FnZV9kYXRhIiwidGlwbyIsImNsaWVudGVzIiwibnVtZXJvcyIsImluaXRTZWxlY3QyIiwiY29tcHV0ZWQiLCJsZXR0ZXJzX2NvdW50IiwibGVuZ3RoIiwic2VuZE1lc3NhZ2UiLCJpc0VtcHR5Iiwic3dhbCIsIm9wdGlvbnMiLCJkcm9wZG93blBhcmVudCIsIiQiLCJzZWxlY3RNZXNzYWdlVHlwZSIsInNlbGVjdDIiLCJzZWxlY3RzIiwiY2xpZW50cyIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRlbGF5IiwicGFyYW1zIiwicSIsInRlcm0iLCJwYWdlIiwicHJvY2Vzc1Jlc3VsdHMiLCJyZXN1bHRzIiwiaXRlbXMiLCJwYWdpbmF0aW9uIiwibW9yZSIsInRvdGFsX2NvdW50IiwiY2FjaGUiLCJtZXNzYWdlVHlwZSIsInNlbGVjMkxpdGVuZXJzIiwib24iLCJlbGVtZW50IiwiYXR0cmlidXRlcyIsImlkIiwiaSIsInB1c2giLCJub21icmVfY29tcGxldG8iLCJ0ZXh0IiwiY2VsdWxhciIsInRpY2tldExpc3RWaWV3IiwiZGF0YVNlYXJjaCIsInN0YXRlIiwidGlja2V0cyIsImhpZGUiLCJpdGVtQ2xpY2tMaXN0ZW5lciIsImJ1c0F2ZXJpYSIsIiRvbiIsInNlYXJjaCIsImZpbGxBdmVyaWFzTGlzdCIsIiRjb250ZW50IiwiaHRtbCIsImlkX2F2ZXJpYSIsImZpbmQiLCJ0cmltIiwidGlja2V0VmlldyIsImdldFRpY2tldCIsImVtcHR5VGlja2V0IiwiaWRfY2xpZW50ZSIsImNsaWVudGUiLCJkaXJlY2Npb24iLCJkZXNjcmlwY2lvbiIsImZlY2hhIiwiZXN0YWRvIiwiZmVjaGFfcmVwYXJhY2lvbiIsImNvZGlnbyIsImNsYXNzZXMiLCJjb21tZW50cyIsInRpY2tldCIsInJlbW92ZUNsYXNzIiwicXVpdCIsInByaW50IiwiYWRkQ29tbWVudCIsImRlbGV0ZUNvbW1lbnQiLCJlZGl0Q29tbWVudCIsImVkaXRUaWNrZXQiLCJkZWxldGVUaWNrZXQiLCJpbmZvIl0sIm1hcHBpbmdzIjoiQUFDQSxJQUFBQSxlQUNBQyxNQUFBLEdBQ0FDLFNBQUEsR0FDQUMsVUFBQSxHQUNBQyxhQUFBLEdBQ0FDLFFBQUEsV0FDQUMsV0FBQSxVQUdBQyxtQkFBQSxJQUFBQyxLQUNBQyxHQUFBLDRCQUNBQyxNQUNBQyxPQUFBWCxlQUVBWSxRQUFBLFdBQ0FDLEtBQUFDLGFBR0FDLFNBQ0FDLGFBQUEsYUFFQUYsVUFBQSxXQUNBLElBQUFHLEVBQ0FDLEVBQUFMLE1BQ0FJLEVBQUFFLE1BQUFDLElBQUFDLFNBQUEsd0JBQ0FDLEtBQUEsU0FBQUMsR0FDQUEsRUFBQWIsS0FBQUMsU0FDQU8sRUFBQVAsT0FBQVksRUFBQWIsS0FBQUMsVUFHQU0sRUFBQU8sTUFBQSxTQUFBQyxHQUNBQyxRQUFBQyxJQUFBRixNQUlBRyxhQUFBLFNBQUFDLEdBQ0EsSUFBQWxCLEVBQUFtQixFQUFBYixFQUNBTixFQUFBRSxLQUFBRixPQUVBbUIsRUFBQSxRQUFBQyxLQUFBQyxVQUFBckIsSUFDQU0sRUFBQUUs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IjoiY29tcG9uZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgY29uZmlnTWVzc2FnZSA9IHtcclxuICBlbWFpbDogJycsXHJcbiAgcGFzc3dvcmQ6ICcnLFxyXG4gIGRldmljZV9pZDogJycsXHJcbiAgY291bnRyeV9jb2RlOiAnJyxcclxuICBzZW5kX2F0OiAnMSBzZWNvbmQnLFxyXG4gIGV4cGlyZXNfYXQ6ICcxIGhvdXInXHJcbn1cclxuXHJcbnZhciBjb25maWdNZXNzYWdlc0Zvcm0gPSBuZXcgVnVlKHtcclxuICBlbDogJyNtZXNzYWdlLXNldHRpbmdzLXNlY3Rpb24nLFxyXG4gIGRhdGE6IHtcclxuICAgIGNvbmZpZzogY29uZmlnTWVzc2FnZVxyXG4gIH0sXHJcbiAgbW91bnRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5nZXRDb25maWcoKVxyXG4gIH0sXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIGNvbmZpcm1QaG9uZTogZnVuY3Rpb24gKCkge30sXHJcblxyXG4gICAgZ2V0Q29uZmlnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBzZW5kXHJcbiAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgc2VuZCA9IGF4aW9zLmdldChCQVNFX1VSTCArICdtZXNzYWdlcy9nZXRfY29uZmlnJylcclxuICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICBpZihyZXMuZGF0YS5jb25maWcpe1xyXG4gICAgICAgICAgc2VsZi5jb25maWcgPSByZXMuZGF0YS5jb25maWdcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIHNlbmQuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG5cclxuICAgIHNhdmVTZXR0aW5nczogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgdmFyIGNvbmZpZywgZm9ybSwgc2VuZFxyXG4gICAgICBjb25maWcgPSB0aGlzLmNvbmZpZ1xyXG5cclxuICAgICAgZm9ybSA9ICdkYXRhPScgKyBKU09OLnN0cmluZ2lmeShjb25maWcpXHJcbiAgICAgIHNlbmQgPSBheGlvcy5wb3N0KEJBU0VfVVJMICsgJ21lc3NhZ2VzL3NhdmVfY29uZmlnJywgZm9ybSlcclxuICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICBkaXNwbGF5TWVzc2FnZShyZXMuZGF0YS5tZW5zYWplKVxyXG4gICAgICB9KVxyXG4gICAgICBzZW5kLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59KVxyXG5cclxudmFyIHNlbmRNZXNzYWdlQXBwID0gbmV3IFZ1ZSh7XHJcbiAgZWw6ICcjc2VuZC1tZXNzYWdlLW1vZGFsJyxcclxuXHJcbiAgZGF0YToge1xyXG4gICAgaGlkZV9jbGllbnRzOiB0cnVlLFxyXG4gICAgaGlkZV9udW1iZXJzOiB0cnVlLFxyXG5cclxuICAgIG1lc3NhZ2VfZGF0YToge1xyXG4gICAgICB0aXBvOiAnJyxcclxuICAgICAgY2xpZW50ZXM6ICcnLFxyXG4gICAgICBudW1lcm9zOiAnJyxcclxuICAgICAgbWVuc2FqZTogJydcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmluaXRTZWxlY3QyKClcclxuICB9LFxyXG5cclxuICBjb21wdXRlZDoge1xyXG4gICAgbGV0dGVyc19jb3VudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5tZXNzYWdlX2RhdGEubWVuc2FqZS5sZW5ndGhcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBtZXRob2RzOiB7XHJcbiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgZm9ybSwgc2VuZFxyXG5cclxuICAgICAgaWYgKCFpc0VtcHR5KFt0aGlzLm1lc3NhZ2VfZGF0YS50aXBvLCB0aGlzLm1lc3NhZ2VfZGF0YS5tZW5zYWplXSkpIHtcclxuICAgICAgICBmb3JtID0gJ2RhdGE9JyArIEpTT04uc3RyaW5naWZ5KHRoaXMubWVzc2FnZV9kYXRhKVxyXG4gICAgICAgIHNlbmQgPSBheGlvcy5wb3N0KEJBU0VfVVJMICsgJ21lc3NhZ2VzL3NlbmRfbWVzc2FnZScsIGZvcm0pXHJcbiAgICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIGRpc3BsYXlNZXNzYWdlKHJlcy5kYXRhLm1lbnNhamUpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBzZW5kLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzd2FsKCdDYW1wb3MgUmVxdWVyaWRvcycsICdQb3IgZmF2b3Igc2VsZWNjaW9uZXMgZWwgdGlwbyBkZSBtZW5zYWplIHkgZXNjcmliYSBzdSBtZW5zYWplJylcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBpbml0U2VsZWN0MjogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgZHJvcGRvd25QYXJlbnQ6ICQoJyNzZW5kLW1lc3NhZ2UtbW9kYWwnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgc2VsZWN0TWVzc2FnZVR5cGUgPSAkKCcjbWVzc2FnZS10eXBlJylcclxuICAgICAgc2VsZWN0TWVzc2FnZVR5cGUuc2VsZWN0MihvcHRpb25zKVxyXG4gICAgICB2YXIgc2VsZWN0Q2xpZW50c0Zvck1lc3NhZ2UgPSAkKCcjY2xpZW50cy1mb3ItbWVzc2FnZScpLnNlbGVjdDIoe1xyXG4gICAgICAgIGRyb3Bkb3duUGFyZW50OiAkKCcjc2VuZC1tZXNzYWdlLW1vZGFsJyksXHJcbiAgICAgICAgYWpheDoge1xyXG4gICAgICAgICAgdXJsOiBCQVNFX1VSTCArICdtZXNzYWdlcy9zZWFyY2hfY2xpZW50cycsXHJcbiAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgZGVsYXk6IDI1MCxcclxuICAgICAgICAgIGRhdGE6IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICBxOiBwYXJhbXMudGVybSxcclxuICAgICAgICAgICAgICBwYWdlOiBwYXJhbXMucGFnZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgIHByb2Nlc3NSZXN1bHRzOiBmdW5jdGlvbiAoZGF0YSwgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wYWdlID0gcGFyYW1zLnBhZ2UgfHwgMVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIHJlc3VsdHM6IGRhdGEuaXRlbXMsXHJcbiAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbW9yZTogKHBhcmFtcy5wYWdlICogMzApIDwgZGF0YS50b3RhbF9jb3VudFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNhY2hlOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgdmFyIHNlbGVjdHMgPSB7XHJcbiAgICAgICAgY2xpZW50czogc2VsZWN0Q2xpZW50c0Zvck1lc3NhZ2UsXHJcbiAgICAgICAgbWVzc2FnZVR5cGU6IHNlbGVjdE1lc3NhZ2VUeXBlXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZWxlYzJMaXRlbmVycyhzZWxlY3RzKVxyXG4gICAgfSxcclxuXHJcbiAgICBzZWxlYzJMaXRlbmVyczogZnVuY3Rpb24gKHNlbGVjdHMpIHtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICAgIHNlbGVjdHMubWVzc2FnZVR5cGUub24oJ3NlbGVjdDI6c2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ID0gZS5wYXJhbXMuZGF0YS5lbGVtZW50XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzZWxlY3QuYXR0cmlidXRlc1xyXG4gICAgICAgIHZhciB0aXBvID0gZS5wYXJhbXMuZGF0YS5pZFxyXG4gICAgICAgIHNlbGYubWVzc2FnZV9kYXRhLnRpcG8gPSB0aXBvXHJcblxyXG4gICAgICAgIGlmICh0aXBvID09ICdvdHJvcycpIHtcclxuICAgICAgICAgIHNlbGYuaGlkZV9jbGllbnRzID0gdHJ1ZVxyXG4gICAgICAgICAgc2VsZi5oaWRlX251bWJlcnMgPSBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGlwbyA9PSAncGVyc29uYWxpemFkbycpIHtcclxuICAgICAgICAgIHNlbGYuaGlkZV9udW1iZXJzID0gdHJ1ZVxyXG4gICAgICAgICAgc2VsZi5oaWRlX2NsaWVudHMgPSBmYWxzZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZWxmLmhpZGVfY2xpZW50cyA9IHRydWVcclxuICAgICAgICAgIHNlbGYuaGlkZV9udW1iZXJzID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIHNlbGVjdHMubWVzc2FnZVR5cGUuc2VsZWN0MigndmFsJywnbW9yYScpO1xyXG5cclxuICAgICAgc2VsZWN0cy5jbGllbnRzLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIGNsaWVudGVzID0gc2VsZWN0cy5jbGllbnRzLnNlbGVjdDIoJ2RhdGEnKVxyXG4gICAgICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpZW50ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgICAnbm9tYnJlX2NvbXBsZXRvJzogY2xpZW50ZXNbaV0udGV4dCxcclxuICAgICAgICAgICAgJ2NlbHVsYXInOiBjbGllbnRlc1tpXS5pZFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5tZXNzYWdlX2RhdGEuY2xpZW50ZXMgPSBpdGVtc1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufSkiLCIkKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgdmFyIHRpY2tldExpc3RWaWV3ID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyNhdmVyaWFzLWxpc3QtdmlldycsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgIGRhdGFTZWFyY2g6IHtcclxuICAgICAgICB0ZXh0OiAnJyxcclxuICAgICAgICBzdGF0ZTogJ3BvciByZXBhcmFyJyxcclxuICAgICAgfSxcclxuICAgICAgdGlja2V0czogW10sXHJcbiAgICAgIGhpZGU6IGZhbHNlXHJcbiAgICB9LFxyXG5cclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy5pdGVtQ2xpY2tMaXN0ZW5lcigpO1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgYnVzQXZlcmlhLiRvbigndGlja2V0cy1saXN0ZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5pdGVtQ2xpY2tMaXN0ZW5lcigpXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBtZXRob2RzOiB7XHJcbiAgICAgIHNlYXJjaDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmb3JtID0gJ2RhdGE9JyArIEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YVNlYXJjaCk7XHJcbiAgICAgICAgdmFyIHNlbmQgPSBheGlvcy5wb3N0KEJBU0VfVVJMICsgJ2FwaS9hdmVyaWFzL3NlYXJjaCcsIGZvcm0pO1xyXG5cclxuICAgICAgICBzZW5kLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgdGhpcy5maWxsQXZlcmlhc0xpc3QocmVzLmRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgc2VuZC5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlcy5kYXRhLm1lbnNhamUpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZmlsbEF2ZXJpYXNMaXN0OiBmdW5jdGlvbiAoJGNvbnRlbnQpIHtcclxuICAgICAgICAkKCcjYXZlcmlhLWl0ZW0tbGlzdCcpLmh0bWwoJGNvbnRlbnQpO1xyXG4gICAgICAgIHRpY2tldExpc3RWaWV3Lml0ZW1DbGlja0xpc3RlbmVyKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBpdGVtQ2xpY2tMaXN0ZW5lcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5hdmVyaWEtaXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHZhciBpZF9hdmVyaWEgPSAkKHRoaXMpLmZpbmQoJy5jb2RlJykudGV4dCgpLnRyaW0oKTtcclxuICAgICAgICAgIHRpY2tldFZpZXcuZ2V0VGlja2V0KGlkX2F2ZXJpYSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9KVxyXG5cclxuICB2YXIgZW1wdHlUaWNrZXQgPSB7XHJcbiAgICBcImlkX2F2ZXJpYVwiOiBcIlwiLFxyXG4gICAgXCJpZF9jbGllbnRlXCI6IFwiXCIsXHJcbiAgICBcImNsaWVudGVcIjogXCJcIixcclxuICAgIFwiZGlyZWNjaW9uXCI6IFwiXCIsXHJcbiAgICBcImRlc2NyaXBjaW9uXCI6IFwiXCIsXHJcbiAgICBcImNlbHVsYXJcIjogXCJcIixcclxuICAgIFwiZmVjaGFcIjogXCJcIixcclxuICAgIFwiZXN0YWRvXCI6IFwiXCIsXHJcbiAgICBcImZlY2hhX3JlcGFyYWNpb25cIjogXCJcIixcclxuICAgIFwiY29kaWdvXCI6ICcnLFxyXG4gIH1cclxuICB2YXIgdGlja2V0VmlldyA9IG5ldyBWdWUoe1xyXG4gICAgZWw6ICcjdGlja2V0LXZpZXcnLFxyXG5cclxuICAgIGRhdGE6IHtcclxuICAgICAgY2xhc3Nlczoge1xyXG4gICAgICAgIGhpZGU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgY29tbWVudHM6IFtdLFxyXG4gICAgICB0aWNrZXQ6IGVtcHR5VGlja2V0XHJcbiAgICB9LFxyXG5cclxuICAgIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHt9LFxyXG5cclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgZ2V0VGlja2V0OiBmdW5jdGlvbiAoaWRfYXZlcmlhKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSAnZGF0YT0nICsgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgaWRfYXZlcmlhOiBpZF9hdmVyaWFcclxuICAgICAgICB9KVxyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9nZXRfYXZlcmlhJywgZm9ybSk7XHJcblxyXG4gICAgICAgIHNlbmQudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgJCgnI3RpY2tldC12aWV3JykucmVtb3ZlQ2xhc3MoJ2ludmlzaWJsZScpO1xyXG4gICAgICAgICAgdGlja2V0Vmlldy5jbGFzc2VzLmhpZGUgPSBmYWxzZTtcclxuICAgICAgICAgIHRpY2tldExpc3RWaWV3LmhpZGUgPSB0cnVlO1xyXG4gICAgICAgICAgdGlja2V0Vmlldy50aWNrZXQgPSBkYXRhLnRpY2tldDtcclxuICAgICAgICAgIHRpY2tldFZpZXcuY29tbWVudHMgPSBkYXRhLmNvbW1lbnRzO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBxdWl0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy50aWNrZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY29tbWVudHMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGlkZSA9IHRydWU7XHJcbiAgICAgICAgdGlja2V0TGlzdFZpZXcuaGlkZSA9IGZhbHNlO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgcHJpbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBwcmludCgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgYWRkQ29tbWVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRlbGV0ZUNvbW1lbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBlZGl0Q29tbWVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGVkaXRUaWNrZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBkZWxldGVUaWNrZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ2RlbGV0ZWQnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG59KSgpIl19
