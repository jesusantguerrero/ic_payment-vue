function getForm(e){return"data="+JSON.stringify(e)}var configMessage={email:"",password:"",device_id:"",country_code:"",send_at:"1 second",expires_at:"1 hour"},configMessagesForm=new Vue({el:"#message-settings-section",data:{config:configMessage},mounted:function(){this.getConfig()},methods:{confirmPhone:function(){},getConfig:function(){var e,t=this;(e=axios.get(BASE_URL+"messages/get_config")).then(function(e){e.data.config&&(t.config=e.data.config)}),e.catch(function(e){console.log(e)})},saveSettings:function(e){var t,i,s;t=this.config,i="data="+JSON.stringify(t),(s=axios.post(BASE_URL+"messages/save_config",i)).then(function(e){displayMessage(e.data.mensaje)}),s.catch(function(e){console.log(e)})}}}),sendMessageApp=new Vue({el:"#send-message-modal",data:{hide_clients:!0,hide_numbers:!0,message_data:{tipo:"",clientes:"",numeros:"",mensaje:""}},mounted:function(){this.initSelect2()},computed:{letters_count:function(){return this.message_data.mensaje.length}},methods:{sendMessage:function(){var e,t;isEmpty([this.message_data.tipo,this.message_data.mensaje])?swal("Campos Requeridos","Por favor selecciones el tipo de mensaje y escriba su mensaje"):(e="data="+JSON.stringify(this.message_data),(t=axios.post(BASE_URL+"messages/send_message",e)).then(function(e){displayMessage(e.data.mensaje)}),t.catch(function(e){console.log(e)}))},initSelect2:function(){var e={dropdownParent:$("#send-message-modal")},t=$("#message-type");t.select2(e);var i={clients:$("#clients-for-message").select2({dropdownParent:$("#send-message-modal"),ajax:{url:BASE_URL+"messages/search_clients",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0}}),messageType:t};this.selec2Liteners(i)},selec2Liteners:function(e){var t=this;e.messageType.on("select2:select",function(e){e.params.data.element.attributes;var i=e.params.data.id;t.message_data.tipo=i,"otros"==i?(t.hide_clients=!0,t.hide_numbers=!1):"personalizado"==i?(t.hide_numbers=!0,t.hide_clients=!1):(t.hide_clients=!0,t.hide_numbers=!0)}),e.messageType.select2("val","mora"),e.clients.on("select2:select",function(i){for(var s=e.clients.select2("data"),n=[],a=0;a<s.length;a++)n.push({nombre_completo:s[a].text,celular:s[a].id});t.message_data.clientes=n})}}}),ticketListView=new Vue({el:"#averias-list-view",data:{dataSearch:{text:"",state:"por reparar"},tickets:[],hide:!1},mounted:function(){this.itemClickListener();var e=this;busAveria.$on("tickets-listed",function(){e.itemClickListener()})},methods:{search:function(){var e="data="+JSON.stringify(this.dataSearch),t=axios.post(BASE_URL+"api/averias/search",e);t.then(function(e){this.fillAveriasList(e.data)}),t.catch(function(){console.error(res.data.mensaje)})},fillAveriasList:function(e){$("#averia-item-list").html(e),ticketListView.itemClickListener()},itemClickListener:function(){$("#averias-list-view .averia-item").on("click",function(){var e=$(this).find(".code").text().trim();ticketView.getTicket(e)})}}}),emptyTicket={id_averia:"",id_cliente:"",cliente:"",direccion:"",descripcion:"",celular:"",fecha:"",estado:"",fecha_reparacion:"",codigo:""},ticketView=new Vue({el:"#ticket-view",data:{classes:{hide:!0},mode:{newComment:!1,edit:!1},new_comment:"",comments:[],ticket:emptyTicket},created:function(){$("#ticket-view").removeClass("invisible")},methods:{getTicket:function(e){var t="data="+JSON.stringify({id_averia:e});axios.post(BASE_URL+"api/averias/get_averia",t).then(function(e){var t=e.data;ticketView.classes.hide=!1,ticketListView.hide=!0,ticketView.ticket=t.ticket,ticketView.comments=t.comments})},quit:function(){this.ticket=emptyTicket,this.comments=null,this.classes.hide=!0,this.closeCommentMode(),ticketListView.hide=!1},print:function(){print()},startComment:function(){this.mode.newComment=!0},addComment:function(){var e=getForm({id_averia:this.ticket.id_averia,descripcion:this.new_comment}),t=this;axios.post(BASE_URL+"api/averias/add_comment",e).then(function(e){t.getComments(),t.closeCommentMode(),displayMessage(e.data.mensaje)})},_deleteComment:function(e){var t=e.target.parentNode.parentNode,i=e.target.parentNode.attributes["data-id"].value,s=this;t.classList.add("to-delete"),swal({title:"EstÃ¡ Seguro?",text:"Seguro de que eliminar este reporte?",type:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(function(){s.deleteComment(i),t.classList.remove("to-delete")}).catch(function(){t.classList.remove("to-delete")})},deleteComment:function(e){var t=this,i=getForm({id_reporte:e});axios.post(BASE_URL+"api/averias/delete_comment",i).then(function(e){t.getComments(),displayMessage(e.data.mensaje)})},editComment:function(){},closeCommentMode:function(){this.mode.newComment=!1,this.new_comment=""},getComments:function(){var e=getForm({id_averia:this.ticket.id_averia}),t=this;axios.post(BASE_URL+"api/averias/get_comments",e).then(function(e){t.comments=e.data.comments})},editTicket:function(){},deleteTicket:function(){console.info("deleted")}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRpY2tldHMuanMiLCJNZXNzYWdlcy5qcyJdLCJuYW1lcyI6WyJnZXRGb3JtIiwib2JqZWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbmZpZ01lc3NhZ2UiLCJlbWFpbCIsInBhc3N3b3JkIiwiZGV2aWNlX2lkIiwiY291bnRyeV9jb2RlIiwic2VuZF9hdCIsImV4cGlyZXNfYXQiLCJjb25maWdNZXNzYWdlc0Zvcm0iLCJWdWUiLCJlbCIsImRhdGEiLCJjb25maWciLCJtb3VudGVkIiwidGhpcyIsImdldENvbmZpZyIsIm1ldGhvZHMiLCJjb25maXJtUGhvbmUiLCJzZW5kIiwic2VsZiIsImF4aW9zIiwiZ2V0IiwiQkFTRV9VUkwiLCJ0aGVuIiwicmVzIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzYXZlU2V0dGluZ3MiLCJlIiwiZm9ybSIsInBvc3QiLCJkaXNwbGF5TWVzc2FnZSIsIm1lbnNhamUiLCJlcnIiLCJzZW5kTWVzc2FnZUFwcCIsImhpZGVfY2xpZW50cyIsImhpZGVfbnVtYmVycyIsIm1lc3NhZ2VfZGF0YSIsInRpcG8iLCJjbGllbnRlcyIsIm51bWVyb3MiLCJpbml0U2VsZWN0MiIsImNvbXB1dGVkIiwibGV0dGVyc19jb3VudCIsImxlbmd0aCIsInNlbmRNZXNzYWdlIiwiaXNFbXB0eSIsInN3YWwiLCJvcHRpb25zIiwiZHJvcGRvd25QYXJlbnQiLCIkIiwic2VsZWN0TWVzc2FnZVR5cGUiLCJzZWxlY3QyIiwic2VsZWN0cyIsImNsaWVudHMiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkZWxheSIsInBhcmFtcyIsInEiLCJ0ZXJtIiwicGFnZSIsInByb2Nlc3NSZXN1bHRzIiwicmVzdWx0cyIsIml0ZW1zIiwicGFnaW5hdGlvbiIsIm1vcmUiLCJ0b3RhbF9jb3VudCIsImNhY2hlIiwibWVzc2FnZVR5cGUiLCJzZWxlYzJMaXRlbmVycyIsIm9uIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJpZCIsImkiLCJwdXNoIiwibm9tYnJlX2NvbXBsZXRvIiwidGV4dCIsImNlbHVsYXIiLCJ0aWNrZXRMaXN0VmlldyIsImRhdGFTZWFyY2giLCJzdGF0ZSIsInRpY2tldHMiLCJoaWRlIiwiaXRlbUNsaWNrTGlzdGVuZXIiLCJidXNBdmVyaWEiLCIkb24iLCJzZWFyY2giLCJmaWxsQXZlcmlhc0xpc3QiLCIkY29udGVudCIsImh0bWwiLCJpZF9hdmVyaWEiLCJmaW5kIiwidHJpbSIsInRpY2tldFZpZXciLCJnZXRUaWNrZXQiLCJlbXB0eVRpY2tldCIsImlkX2NsaWVudGUiLCJjbGllbnRlIiwiZGlyZWNjaW9uIiwiZGVzY3JpcGNpb24iLCJmZWNoYSIsImVzdGFkbyIsImZlY2hhX3JlcGFyYWNpb24iLCJjb2RpZ28iLCJjbGFzc2VzIiwibW9kZSIsIm5ld0NvbW1lbnQiLCJlZGl0IiwibmV3X2NvbW1lbnQiLCJjb21tZW50cyIsInRpY2tldCIsImNyZWF0ZWQiLCJyZW1vdmVDbGFzcyIsInF1aXQiLCJjbG9zZUNvbW1lbnRNb2RlIiwicHJpbnQiLCJzdGFydENvbW1lbnQiLCJhZGRDb21tZW50IiwiZ2V0Q29tbWVudHMiLCJfZGVsZXRlQ29tbWVudCIsImNvbW1lbnRJdGVtIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImlkQ29tbWVudCIsInZhbHVlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGl0bGUiLCJ0eXBlIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25UZXh0IiwiY2FuY2VsQnV0dG9uVGV4dCIsImRlbGV0ZUNvbW1lbnQiLCJyZW1vdmUiLCJpZF9yZXBvcnRlIiwiZWRpdENvbW1lbnQiLCJlZGl0VGlja2V0IiwiZGVsZXRlVGlja2V0IiwiaW5mbyJdLCJtYXBwaW5ncyI6IkFBeUxBLFNBQUFBLFFBQUFDLEdBQ0EsTUFBQSxRQUFBQyxLQUFBQyxVQUFBRixHQ3pMQSxJQUFBRyxlQUNBQyxNQUFBLEdBQ0FDLFNBQUEsR0FDQUMsVUFBQSxHQUNBQyxhQUFBLEdBQ0FDLFFBQUEsV0FDQUMsV0FBQSxVQUdBQyxtQkFB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QWlCLEVBQUFsQyxTQUFBOEksV0FBQVgsSUFDQTVHLE1BQUFZLEtBQUFWLFNBQUEsNkJBQUFTLEdBRUFSLEtBQUEsU0FBQUMsR0FDQUwsRUFBQXdHLGNBQ0ExRixlQUFBVCxFQUFBYixLQUFBdUIsWUFJQTBHLFlBQUEsYUFJQXJCLGlCQUFBLFdBQ0F6RyxLQUFBZ0csS0FBQUMsWUFBQSxFQUNBakcsS0FBQW1HLFlBQUEsSUFHQVUsWUFBQSxXQUNBLElBQUE1RixFQUFBbEMsU0FBQWtHLFVBQUFqRixLQUFBcUcsT0FBQXBCLFlBRUE1RSxFQUFBTCxLQURBTSxNQUFBWSxLQUFBVixTQUFBLDJCQUFBUyxHQUVBUixLQUFBLFNBQUFDLEdBQ0FMLEVBQUErRixTQUFBMUYsRUFBQWIsS0FBQXVHLFlBSUEyQixXQUFBLGFBSUFDLGFBQUEsV0FDQW5ILFFBQUFvSCxLQUFBIiwiZmlsZSI6ImNvbXBvbmVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgIHZhciB0aWNrZXRMaXN0VmlldyA9IG5ldyBWdWUoe1xyXG4gICAgZWw6ICcjYXZlcmlhcy1saXN0LXZpZXcnLFxyXG4gICAgZGF0YToge1xyXG4gICAgICBkYXRhU2VhcmNoOiB7XHJcbiAgICAgICAgdGV4dDogJycsXHJcbiAgICAgICAgc3RhdGU6ICdwb3IgcmVwYXJhcicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpY2tldHM6IFtdLFxyXG4gICAgICBoaWRlOiBmYWxzZVxyXG4gICAgfSxcclxuXHJcbiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuaXRlbUNsaWNrTGlzdGVuZXIoKTtcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzXHJcbiAgICAgIGJ1c0F2ZXJpYS4kb24oJ3RpY2tldHMtbGlzdGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaXRlbUNsaWNrTGlzdGVuZXIoKVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICBzZWFyY2g6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZm9ybSA9ICdkYXRhPScgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGFTZWFyY2gpO1xyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9zZWFyY2gnLCBmb3JtKTtcclxuXHJcbiAgICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHRoaXMuZmlsbEF2ZXJpYXNMaXN0KHJlcy5kYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHNlbmQuY2F0Y2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihyZXMuZGF0YS5tZW5zYWplKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGZpbGxBdmVyaWFzTGlzdDogZnVuY3Rpb24gKCRjb250ZW50KSB7XHJcbiAgICAgICAgJCgnI2F2ZXJpYS1pdGVtLWxpc3QnKS5odG1sKCRjb250ZW50KTtcclxuICAgICAgICB0aWNrZXRMaXN0Vmlldy5pdGVtQ2xpY2tMaXN0ZW5lcigpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgaXRlbUNsaWNrTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcjYXZlcmlhcy1saXN0LXZpZXcgLmF2ZXJpYS1pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIGlkX2F2ZXJpYSA9ICQodGhpcykuZmluZCgnLmNvZGUnKS50ZXh0KCkudHJpbSgpO1xyXG4gICAgICAgICAgdGlja2V0Vmlldy5nZXRUaWNrZXQoaWRfYXZlcmlhKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHZhciBlbXB0eVRpY2tldCA9IHtcclxuICAgIFwiaWRfYXZlcmlhXCI6IFwiXCIsXHJcbiAgICBcImlkX2NsaWVudGVcIjogXCJcIixcclxuICAgIFwiY2xpZW50ZVwiOiBcIlwiLFxyXG4gICAgXCJkaXJlY2Npb25cIjogXCJcIixcclxuICAgIFwiZGVzY3JpcGNpb25cIjogXCJcIixcclxuICAgIFwiY2VsdWxhclwiOiBcIlwiLFxyXG4gICAgXCJmZWNoYVwiOiBcIlwiLFxyXG4gICAgXCJlc3RhZG9cIjogXCJcIixcclxuICAgIFwiZmVjaGFfcmVwYXJhY2lvblwiOiBcIlwiLFxyXG4gICAgXCJjb2RpZ29cIjogJycsXHJcbiAgfVxyXG4gIFxyXG4gIHZhciB0aWNrZXRWaWV3ID0gbmV3IFZ1ZSh7XHJcbiAgICBlbDogJyN0aWNrZXQtdmlldycsXHJcbiAgICBcclxuICAgIGRhdGE6IHtcclxuICAgICAgY2xhc3Nlczoge1xyXG4gICAgICAgIGhpZGU6IHRydWVcclxuICAgICAgfSxcclxuICAgICAgbW9kZToge1xyXG4gICAgICAgIG5ld0NvbW1lbnQ6IGZhbHNlLFxyXG4gICAgICAgIGVkaXQ6IGZhbHNlLFxyXG4gICAgICB9LFxyXG4gICAgICBuZXdfY29tbWVudDogJycsXHJcbiAgICAgIGNvbW1lbnRzOiBbXSxcclxuICAgICAgdGlja2V0OiBlbXB0eVRpY2tldFxyXG4gICAgfSxcclxuICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgJCgnI3RpY2tldC12aWV3JykucmVtb3ZlQ2xhc3MoJ2ludmlzaWJsZScpXHJcbiAgICB9LFxyXG5cclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgZ2V0VGlja2V0OiBmdW5jdGlvbiAoaWRfYXZlcmlhKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSAnZGF0YT0nICsgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgaWRfYXZlcmlhOiBpZF9hdmVyaWFcclxuICAgICAgICB9KVxyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9nZXRfYXZlcmlhJywgZm9ybSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2VuZC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICB0aWNrZXRWaWV3LmNsYXNzZXMuaGlkZSA9IGZhbHNlO1xyXG4gICAgICAgICAgdGlja2V0TGlzdFZpZXcuaGlkZSA9IHRydWU7XHJcbiAgICAgICAgICB0aWNrZXRWaWV3LnRpY2tldCA9IGRhdGEudGlja2V0O1xyXG4gICAgICAgICAgdGlja2V0Vmlldy5jb21tZW50cyA9IGRhdGEuY29tbWVudHM7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHF1aXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRpY2tldCA9IGVtcHR5VGlja2V0O1xyXG4gICAgICAgIHRoaXMuY29tbWVudHMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xhc3Nlcy5oaWRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNsb3NlQ29tbWVudE1vZGUoKTtcclxuICAgICAgICB0aWNrZXRMaXN0Vmlldy5oaWRlID0gZmFsc2U7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBwcmludDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHByaW50KCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBzdGFydENvbW1lbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1vZGUubmV3Q29tbWVudCA9IHRydWU7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBhZGRDb21tZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSBnZXRGb3JtKHtpZF9hdmVyaWE6IHRoaXMudGlja2V0LmlkX2F2ZXJpYSwgZGVzY3JpcGNpb246IHRoaXMubmV3X2NvbW1lbnR9KTtcclxuICAgICAgICB2YXIgc2VuZCA9IGF4aW9zLnBvc3QoQkFTRV9VUkwgKyAnYXBpL2F2ZXJpYXMvYWRkX2NvbW1lbnQnLGZvcm0pO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZW5kLnRoZW4oIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgIHNlbGYuZ2V0Q29tbWVudHMoKTtcclxuICAgICAgICAgIHNlbGYuY2xvc2VDb21tZW50TW9kZSgpXHJcbiAgICAgICAgICBkaXNwbGF5TWVzc2FnZShyZXMuZGF0YS5tZW5zYWplKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIF9kZWxldGVDb21tZW50OiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBjb21tZW50SXRlbSA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZVxyXG4gICAgICAgIHZhciBpZENvbW1lbnQgPSBlLnRhcmdldC5wYXJlbnROb2RlLmF0dHJpYnV0ZXNbJ2RhdGEtaWQnXS52YWx1ZVxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBjb21tZW50SXRlbS5jbGFzc0xpc3QuYWRkKCd0by1kZWxldGUnKTtcclxuXHJcbiAgICAgICAgc3dhbCh7XHJcbiAgICAgICAgICB0aXRsZTogJ0VzdMOhIFNlZ3Vybz8nLFxyXG4gICAgICAgICAgdGV4dDogXCJTZWd1cm8gZGUgcXVlIGVsaW1pbmFyIGVzdGUgcmVwb3J0ZT9cIixcclxuICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcclxuICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsXHJcbiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0VsaW1pbmFyJyxcclxuICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWxhcidcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBzZWxmLmRlbGV0ZUNvbW1lbnQoaWRDb21tZW50KTtcclxuICAgICAgICAgIGNvbW1lbnRJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3RvLWRlbGV0ZScpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY29tbWVudEl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgndG8tZGVsZXRlJylcclxuICAgICAgICB9KVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZGVsZXRlQ29tbWVudDogZnVuY3Rpb24gKGlkQ29tbWVudCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBmb3JtID0gZ2V0Rm9ybSh7IGlkX3JlcG9ydGU6IGlkQ29tbWVudH0pO1xyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9kZWxldGVfY29tbWVudCcsZm9ybSk7XHJcblxyXG4gICAgICAgIHNlbmQudGhlbiggZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgc2VsZi5nZXRDb21tZW50cygpO1xyXG4gICAgICAgICAgZGlzcGxheU1lc3NhZ2UocmVzLmRhdGEubWVuc2FqZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBlZGl0Q29tbWVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIGNsb3NlQ29tbWVudE1vZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1vZGUubmV3Q29tbWVudCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmV3X2NvbW1lbnQgPSAnJztcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldENvbW1lbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZvcm0gPSBnZXRGb3JtKHtpZF9hdmVyaWE6IHRoaXMudGlja2V0LmlkX2F2ZXJpYX0pO1xyXG4gICAgICAgIHZhciBzZW5kID0gYXhpb3MucG9zdChCQVNFX1VSTCArICdhcGkvYXZlcmlhcy9nZXRfY29tbWVudHMnLGZvcm0pO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgICAgIHNlbmQudGhlbiggZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgc2VsZi5jb21tZW50cyA9IHJlcy5kYXRhLmNvbW1lbnRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZWRpdFRpY2tldDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRlbGV0ZVRpY2tldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnZGVsZXRlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIGZ1bmN0aW9uIGdldEZvcm0ob2JqZWN0KXtcclxuICAgIHJldHVybiBcImRhdGE9XCIgKyBKU09OLnN0cmluZ2lmeShvYmplY3QpO1xyXG4gIH1cclxuIiwiXHJcbnZhciBjb25maWdNZXNzYWdlID0ge1xyXG4gIGVtYWlsOiAnJyxcclxuICBwYXNzd29yZDogJycsXHJcbiAgZGV2aWNlX2lkOiAnJyxcclxuICBjb3VudHJ5X2NvZGU6ICcnLFxyXG4gIHNlbmRfYXQ6ICcxIHNlY29uZCcsXHJcbiAgZXhwaXJlc19hdDogJzEgaG91cidcclxufVxyXG5cclxudmFyIGNvbmZpZ01lc3NhZ2VzRm9ybSA9IG5ldyBWdWUoe1xyXG4gIGVsOiAnI21lc3NhZ2Utc2V0dGluZ3Mtc2VjdGlvbicsXHJcbiAgZGF0YToge1xyXG4gICAgY29uZmlnOiBjb25maWdNZXNzYWdlXHJcbiAgfSxcclxuICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdldENvbmZpZygpXHJcbiAgfSxcclxuXHJcbiAgbWV0aG9kczoge1xyXG4gICAgY29uZmlybVBob25lOiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICBnZXRDb25maWc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIHNlbmRcclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICBzZW5kID0gYXhpb3MuZ2V0KEJBU0VfVVJMICsgJ21lc3NhZ2VzL2dldF9jb25maWcnKVxyXG4gICAgICBzZW5kLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIGlmKHJlcy5kYXRhLmNvbmZpZyl7XHJcbiAgICAgICAgICBzZWxmLmNvbmZpZyA9IHJlcy5kYXRhLmNvbmZpZ1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgc2VuZC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgfSlcclxuICAgIH0sXHJcblxyXG4gICAgc2F2ZVNldHRpbmdzOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB2YXIgY29uZmlnLCBmb3JtLCBzZW5kXHJcbiAgICAgIGNvbmZpZyA9IHRoaXMuY29uZmlnXHJcblxyXG4gICAgICBmb3JtID0gJ2RhdGE9JyArIEpTT04uc3RyaW5naWZ5KGNvbmZpZylcclxuICAgICAgc2VuZCA9IGF4aW9zLnBvc3QoQkFTRV9VUkwgKyAnbWVzc2FnZXMvc2F2ZV9jb25maWcnLCBmb3JtKVxyXG4gICAgICBzZW5kLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIGRpc3BsYXlNZXNzYWdlKHJlcy5kYXRhLm1lbnNhamUpXHJcbiAgICAgIH0pXHJcbiAgICAgIHNlbmQuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn0pXHJcblxyXG52YXIgc2VuZE1lc3NhZ2VBcHAgPSBuZXcgVnVlKHtcclxuICBlbDogJyNzZW5kLW1lc3NhZ2UtbW9kYWwnLFxyXG5cclxuICBkYXRhOiB7XHJcbiAgICBoaWRlX2NsaWVudHM6IHRydWUsXHJcbiAgICBoaWRlX251bWJlcnM6IHRydWUsXHJcblxyXG4gICAgbWVzc2FnZV9kYXRhOiB7XHJcbiAgICAgIHRpcG86ICcnLFxyXG4gICAgICBjbGllbnRlczogJycsXHJcbiAgICAgIG51bWVyb3M6ICcnLFxyXG4gICAgICBtZW5zYWplOiAnJ1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuaW5pdFNlbGVjdDIoKVxyXG4gIH0sXHJcblxyXG4gIGNvbXB1dGVkOiB7XHJcbiAgICBsZXR0ZXJzX2NvdW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VfZGF0YS5tZW5zYWplLmxlbmd0aFxyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBmb3JtLCBzZW5kXHJcblxyXG4gICAgICBpZiAoIWlzRW1wdHkoW3RoaXMubWVzc2FnZV9kYXRhLnRpcG8sIHRoaXMubWVzc2FnZV9kYXRhLm1lbnNhamVdKSkge1xyXG4gICAgICAgIGZvcm0gPSAnZGF0YT0nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5tZXNzYWdlX2RhdGEpXHJcbiAgICAgICAgc2VuZCA9IGF4aW9zLnBvc3QoQkFTRV9VUkwgKyAnbWVzc2FnZXMvc2VuZF9tZXNzYWdlJywgZm9ybSlcclxuICAgICAgICBzZW5kLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgZGlzcGxheU1lc3NhZ2UocmVzLmRhdGEubWVuc2FqZSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIHNlbmQuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN3YWwoJ0NhbXBvcyBSZXF1ZXJpZG9zJywgJ1BvciBmYXZvciBzZWxlY2Npb25lcyBlbCB0aXBvIGRlIG1lbnNhamUgeSBlc2NyaWJhIHN1IG1lbnNhamUnKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRTZWxlY3QyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICBkcm9wZG93blBhcmVudDogJCgnI3NlbmQtbWVzc2FnZS1tb2RhbCcpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBzZWxlY3RNZXNzYWdlVHlwZSA9ICQoJyNtZXNzYWdlLXR5cGUnKVxyXG4gICAgICBzZWxlY3RNZXNzYWdlVHlwZS5zZWxlY3QyKG9wdGlvbnMpXHJcbiAgICAgIHZhciBzZWxlY3RDbGllbnRzRm9yTWVzc2FnZSA9ICQoJyNjbGllbnRzLWZvci1tZXNzYWdlJykuc2VsZWN0Mih7XHJcbiAgICAgICAgZHJvcGRvd25QYXJlbnQ6ICQoJyNzZW5kLW1lc3NhZ2UtbW9kYWwnKSxcclxuICAgICAgICBhamF4OiB7XHJcbiAgICAgICAgICB1cmw6IEJBU0VfVVJMICsgJ21lc3NhZ2VzL3NlYXJjaF9jbGllbnRzJyxcclxuICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICBkZWxheTogMjUwLFxyXG4gICAgICAgICAgZGF0YTogZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIHE6IHBhcmFtcy50ZXJtLFxyXG4gICAgICAgICAgICAgIHBhZ2U6IHBhcmFtcy5wYWdlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgcHJvY2Vzc1Jlc3VsdHM6IGZ1bmN0aW9uIChkYXRhLCBwYXJhbXMpIHtcclxuICAgICAgICAgICAgcGFyYW1zLnBhZ2UgPSBwYXJhbXMucGFnZSB8fCAxXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0czogZGF0YS5pdGVtcyxcclxuICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBtb3JlOiAocGFyYW1zLnBhZ2UgKiAzMCkgPCBkYXRhLnRvdGFsX2NvdW50XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2FjaGU6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICB2YXIgc2VsZWN0cyA9IHtcclxuICAgICAgICBjbGllbnRzOiBzZWxlY3RDbGllbnRzRm9yTWVzc2FnZSxcclxuICAgICAgICBtZXNzYWdlVHlwZTogc2VsZWN0TWVzc2FnZVR5cGVcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNlbGVjMkxpdGVuZXJzKHNlbGVjdHMpXHJcbiAgICB9LFxyXG5cclxuICAgIHNlbGVjMkxpdGVuZXJzOiBmdW5jdGlvbiAoc2VsZWN0cykge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgICAgc2VsZWN0cy5tZXNzYWdlVHlwZS5vbignc2VsZWN0MjpzZWxlY3QnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHZhciBzZWxlY3QgPSBlLnBhcmFtcy5kYXRhLmVsZW1lbnRcclxuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHNlbGVjdC5hdHRyaWJ1dGVzXHJcbiAgICAgICAgdmFyIHRpcG8gPSBlLnBhcmFtcy5kYXRhLmlkXHJcbiAgICAgICAgc2VsZi5tZXNzYWdlX2RhdGEudGlwbyA9IHRpcG9cclxuXHJcbiAgICAgICAgaWYgKHRpcG8gPT0gJ290cm9zJykge1xyXG4gICAgICAgICAgc2VsZi5oaWRlX2NsaWVudHMgPSB0cnVlXHJcbiAgICAgICAgICBzZWxmLmhpZGVfbnVtYmVycyA9IGZhbHNlXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aXBvID09ICdwZXJzb25hbGl6YWRvJykge1xyXG4gICAgICAgICAgc2VsZi5oaWRlX251bWJlcnMgPSB0cnVlXHJcbiAgICAgICAgICBzZWxmLmhpZGVfY2xpZW50cyA9IGZhbHNlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNlbGYuaGlkZV9jbGllbnRzID0gdHJ1ZVxyXG4gICAgICAgICAgc2VsZi5oaWRlX251bWJlcnMgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgc2VsZWN0cy5tZXNzYWdlVHlwZS5zZWxlY3QyKCd2YWwnLCdtb3JhJyk7XHJcblxyXG4gICAgICBzZWxlY3RzLmNsaWVudHMub24oJ3NlbGVjdDI6c2VsZWN0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgY2xpZW50ZXMgPSBzZWxlY3RzLmNsaWVudHMuc2VsZWN0MignZGF0YScpXHJcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGllbnRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICAgICdub21icmVfY29tcGxldG8nOiBjbGllbnRlc1tpXS50ZXh0LFxyXG4gICAgICAgICAgICAnY2VsdWxhcic6IGNsaWVudGVzW2ldLmlkXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLm1lc3NhZ2VfZGF0YS5jbGllbnRlcyA9IGl0ZW1zXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59KSJdfQ==
