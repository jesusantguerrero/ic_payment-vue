var appPagoExtra=new Vue({el:"#app-pago-extra",data:{recibo:{id_pago:0,id_contrato:0,id_servicio:0,id_empleado:0,fecha_pago:"dd/mm/yyyy",concepto:"extra",detalles_extra:"",cuota:"",mora:"",monto_extra:"",total:"",estado:"",fecha_limite:"",complete_date:"",descuento:"",razon_descuento:"",deuda:"",abono_a:"",tipo:"",generado:""},visible:!1,extra:{controls:"",id_extra:"",id_servicio:"",checkbox:"",fecha:"",concepto:"",ultimo_pago:"",monto_pagado:"",monto_total:"",estado:""},firstControls:{hide:!1},secondControls:{hide:!0}},filters:{},methods:{putInstance:function(){},goBack:function(){extraTable.el.parents(".bootstrap-table").removeClass("hide"),appPagoExtra.visible=!1,appPagoExtra.extra={concepto:""}},generatePayment:function(){var a="data="+JSON.stringify(this.extra),t=axios.post(BASE_URL+"extra/generate_extra_payment",a);t.then(function(a){var t=a.data;displayMessage(t.mensaje),selectExtraPayment.html(t.pagos)}),t.catch(function(){})},getPayment:function(a){var t="data="+JSON.stringify({id_pago:a}),e=this;axios.post(BASE_URL+"extra/get_payment",t).then(function(a){var t=a.data;e.recibo=t.recibo})},applyPayment:function(){var a=this,t=this.recibo,e={id_extra:t.id_extra,id_pago:t.id_pago},o={concepto:t.concepto,detalles_extra:t.detalles_extra,fecha_pago:t.fecha_pago,cuota:t.cuota,total:t.cuota,estado:"pagado",tipo:t.tipo,generado:!0},n="data="+JSON.stringify(o)+"&info="+JSON.stringify(e),r=axios.post(BASE_URL+"extra/apply_payment",n);r.then(function(t){var e=t.data;displayMessage(e.mensaje),extraTable.refresh(e.extras),a.goBack()}),r.catch(function(a){console.log(a)})},getPayments:function(a){var t="data="+JSON.stringify({id_extra:a});axios.post(BASE_URL+"extra/get_extra_payment_of",t).then(function(a){var t=a.data;selectExtraPayment.html(t.pagos).change()})},deletePayment:function(){var a=this,t=this.recibo,e={id_extra:t.id_extra,id_pago:t.id_pago},o="data="+JSON.stringify(e),n=axios.post(BASE_URL+"extra/delete_payment",o);n.then(function(t){var e=t.data;displayMessage(e.mensaje),extraTable.refresh(e.extras),a.getPayments(a.extra.id_extra),extraTable.el.parents(".bootstrap-table").addClass("hide")}),n.catch(function(a){console.log(a)})}}});bus.$on("row-selected",function(a){extraTable.el.parents(".bootstrap-table").addClass("hide"),appPagoExtra.visible=!0,appPagoExtra.extra=a,appPagoExtra.getPayments(a.id_extra)});var selectExtraPayment=$("#select-extra-payment");selectExtraPayment.on("change",function(){var a=selectExtraPayment.val();appPagoExtra.getPayment(a)});