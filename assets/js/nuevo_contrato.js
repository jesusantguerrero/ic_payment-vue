webpackJsonp([12],{126:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(527),n=a(528),s=a(2),o=s(i.a,n.a,!1,null,null,null);e.default=o.exports},158:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(14),s=i(n),o=a(15),c=i(o),r=a(5),d=i(r),l=a(1),u=i(l),p=d.default.create({baseURL:baseURL}),v=function(){function t(){(0,s.default)(this,t),this.$http=p}return(0,c.default)(t,[{key:"getServiceList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$http.post("service/get_services/"+t)}},{key:"getService",value:function(t){return this.$http.post("service/get_service",u.default.getDataForm({id:t})).then(function(t){return t.data.service})}}]),t}();e.default=v},162:function(t,e,a){"use strict";var i=a(173),n=a(174),s=a(2),o=s(i.a,n.a,!1,null,null,null);e.a=o.exports},172:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(14),s=i(n),o=a(15),c=i(o),r=a(5),d=i(r),l=a(1),u=i(l),p=d.default.create({baseURL:baseURL}),v=function(){function t(){(0,s.default)(this,t),this.$http=p}return(0,c.default)(t,[{key:"getSectionList",value:function(){return this.$http.get("section/get_sections/list")}},{key:"getSectionIps",value:function(t){return this.$http.post("section/get_ips/list",u.default.getDataForm({sectionId:t}))}}]),t}();e.default=v},173:function(t,e,a){"use strict";var i=a(158),n=a.n(i),s=new n.a;e.a={data:function(){return{services:[],selectedService:null}},mounted:function(){this.getServices()},methods:{getServices:function(){var t=this;s.getServiceList("internet").then(function(e){t.services=e.data.services})},select:function(t){this.selectedService=t.id_servicio,this.$emit("selected",t)}}}},174:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row shortcuts-container for-services"},t._l(t.services,function(e){return a("div",{staticClass:"service-card shortcut",class:{selected:t.selectedService==e.id_servicio},attrs:{id:e.id_servicio},on:{click:function(a){t.select(e)}}},[a("i",{staticClass:"material-icons"},[t._v("rss_feed")]),t._v(t._s(e.nombre))])}))},n=[],s={render:i,staticRenderFns:n};e.a=s},527:function(t,e,a){"use strict";var i=a(172),n=a.n(i),s=a(41),o=a(162),c=a(1),r=a.n(c),d=new n.a;e.a={components:{SelectClient:s.a,InternetPlans:o.a},mounted:function(){this.getSectionList()},data:function(){return{contract:{id_cliente:"",id_servicio:"",codigo:"",fecha:"",duracion:"",mensualidad:"",nombre_equipo:"",mac_equipo:"",router:"",mac_router:"",modelo:"",ip:""},createdContract:null,sectionList:null,ipList:null,paymentList:null,selectedSection:null,selectedPayment:null,searchEndpoint:baseURL+"/clients/get_clients/dropdown",mode:"requirements",disabledSelect:!1}},computed:{lines:function(){for(var t=" ",e=1;e<10;e+=1)t+='<div class="lineas num'+e+'"><span></span></div>';return t},paymentUrl:function(){return this.contract.id_cliente?baseURL+"app/details/"+this.contract.id_cliente+"/pagos')":"#"},printContractUrl:function(){return baseURL+"process/getrequirements/"+this.contract.id_cliente},printRequirementUrl:function(){return baseURL+"process/getrequirement/"+this.contract.id_cliente}},methods:{add:function(){var t=this,e=this.contract;r.a.isEmpty([e.id_cliente,e.id_servicio,e.fecha,e.duracion])||this.createdContract?this.$toasted.error("Revise, LLene todos los campos requeridos por favor"):this.$http.post("contract/add",this.getDataForm(e)).then(function(e){t.showMessage(e.data.message),t.createdContract=e.data.contract,t.paymentList=e.data.payments,t.disabledSelect=!0}).catch(function(e){t.$toasted.error(e)})},getSectionList:function(){var t=this;d.getSectionList().then(function(e){t.sectionList=e.data.sections})},getIpList:function(){var t=this;d.getSectionIps(this.selectedSection).then(function(e){t.ipList=e.data.ips})},setContractIp:function(){var t=this;this.ipList.forEach(function(e){e.id===t.contract.codigo&&(t.contract.ip=e.ip)})},updateUntil:function(){var t=this,e={id_contrato:this.createdContract,last_payment_id:this.selectedPayment};this.$http.post("contract/up_to_date",this.getDataForm(e)).then(function(e){t.showMessage(e.data.message)}).catch(function(e){t.$toasted.error(e)})},setClientId:function(t){this.contract.id_cliente=t.id},selectService:function(t){this.contract.id_servicio=t.id_servicio,this.contract.mensualidad=t.mensualidad},setMode:function(t){this.mode=t}}}},528:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"tabs-container contract-form"},[t._m(0,!1,!1),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade in active",attrs:{id:"contract-details",role:"tabpanel"}},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"input-group",attrs:{id:"select-cliente-containet"}},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Cliente")]),a("SelectClient",{attrs:{"the-id":"client-id","parent-id":"#select-client-container",endpoint:t.searchEndpoint,disabled:t.disabledSelect},on:{select:t.setClientId}})],1)]),a("h5",[t._v("Seleccione el Servicio"),a("InternetPlans",{on:{selected:t.selectService}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Mensualidad")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.mensualidad,expression:"contract.mensualidad"}],staticClass:"form-control",attrs:{id:"contract-service-price",type:"number",tabindex:"0",disabled:"disabled"},domProps:{value:t.contract.mensualidad},on:{input:function(e){e.target.composing||t.$set(t.contract,"mensualidad",e.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Meses")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.duracion,expression:"contract.duracion"}],staticClass:"form-control",attrs:{id:"contract-months",type:"number",tabindex:"1",value:""},domProps:{value:t.contract.duracion},on:{input:function(e){e.target.composing||t.$set(t.contract,"duracion",e.target.value)}}})])]),a("div",{staticClass:"row"}),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Fecha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.fecha,expression:"contract.fecha"}],staticClass:"form-control",attrs:{id:"contract-date",type:"date",tabindex:"2"},domProps:{value:t.contract.fecha},on:{input:function(e){e.target.composing||t.$set(t.contract,"fecha",e.target.value)}}})])]),a("div",{staticClass:"col-md-6"},[t.createdContract?a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Pagar Hasta")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPayment,expression:"selectedPayment"}],staticClass:"form-control",attrs:{id:"select-pay-until"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedPayment=e.target.multiple?a:a[0]},t.updateUntil]}},t._l(t.paymentList,function(e){return a("option",{domProps:{value:e.id_pago}},[t._v(t._s(e.mes)+" / "+t._s(e.anio))])}))]):t._e()])])]),a("div",{staticClass:"tab-pane fade in",attrs:{id:"equipment",role:"tabpanel"}},[a("div",{staticClass:"row"},[a("h4",[t._v("Equipo")]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Equipo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.nombre_equipo,expression:"contract.nombre_equipo"}],staticClass:"form-control",attrs:{id:"contract-equipment",type:"text",tabindex:"3"},domProps:{value:t.contract.nombre_equipo},on:{input:function(e){e.target.composing||t.$set(t.contract,"nombre_equipo",e.target.value)}}})]),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Modelo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.modelo,expression:"contract.modelo"}],staticClass:"form-control",attrs:{id:"contract-equipment-model",type:"text",tabindex:"5"},domProps:{value:t.contract.modelo},on:{input:function(e){e.target.composing||t.$set(t.contract,"modelo",e.target.value)}}})]),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Router")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.router,expression:"contract.router"}],staticClass:"form-control",attrs:{id:"contract-router",type:"text",tabindex:"7"},domProps:{value:t.contract.router},on:{input:function(e){e.target.composing||t.$set(t.contract,"router",e.target.value)}}})]),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Sector")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedSection,expression:"selectedSection"}],staticClass:"form-control select-contract-sector",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedSection=e.target.multiple?a:a[0]},t.getIpList]}},t._l(t.sectionList,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.text))])}))])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Mac Equipo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.mac_equipo,expression:"contract.mac_equipo"}],staticClass:"form-control",attrs:{id:"contract-e-mac",type:"text",tabindex:"4"},domProps:{value:t.contract.mac_equipo},on:{input:function(e){e.target.composing||t.$set(t.contract,"mac_equipo",e.target.value)}}})]),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("IP")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.ip,expression:"contract.ip"}],staticClass:"form-control",attrs:{id:"contract-ip",type:"text",tabindex:"6",disabled:"disabled"},domProps:{value:t.contract.ip},on:{input:function(e){e.target.composing||t.$set(t.contract,"ip",e.target.value)}}})]),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Mac Router")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.mac_router,expression:"contract.mac_router"}],staticClass:"form-control",attrs:{id:"contract-r-mac",type:"text",tabindex:"8"},domProps:{value:t.contract.mac_router},on:{input:function(e){e.target.composing||t.$set(t.contract,"mac_router",e.target.value)}}})]),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-addon",attrs:{id:"basic-addon1"}},[t._v("Codigo IP")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.contract.codigo,expression:"contract.codigo"}],staticClass:"form-control",attrs:{id:"select-contract-code"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.contract,"codigo",e.target.multiple?a:a[0])},t.setContractIp]}},t._l(t.ipList,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.id))])}))])])])])])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"centered-container"},[a("h3",{staticClass:"part-title"},[t._v("Selecciona una opción:")]),a("form",{staticClass:"form-inline"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"radio"},[a("label",{on:{click:function(e){t.setMode("new contract")}}},[a("div",{staticClass:"my-radio",class:{checked:"new contract"==t.mode},attrs:{id:"radio-new-contract"}}),t._v("Nuevo Contrato")])]),a("div",{staticClass:"radio"},[a("label",{on:{click:function(e){t.setMode("requirements")}}},[a("div",{staticClass:"my-radio",class:{checked:"requirements"==t.mode},attrs:{id:"radio-just-requirement"}}),t._v("Solo requerimiento")])])])]),a("div",{staticClass:"note-item note print-requirement"},[a("div",{staticClass:"preview"},[a("div",{staticClass:"falseDoc",domProps:{innerHTML:t._s(t.lines)}})])]),"new contract"==t.mode?a("div",{staticClass:"row-container contract-controls"},[a("button",{staticClass:"btn",attrs:{id:"btn-save-contract",tabindex:"7",disabled:t.createdContract},on:{click:t.add}},[t._v("Guardar")]),t.createdContract?a("a",{staticClass:"btn",attrs:{id:"btn-view-pay",target:"_blank",href:t.paymentUrl}},[t._v("Pagos")]):t._e(),t.createdContract?a("a",{staticClass:"btn",attrs:{id:"btn-print-contract",target:"printframe",href:t.printContractUrl}},[t._v("Imprimir")]):t._e()]):t._e(),"requirements"==t.mode?a("div",{staticClass:"row-container requirement-controls"},[a("a",{staticClass:"btn",attrs:{id:"btn-print-requirement",target:"printframe",href:t.printRequirementUrl}},[t._v("Requerimiento")])]):t._e()])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[a("li",{staticClass:"active",attrs:{role:"presentation"}},[a("a",{attrs:{href:"#contract-details","aria-controls":"contract-details",role:"tab","data-toggle":"tab"}},[t._v("Datos Contrato")])]),a("li",{attrs:{role:"presentation"}},[a("a",{attrs:{href:"#equipment","aria-controls":"equipment",role:"tab","data-toggle":"tab"}},[t._v("Equipo")])])])}],s={render:i,staticRenderFns:n};e.a=s}});
//# sourceMappingURL=nuevo_contrato.js.map