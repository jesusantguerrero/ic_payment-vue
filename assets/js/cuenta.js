webpackJsonp([5],{96:function(e,s,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=t(6),o=a(r),n=t(2),i=a(n),u=t(8),l=a(u),d=t(97),c=a(d),m={theme:"primary",position:"top-right",duration:5e3};o.default.use(l.default,m),o.default.mixin({methods:{showMessage:function(e){this.$toasted[e.type](e.text)},getDataForm:function(e){return"data="+JSON.stringify(e)}}});var p=i.default.create({baseURL:baseURL});o.default.prototype.$http=p,s.default=new o.default({el:"#acount-section",components:{"acount-section":c.default}})},97:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t(98),r=t(99),o=t(1),n=o(a.a,r.a,!1,null,null,null);s.default=n.exports},98:function(e,s,t){"use strict";var a=t(19),r=t.n(a);s.a={name:"AcountSection",data:function(){return{user:{user_id:"",nickname:"",name:"",lastname:"",dni:"",type:"",email:""},isChangePassword:!1,currentPassword:"",newPassword:"",passwordConfirm:"",states:{"has-error":!1,"has-success":!1,button:!0}}},mounted:function(){this.getUser()},methods:{getUser:function(){var e=this;this.$http.get("user/get_user").then(function(s){var t=s.data.user;t.fullname=t.name+" "+t.lastname,e.user=t})},updateInfo:function(){this.isChangePassword?this.changePassword():this.changeEmail()},changePassword:function(){var e=this;if(this.states["has-success"]){var s={user_id:this.user.user_id,current_password:this.currentPassword,new_password:this.newPassword},t="data="+JSON.stringify(s);this.$http.post("user/update_password",t).then(function(s){e.showMessage(s.data.message),window.location=baseURL+"app/logout"})}else this.$toasted.error("Las contraseñas no conciden")},changeEmail:function(){var e=this,s=this.user,t={user_id:s.user_id,password:password,field:"email",value:s.email};r()({title:"Contraseña",input:"password"}).then(function(){var s="data="+JSON.stringify(t);e.$http.post("user/update_field",s).then(function(s){e.showMessage(s.data.message)})})},confirmPasswordServer:function(e){var s=this,t={user_id:this.user.user_id,current_password:e},a="data="+JSON.stringify(t);return new Promise(function(e){s.$http.post("user/confirm_password",a).then(function(t){s.showMessage(t.data.message),e(t.data.is_correct)})})},confirmPassword:function(){var e=this;this.confirmPasswordServer(this.currentPassword).then(function(s){e.isChangePassword=s})},checkPassword:function(){this.newPassword===this.passwordConfirm&&this.changePassword?(this.setStates(!0,!1),this.states.button=!0):this.changePassword?(this.setStates(!1,!0),this.states.button=!1):this.setStates(!1,!1)},setStates:function(e,s){this.states["has-success"]=e,this.states["has-error"]=s}}}},99:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"company-details",attrs:{id:"acount-form"}},[t("h3",[e._v("Detalles de la Cuenta")]),t("form",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",[e._v("Nombre de Usuario")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.nickname,expression:"user.nickname"}],staticClass:"form-control",attrs:{type:"text",disabled:"true"},domProps:{value:e.user.nickname},on:{input:function(s){s.target.composing||e.$set(e.user,"nickname",s.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Contraseña actual")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentPassword,expression:"currentPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.currentPassword},on:{keypress:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key))return null;s.preventDefault(),e.confirmPassword(s)},input:function(s){s.target.composing||(e.currentPassword=s.target.value)}}})]),e.isChangePassword?t("div",{staticClass:"form-group",class:e.states},[t("label",[e._v("Nueva Contraseña")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.newPassword},on:{keyup:e.checkPassword,input:function(s){s.target.composing||(e.newPassword=s.target.value)}}})]):e._e(),e.isChangePassword?t("div",{staticClass:"form-group",class:e.states},[t("label",[e._v("Confirmar Nueva Contraseña")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordConfirm,expression:"passwordConfirm"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.passwordConfirm},on:{keyup:e.checkPassword,input:function(s){s.target.composing||(e.passwordConfirm=s.target.value)}}})]):e._e(),e.isChangePassword?e._e():t("h4",{staticClass:"text-primary"},[e._v("Para cambiar la contraseña escriba su contraseña actual y presione enter")])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group hide"},[t("label",[e._v("COD")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.user_id,expression:"user.user_id"}],staticClass:"form-control",attrs:{type:"text",disabled:"true"},domProps:{value:e.user.user_id},on:{input:function(s){s.target.composing||e.$set(e.user,"user_id",s.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:e.user.email},on:{input:function(s){s.target.composing||e.$set(e.user,"email",s.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Nombre")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.fullname,expression:"user.fullname"}],staticClass:"form-control",attrs:{type:"text",disabled:"true"},domProps:{value:e.user.fullname},on:{input:function(s){s.target.composing||e.$set(e.user,"fullname",s.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Tipo de Cuenta")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.role,expression:"user.role"}],staticClass:"form-control",attrs:{type:"text",disabled:"true"},domProps:{value:e.user.role},on:{input:function(s){s.target.composing||e.$set(e.user,"role",s.target.value)}}})]),t("div",{staticClass:"form-group"},[t("label",[e._v("Cedula(sin guiones)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.dni,expression:"user.dni"}],staticClass:"form-control",attrs:{type:"text",disabled:"true"},domProps:{value:e.user.dni},on:{input:function(s){s.target.composing||e.$set(e.user,"dni",s.target.value)}}})]),t("div",{staticClass:"right"},[t("input",{staticClass:"form-control",attrs:{type:"submit",value:"Guardar Datos"},on:{click:function(s){s.preventDefault(),e.updateInfo(s)}}})])])])])])},r=[],o={render:a,staticRenderFns:r};s.a=o}},[96]);
//# sourceMappingURL=cuenta.js.map