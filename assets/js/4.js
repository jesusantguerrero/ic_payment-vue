webpackJsonp([4],{134:function(t,a,s){"use strict";var e=s(1),o=s.n(e),r=s(135),i=s(138),c=s(141),n=s(144),l=s.n(n),u=new l.a;a.a={name:"cash-desk-section",components:{ClosingSummary:r.a,ExpensesPanel:i.a,CountPanel:c.a},props:{appStore:{type:Object,required:!0}},data:function(){return{isHide:!1,fecha:o.a.now(),closingData:{autor:appStore.currentUser.name+" "+appStore.currentUser.lastname,pagos_facturas:0,pagos_extras:0,pagos_efectivo:0,pagos_banco:0,total_ingresos:0,efectivo_caja:0,total_descuadre:0,total_gastos:0,banco:0},store:u,sum:0}},mounted:function(){this.setIngresos()},created:function(){$(".v-cloack").css({visibility:"visible"})},methods:{setIngresos:function(){var t=this,a=this.closingData,s={fecha:o.a.now()};this.$http.post(baseURL+"caja/get_ingresos",this.getDataForm(s)).then(function(t){var s=t.data;a.pagos_facturas=s.pagos_facturas,a.pagos_extras=s.pagos_extras,a.pagos_efectivo=s.pagos_efectivo,a.pagos_banco=s.pagos_banco,a.total_ingresos=parseFloat(s.pagos_facturas)+parseFloat(self.pagos_extras),a.total_descuadre=-self.pagos_efectivo+self.efectivo_caja}).catch(function(a){t.$toasted.error(a)})},closeCashDeskCaja:function(){0!==this.closingData.total_descuadre?swal({title:"Está Seguro?",text:"Hay un descuadre en la caja, quiere hacer el cierre de todos modos?",type:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(function(){close(cierre)}):close(cierre)},close:function(t){var a=this;t.fecha=o.a.now(),this.$http.post("caja/add_cierre",this.getDataForm(cierre)).then(function(t){a.showdMessage(t.data.message),a.isHide=!0,a.summary.isHide=!1,a.summary.cierre=cierre,$("#app-cierre").addClass("hide"),$(".top-nav").addClass("hide"),$("#print-view").css({visibility:"visible"})}).catch(function(t){a.$toasted.error(t)})}},computed:{getTotal:function(){var t=this.closingData;return this.total=o.a.sum(u.currency),t.efectivo_caja=this.total.toFixed(2),t.total_descuadre=parseFloat(-t.pagos_efectivo)+parseFloat(t.efectivo_caja),t.banco=parseFloat(t.pagos_banco)+parseFloat(t.pagos_efectivo)-(parseFloat(t.total_gastos)+parseFloat(t.total_descuadre)),this.total},decimals:function(){var t=this;["pagos_facturas","pagos_extra","pagos_efectivo","pagos_banco","total_ingresos","efectivo_caja","total_descuadre","total_gasto","banco"].forEach(function(a){t.closingData[a]=t.closingData[a].toFixed(2)},this)}}}},135:function(t,a,s){"use strict";var e=s(136),o=s(137),r=s(3),i=r(e.a,o.a,!1,null,null,null);a.a=i.exports},136:function(t,a,s){"use strict";a.a={props:{appStore:{type:Object,required:!0},cierre:{type:Object,require:!0}},data:function(){return{back:{link:"somelink",text:"volver a cierre"},foward:{link:baseURL+"auth/do_logout",text:"cerrar session"}}},filters:{spanishDateFormat:function(t){return moment.locale("es-DO"),moment(t).format("dddd DD [de] MMMM [del] YYYY")}},methods:{goBack:function(){this.$emit("closing")},print:function(t){function a(){return t.apply(this,arguments)}return a.toString=function(){return t.toString()},a}(function(){print()})}}},137:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"print-view"}},[s("div",{staticClass:"factura-body"},[s("div",{staticClass:"cabecera"},[s("div",{staticClass:"company-name"},[s("h4",{staticClass:"company-oficial-name t-center"},[t._v(" "+t._s(t.appStore.company.nombre))]),s("p")]),s("p",{staticClass:"fecha-reporte"},[t._v("Fecha: "+t._s(t._f("spanishDateFormat")(t.cierre.fecha)))]),s("p",[s("b",{staticClass:"hora-reporte"},[t._v("Autor "+t._s(t.cierre.autor))])])]),t._m(0,!1,!1),s("div",{staticClass:"cuerpo"},[s("p",[s("b",[t._v("Total de ingresos:")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.total_ingresos)))])]),s("p",[s("b",[t._v("Pagos via Banco:")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.pagos_banco)))])]),s("p",[s("b",[t._v("Pagos en efectivo:")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.pagos_efectivo)))])]),s("p",[s("b",[t._v("Efectivo en caja:")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.efectivo_caja)))])]),s("p",[s("b",[t._v("Total Descuadre:")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.total_descuadre)))])]),s("p",[s("b",[t._v("Gastos :")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.total_gastos)))])]),s("p",[s("b",[t._v("Banco(Ganancia):")]),s("span",{staticClass:"right"},[t._v(t._s(t._f("currencyFormat")(t.cierre.banco)))])])]),s("div",{staticClass:"pie-pagina"},[s("p",{staticClass:"t-center"},[s("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.print(a)}}},[t._v("Imprimir")])])])]),s("div",{staticClass:"centered-container-small"},[s("a",{staticClass:"link btn",attrs:{href:t.foward.link}},[s("i",{staticClass:"material-icons"},[t._v("power_settings_new")]),t._v(" "+t._s(t.foward.text))])])])},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"concepto"},[s("h4",[t._v("Cierre de Caja")])])}],r={render:e,staticRenderFns:o};a.a=r},138:function(t,a,s){"use strict";var e=s(139),o=s(140),r=s(3),i=r(e.a,o.a,!1,null,null,null);a.a=i.exports},139:function(t,a,s){"use strict";var e=s(1),o=s.n(e),r={fecha:"",descripcion:"",monto:""},i=[{fecha:o.a.now(),descripcion:"hola",monto:2e3,id_gasto:1}];a.a={data:function(){return{gasto:r,gastos:i}},mounted:function(){this.getGastos()},methods:{addGasto:function(){var t=this;this.gasto.fecha=o.a.now(),this.$http.post("caja/add_gasto",this.getDataform(this.gasto)).then(function(a){t.showMessage(a.data.message),t.fillGastos(a.data.gastos,"normal"),t.setGastoTotal(data.total_gastos)}),send.catch(function(a){t.$toasted.error(a)})},fillGastos:function(t,a){"group"===a?null!=t||t.length>0?this.gastos=t:this.gastos=[]:this.gastos.push(JSON.parse(t)[0])},setGastoTotal:function(t){this.data_cierre.total_gastos=t},getGasto:function(){var t=this,a={idGasto:this.gasto};this.$http.get("caja/get_gasto",getDataForm(a)).then(function(a){t.fillGastos(a.data)})},deleteGasto:function(t){var a=this,s=t.target;"i"===s.localname&&(s=s.parentElement);var e=s.attributes["data-id"].value;swal({title:"Está Seguro?",text:"Seguro de que quiere eliminar este gasto?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",cancelButtonText:"Cancelar"}).then(function(){var t={id:e,fecha:o.a.now()};a.$http.post("caja/delete_gasto",a.getDataForm(t)).then(function(t){$this.showMessage(t.data.menssage),a.fillGastos(data.gastos,"group"),a.setGastoTotal(data.total_gastos)}).catch(function(t){a.$toasted.error(t)})})},getGastos:function(){var t=this;this.$http.post("caja/get_gastos",this.getDataForm({fecha:o.a.now()})).then(function(a){t.showMessage(a.data.message),t.fillGastos(a.data.gastos,"group"),t.setGastoTotal(a.data.total_gastos)}).catch(function(a){t.$toasted.error(a)})}}}},140:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"tab-pane fade in",attrs:{id:"registro-gastos",role:"tabpanel"}},[s("form",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"cient-sector"}},[t._v("Descripcion")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.gasto.descripcion,expression:"gasto.descripcion"}],staticClass:"form-control",attrs:{tabindex:"6"},domProps:{value:t.gasto.descripcion},on:{input:function(a){a.target.composing||t.$set(t.gasto,"descripcion",a.target.value)}}})])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"client-street"}}),s("div",{staticClass:"input-group normal-height"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.gasto.monto,expression:"gasto.monto"}],staticClass:"form-control",attrs:{type:"number",tabindex:"6"},domProps:{value:t.gasto.monto},on:{input:function(a){a.target.composing||t.$set(t.gasto,"monto",a.target.value)}}}),s("span",{staticClass:"input-group-btn"},[s("button",{staticClass:"btn btn-secondary icon",attrs:{type:"button"},on:{click:t.addGasto}},[s("i",{staticClass:"material-icons"},[t._v("add")])])])])])])]),t._m(0,!1,!1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("ul",{staticClass:"list-group lista-gastos"},t._l(t.gastos,function(a){return s("li",{key:a.id_gasto,staticClass:"list-group-item"},[t._v(t._s(a.descripcion)),s("span",{staticClass:"money"},[t._v("RD$ "+t._s(a.monto))]),s("button",{staticClass:"btn list-action borrar-gasto",attrs:{"data-id":a.id_gasto},on:{click:function(a){a.preventDefault(),t.deleteGasto(a)}}},[s("i",{staticClass:"material-icons",attrs:{"data-id":a.id_gasto}},[t._v("delete")])])])}))])])])])},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"row"},[s("h4",{staticClass:"col-md-12 col-lg-12"},[t._v("Gastos")])])}],r={render:e,staticRenderFns:o};a.a=r},141:function(t,a,s){"use strict";var e=s(142),o=s(143),r=s(3),i=r(e.a,o.a,!1,null,null,null);a.a=i.exports},142:function(t,a,s){"use strict";a.a={props:{store:{type:Object,required:!0},total:{type:Number,required:!0}},data:function(){return{currencyUnits:[{type:"monedas",unit:"1"},{type:"monedas",unit:"5"},{type:"monedas",unit:"10"},{type:"billetes",unit:"20"},{type:"monedas",unit:"25"},{type:"billetes",unit:"50"},{type:"billetes",unit:"100"},{type:"billetes",unit:"200"},{type:"billetes",unit:"500"},{type:"billetes",unit:"1000"},{type:"billetes",unit:"2000"}]}},methods:{changeTotal:function(t){var a=t.srcElement.attributes["data-unit"].value,s=t.srcElement.value,e=s*a*1;this.store.setUnitValue(a,e)}}}},143:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"tab-pane active fade in",attrs:{id:"cuadre-primario",role:"tabpanel"}},[s("form",{staticClass:"tabla-dinero"},[t._m(0,!1,!1),t._l(t.currencyUnits,function(a){return s("div",{key:a.unit,staticClass:"form-group row"},[s("label",{staticClass:"col-sm-2 col-form-label"},[t._v(t._s(a.type)+" RD$ "+t._s(a.unit))]),s("div",{staticClass:"col-sm-4"},[s("input",{staticClass:"form-control",attrs:{type:"number","data-unit":a.unit},on:{keyup:t.changeTotal}})]),s("div",{staticClass:"col-sm-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.store.currency["total"+a.unit],expression:"store.currency[`total${currency.unit}`]"}],staticClass:"form-control",attrs:{type:"number",disabled:"disabled"},domProps:{value:t.store.currency["total"+a.unit]},on:{input:function(s){s.target.composing||t.$set(t.store.currency,"total"+a.unit,s.target.value)}}})])])}),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"total-efectivo-caja"}},[t._v("Total en efectivo")]),s("div",{staticClass:"col-sm-4"}),s("div",{staticClass:"col-sm-4"},[s("input",{staticClass:"form-control",attrs:{id:"total-efectivo-caja",type:"number",disabled:"disabled"},domProps:{value:t.total}})])])],2)])},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Tipo de Moneda")]),s("div",{staticClass:"col-sm-4"},[s("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Cantidad")])]),s("div",{staticClass:"col-sm-4"},[s("label",{staticClass:"col-sm-2 col-form-label"},[t._v("Total")])])])}],r={render:e,staticRenderFns:o};a.a=r},144:function(t,a,s){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function t(t,a){for(var s=0;s<a.length;s++){var e=a[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(a,s,e){return s&&t(a.prototype,s),e&&t(a,e),a}}(),r=function(){function t(){var a=this;e(this,t);var s=[1,5,10,20,25,50,100,200,500,1e3,2e3];this.currency={},s.forEach(function(t){a.currency["total"+t]=0})}return o(t,[{key:"setUnitValue",value:function(t,a){this.currency["total"+t]=a}}]),t}();a.default=r},145:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"row welcome-screen"},[s("div",{staticClass:"col-md-8 col-xs-12 main-card"},[s("div",{staticClass:"tab-content-cierre"},[t._m(0,!1,!1),t._v(" "),s("div",{staticClass:"tab-content"},[s("count-panel",{attrs:{store:t.store,total:t.getTotal}}),t._v(" "),s("expenses-panel"),t._v(" "),s("div",{staticClass:"tab-pane fade in",attrs:{role:"tabpanel",id:"cuadre-final"}},[s("form",{attrs:{action:""}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"client-job"}},[t._v("Ingresos Totales")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.closingData.total_ingresos,expression:"closingData.total_ingresos"}],staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.closingData.total_ingresos},on:{input:function(a){a.target.composing||t.$set(t.closingData,"total_ingresos",a.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"client-salary"}},[t._v("Gastos Totales")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.closingData.total_gastos,expression:"closingData.total_gastos"}],staticClass:"form-control password",attrs:{type:"number",disabled:""},domProps:{value:t.closingData.total_gastos},on:{input:function(a){a.target.composing||t.$set(t.closingData,"total_gastos",a.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"client-job-number"}},[t._v("Ganacia(Banco)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.closingData.banco,expression:"closingData.banco"}],staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.closingData.banco},on:{input:function(a){a.target.composing||t.$set(t.closingData,"banco",a.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-6 t-center"},[s("h5",[t._v("Fecha: "),s("span",{attrs:{id:"fecha-cierre v-cloack"}},[t._v(" "+t._s(t.fecha)+" ")])]),t._v(" "),s("h5",[t._v("Autor "),s("span",{attrs:{id:"autor-cierre"}},[t._v(" "+t._s(t.appStore.currentUser.fullname)+" ")])]),t._v(" "),s("button",{staticClass:"btn",on:{click:function(a){a.preventDefault(),t.closeCashDeskCaja(a)}}},[t._v("closeCashDesk Caja")])])])])])],1)])]),t._v(" "),s("div",{staticClass:"col-md-4 col-xs-12 details-card"},[s("div",{staticClass:"layout-container"},[s("div",{staticClass:"day-income-layer"},[s("h3",{staticClass:"card-title",attrs:{"data-toggle":"modal","data-target":"#notification-view"}},[t._v("Ingresos en Efectivo")]),t._v(" "),s("div",{staticClass:"list-repair centered-container"},[s("a",{attrs:{target:"printframe",href:"<?php echo base_url('process/getreport/payment/today') ?>"}},[s("h2",{staticClass:"current-saldo v-cloack"},[t._v(" RD$ "+t._s(t._f("currencyFormat")(t.closingData.pagos_efectivo)))])]),t._v(" "),s("br"),t._v(" "),t._m(1,!1,!1),t._v(" "),s("h2",{staticClass:"current-saldo my-caja v-cloack"},[t._v(" RD$ "+t._s(t._f("currencyFormat")(t.total))+" ")])])]),t._v(" "),s("div",{staticClass:"pagos-layer"}),t._v(" "),s("div",{staticClass:"averias-layer"}),t._v(" "),s("div",{staticClass:"deudores-layer"})])])]),t._v(" "),s("div",{staticClass:"row home-options-container"},[s("div",{staticClass:"col-md-8 hidden-xs shortcuts-container"},[s("div",{staticClass:"col-md-4 shortcut",attrs:{id:"caller-new-client","data-toggle":"popover","data-container":"body","data-placement":"right",title:"Pagos de Factura","data-content":"Los pagos de mensualidad que hacen los clientes"}},[s("p",{staticClass:"section-title"},[t._v("Pagos de factura")]),t._v(" "),s("p",{staticClass:"v-cloack"},[t._v("RD$ "+t._s(t._f("currencyFormat")(t.closingData.pagos_facturas)))])]),t._v(" "),s("div",{staticClass:"col-md-4 shortcut",attrs:{"data-toggle":"popover","data-container":"body","data-placement":"right",title:"Pagos Extras","data-content":"Los pagos a los servicios extras que hacen los clientes"}},[s("p",{staticClass:"section-title"},[t._v("Pagos Extras")]),t._v(" "),s("p",{staticClass:"v-cloack"},[t._v("RD$ "+t._s(t._f("currencyFormat")(t.closingData.pagos_extras)))])]),t._v(" "),s("div",{staticClass:"col-md-4 shortcut",attrs:{"data-toggle":"popover","data-container":"body","data-placement":"right",title:"Pagos Via Banco","data-content":"Los pagos del <b>total de ingresos</b> que se hacen via banco"}},[s("p",{staticClass:"section-title"},[t._v("Pagos Via Banco")]),t._v(" "),s("p",{staticClass:"v-cloack"},[t._v("RD$ "+t._s(t._f("currencyFormat")(t.closingData.pagos_banco)))])]),t._v(" "),s("div",{staticClass:"col-md-4 shortcut",attrs:{id:"caller-new-client","data-toggle":"popover","data-container":"body","data-placement":"right",title:"Total de Ingresos","data-content":"Es la suma de los <b>pagos extras</b> y <b>pagos de factura</b>"}},[s("p",{staticClass:"section-title"},[t._v("Total Ingresos")]),t._v(" "),s("p",{staticClass:"v-cloack"},[t._v("RD$ "+t._s(t._f("currencyFormat")(t.closingData.total_ingresos)))])])]),t._v(" "),s("div",{staticClass:"col-md-4 clock-card"},[s("h4",{staticClass:"card-title t-center"},[t._v("Diferencia")]),t._v(" "),s("h4",{staticClass:"t-center v-cloack"},[t._v(" RD$ "+t._s(t.closingData.total_descuadre)+" ")])])]),t._v(" "),s("closing-summary",{attrs:{"app-store":t.appStore,cierre:t.closingData}})],1)},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[s("li",{staticClass:"active",attrs:{role:"presentation"}},[s("a",{attrs:{href:"#cuadre-primario","aria-controls":"cuadre-primario",role:"tab","data-toggle":"tab"}},[t._v("Cuadre Primario")])]),t._v(" "),s("li",{attrs:{role:"presentation"}},[s("a",{attrs:{href:"#registro-gastos","aria-controls":"registro-gastos",role:"tab","data-toggle":"tab"}},[t._v("Registro de Gastos")])]),t._v(" "),s("li",{attrs:{role:"presentation"}},[s("a",{attrs:{href:"#cuadre-final","aria-controls":"cuadre-final",role:"tab","data-toggle":"tab"}},[t._v("Cuadre Final")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h4",{staticClass:"special-caller",attrs:{"data-toggle":"modal","data-target":"#caja-mayor-modal"}},[s("i",{staticClass:"material-icons"},[t._v("lock_open")]),t._v("Dinero Real en Caja")])}],r={render:e,staticRenderFns:o};a.a=r},79:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s(134),o=s(145),r=s(3),i=r(e.a,o.a,!1,null,null,null);a.default=i.exports}});
//# sourceMappingURL=4.js.map