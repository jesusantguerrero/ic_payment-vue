webpackJsonp([2],{100:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(101),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(){function e(){n(this,e),(0,c.default)(this),console.log("aqui en clientes")}return o(e,[{key:"add",value:function(){var e=this,t=$("#client-name").val(),a=$("#client-lastname").val(),n=getVal($("#client-dni")),o=getVal($("#client-phone")),l=$("#client-provincia").val(),c=$("#client-sector").val(),i=$("#client-street").val(),r=$("#client-house").val(),s=$("#client-direction-details").val(),u=getVal($("#client-telephone")),d=$("#client-job").val(),v=getVal($("#client-job-telephone")),f=$("#client-salary").val(),p=moment().format("YYYY-MM-DD"),m=void 0;isEmpty([t,a,n,o,l,c,i,r,u])?displayAlert("Revise","LLene todos los campos por favor","error"):(m="nombres="+t+"&apellidos="+a+"&cedula="+n+"&celular="+o,m+="&provincia="+l+"&sector="+c+"&calle="+i+"&casa="+r+"&telefono="+u,m+="&lugar_trabajo="+d+"&tel_trabajo="+v+"&ingresos="+f+"&fecha_registro="+p,m+="&estado=no activo&detalles_direccion="+s+"&tabla=clientes",this.send("add",m),then(function(t){e.getAll(),displayMessage(t.data)}))}},{key:"getAll",value:function(){this.send("getall","tabla=clientes").then(function(e){clientTable.refresh(e.data)})}},{key:"getOne",value:function(e){var t=this,a="tabla=clientes&id="+e;this.send("getone",a).then(function(e){t.receiveForEdit(e.data)})}},{key:"delete",value:function(e){var t="tabla=clientes&id="+e,a=this;this.send("process/delete",t).then(function(e){displayMessage(e.data),a.getAll()})}},{key:"search",value:function(e){var t="tabla=clientes&word="+e;this.send("search",t),then(function(e){fillCurrentTable(e.data)})}},{key:"receiveForEdit",value:function(e){function t(){var e=this;isEmpty([n.val(),o.val(),l.val(),c.val(),i.val(),r.val(),s.val(),u.val(),v.val()])?displayAlert("Revise","LLene todos los campos por favor","error"):(form="id="+id+"&nombres="+n.val()+"&apellidos="+o.val()+"&cedula="+getVal(l),form+="&celular="+getVal(c)+"&provincia="+i.val()+"&sector="+r.val()+"&calle="+s.val(),form+="&casa="+u.val()+"&detalles_direccion="+d.val()+"&telefono="+getVal(v)+"&lugar_trabajo="+f.val()+"&tel_trabajo=",form+=getVal(p)+"&tabla=clientes",form+="&ingresos="+m.val(),this.send("update",form),then(function(t){e.getAll(),displayMessage(t.data)}))}var a=JSON.parse(e);this.id=a.id_cliente;var n=$("#u-client-name"),o=$("#u-client-lastname"),l=$("#u-client-dni"),c=$("#u-client-phone"),i=$("#u-client-provincia"),r=$("#u-client-sector"),s=$("#u-client-street"),u=$("#u-client-house"),d=$("#u-client-direction-details"),v=$("#u-client-telephone"),f=$("#u-client-job"),p=$("#u-client-job-telephone"),m=$("#u-client-salary");n.val(a.nombres),o.val(a.apellidos),l.val(a.cedula),c.val(a.celular),i.val(a.provincia),r.val(a.sector),s.val(a.calle),u.val(a.casa),d.val(a.detalles_direccion),v.val(a.telefono),f.val(a.lugar_trabajo),p.val(a.tel_trabajo),m.val(a.salario),$("#update-client-modal").modal(),$("#btn-update-client").on("click",function(){t()})}},{key:"saveObservations",value:function(){var e=$("#text-observations").val(),t=$("#detail-client-id").val(),a="observaciones="+e+"&tabla=observaciones&id_cliente="+t;this.send("update",a),then(function(e){displayMessage(e.data)})}},{key:"updateState",value:function(e){var t="data="+JSON.stringify(e)+"&module=clientes&action=update";this.send("getjson",t),then(function(e){displayMessage(e.data)})}},{key:"send",value:function(e,t){return axios.post(BASE_URL+"process/"+e,t)}}]),e}();t.default=i},101:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"clientes"==currentPage&&clientTable.init(),$("#btn-save-client").on("click",function(t){t.stopImmediatePropagation(),e.add()}),$("#update-client").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var a=clientTable.getId();a&&e.getOne(a,e.receiveForEdit)}),$("#client-searcher").on("keyup",function(t){t.stopImmediatePropagation();var a=$(this).val();e.search(a)}),$("#client-searcher-newcontract").on("keyup",function(t){t.stopImmediatePropagation();var a=$(this).val();isEmpty([a])?clearTbody(".lobby-results"):e.search(a)}),$("#delete-client").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var a=clientTable.getSelectedRow();a&&swal({title:"Está Seguro?",text:"Desea Eliminar al(la) Cliente "+a.nombres+" "+a.apellidos+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",cancelButtonText:"Cancelar"}).then(function(){return e.deleteRow(a.id)})})}},102:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(103),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(){function e(){n(this,e),(0,c.default)(this)}return o(e,null,[{key:"search",value:function(e,t,a,n){void 0===n&&(n=initClientHandlers),void 0===a&&(a=fillCurrentTable);var o=e;if(null!=o||""!==o){var l="tabla="+t+"&word="+o;connectAndSend("process/search",!1,n,a,l,null)}}},{key:"countTable",value:function(e){var t="tabla="+e,a=updateCount;"caja"===e&&(a=updateCajaCount),connectAndSend("process/count",!1,null,a,t,null)}}]),e}();t.default=i},103:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(18),l=n(o),c=a(19),i=n(c);t.default=function(e){"notificaciones"===currentPage&&(e.count_table("averias"),$("#averias-view-mode").on("change",function(e){e.stopImmediatePropagation(),l.default.getAll()}),$("#installations-view-mode").on("change",function(e){e.stopImmediatePropagation(),i.default.getAll()}),$("tbody").css({display:"table-row-group"}));var t=$("#a-client").select2({dropdownParent:$("#new-averia-modal"),width:"100%",ajax:{url:BASE_URL+"process/search",dataType:"json",delay:250,data:function(e){return{q:e.term,tabla:"clientes_para_averias"}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:30*t.page<e.total_count}}},cache:!0}});$("#btn-save-averia").on("click",function(e){e.stopImmediatePropagation(),l.default.add(t.val())}),$(".btn-update-averia").on("click",function(e){e.stopImmediatePropagation();var t=$(this).parents(".averia-item").find(".code").text().trim();l.default.update(t)}),$(".btn-update-installation").on("click",function(e){e.stopImmediatePropagation();var t=$(this).parents(".averia-item").find(".code").text().trim();i.default.update(t)}),$("#extra-controls").on("click",function(e){var t=new contracts;e.stopImmediatePropagation(),t.btnExtraPressed($(this))}),$("#extra-client-dni").on("keydown",function(e){var t=new contracts,a=e.which,n=$(this).val();13===a&&t.getAllOfClient(n)})}},104:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(105),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(){function e(){n(this,e),(0,c.default)(this)}return o(e,[{key:"add",value:function(){var e=$("#service-name").val(),t=$("#service-description").val(),a=$("#service-monthly-payment").val(),n=$("#service-type").val();isEmpty([e,t,a,n])?displayAlert("Revise","LLene todos los campos por favor","error"):(form="nombre="+e+"&descripcion="+t+"&mensualidad="+a+"&tipo="+n,form+="&tabla=servicios",connectAndSend("process/add",!0,null,null,form,Services.getAll))}},{key:"getAll",value:function(){connectAndSend("process/getall",!1,null,serviceTable.refresh,"tabla=servicios",null)}},{key:"update",value:function(){var e=$("#u-service-id").val(),t=$("#u-service-name").val(),a=$("#u-service-description").val(),n=$("#u-service-monthly-payment").val(),o=$("#u-service-type").val();isEmpty([e,t,a,n,o])?displayAlert("Revise","LLene todos los campos por favor","error"):(form="id_servicio="+e+"&nombre="+t+"&descripcion="+a+"&mensualidad="+n,form+="&tipo="+o+"&tabla=servicios",connectAndSend("process/update",!0,null,null,form,Services.getAll,heavyLoad))}}]),e}();t.default=i},105:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){serviceTable.init(),$("#btn-save-service").on("click",function(t){t.stopImmediatePropagation(),e.add()}),$("#delete-service").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=serviceTable.getId();t&&swal({title:"Está Seguro?",text:"Desea Eliminar  el Servicio?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",cancelButtonText:"Cancelar"}).then(function(){Generals.deleteRow(t,"servicios")})}),$("#edit-service").on("click",function(e){e.preventDefault();var t=serviceTable.getSelectedRow();$("#u-service-id").val(t.id),$("#u-service-name").val(t.nombre),$("#u-service-description").val(t.descripcion),$("#u-service-monthly-payment").val(Number(t.mensualidad.replace("RD$ ",""))),$("#u-service-type").val(t.tipo),$("#update-service-modal").modal()}),$("#btn-update-service").on("click",function(t){t.stopImmediatePropagation(),e.update()})}},106:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(107),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(){function e(){n(this,e),this.ran=!1,(0,c.default)(this),"nuevo_contrato"===currentPage&&Contracts.getIpList()}return o(e,[{key:"add",value:function(){var e=$("#contract-client-id").val(),t=$("#contract-user-id").val(),a=$(".service-card.selected").attr("data-id"),n=$("#contract-client-date").val(),o=$("#contract-client-months").val(),l=$("#contract-equipment").val(),c=$("#contract-e-mac").val(),i=$("#contract-router").val(),r=$("#contract-r-mac").val(),s=$("#contract-equipment-model").val(),u=$("#contract-ip").val(),d=$("#select-contract-code").val();payment=$("#contract-client-payment").val(),nextPayment=moment(contract_date).add(1,"months").format("YYYY-MM-DD"),isEmpty([e,t,a,n,o])?displayAlert("Revise","LLene todos los campos por favor","error"):(total=(Number(o)+1)*Number(payment),form="id_empleado="+t+"&id_cliente="+e+"&id_servicio="+a+"&codigo="+d+"&fecha="+n,form+="&duracion="+o+"&monto_total="+total+"&monto_pagado=0&ultimo_pago=null",form+="&mensualidad="+payment+"&proximo_pago="+nextPayment+"&estado=activo&tabla=contratos",form+="&nombre_equipo="+l+"&mac_equipo="+c+"&router="+i+"&mac_router="+r,form+="&modelo="+s+"&ip="+u,connectAndSend("process/add",null,null,Contracts.getLast,form,null))}},{key:"getAll",value:function(){var e=null,t=contractTable,a=t.refresh;"detalles"===contractTable.el&&(e=Payments.getAll(),a=null),connectAndSend("process/getall",!1,null,a,"tabla=contratos",e)}},{key:"getLast",value:function(e){data=JSON.parse(e),displayMessage(data.mensaje),$("#btn-save-contract").attr("disabled",""),$("#btn-print-contract").removeAttr("disabled"),data.tabla_pagos&&makePaymentList(data.tabla_pagos)}},{key:"callExtra",value:function(e){var t=void 0;this.dropDownEvents(),t="details"===e?detailsContractTable.getSelectedRow():contractTable.getSelectedRow(),t?(this.inputExtraClientDni.val(t.cedula),Contracts.getAllOfClient(t.cedula),$("#add-extra-modal").modal()):displayAlert("Revise","Seleccione el conrato primero","error")}},{key:"cancel",value:function(e,t){var a=!1,n=$("#cancelation-reason").val(),o=$("#check-penalty:checked").length;if(e.id){o>0&&(a=!0);var l=moment().format("YYYY-MM-DD"),c="id_contrato="+e.id+"&fecha="+l+"&id_cliente="+e.id_cliente+"\n      &motivo="+n+"&penalidad="+a;connectAndSend("process/cancel",!0,null,null,c,t)}else displayMessage(MESSAGE_ERROR+" No hay contrato seleccionado")}},{key:"getOne",value:function(e,t){form="tabla=contratos&id_contrato="+e,connectAndSend("process/getone",!1,null,t,form,null)}},{key:"recieve",value:function(e){function t(e){var t=$("#check-change-ip:checked").length;form="id_contrato="+e+"&nombre_equipo="+n.val()+"&mac_equipo="+o.val(),form+="&router="+l.val()+"&mac_router="+c.val(),form+="&modelo="+i.val(),form+="&tabla=contratos",t>0&&(form+="&ip="+s.val()+"&codigo="+r.val()),connectAndSend("process/update",!0,null,null,form,Contracts.getAll)}var a=JSON.parse(e);this.idContrato=a.id_contrato;var n=$("#u-contract-equipment"),o=$("#u-contract-e-mac"),l=$("#u-contract-router"),c=$("#u-contract-r-mac"),i=$("#u-contract-modelo"),r=$("#select-contract-code"),s=$("#u-contract-ip");n.val(a.nombre_equipo),o.val(a.mac_equipo),l.val(a.router),c.val(a.mac_router),i.val(a.modelo),s.val(a.ip),$("#update-contract-modal").modal(),$("#update-contract").on("click",function(e){e.stopImmediatePropagation(),t(idContrato)})}},{key:"getIpList",value:function(){function e(e){$("#select-contract-code").html(e)}var t=$("#select-contract-sector").val(),a="id_seccion="+t+"&tabla=ip_list";connectAndSend("process/getall",!1,null,e,a,null)}},{key:"btnExtraPressed",value:function(e){var t=e.text().trim().toLowerCase(),a=this.inputExtraClientDni.val().replace(/[-]/g," ");switch(t){case"mejorar":Contracts.upgrade();break;case"extender":Contracts.extend();break;case"guardar":Contracts.addExtra()}this.getAllOfClient(a).then(function(e){console.log(e.data),console.log(" aqui en la promesa")})}},{key:"upgrade",value:function(){var e=$("#extra-client-contract").val(),t=$(".service-card.selected"),a=t.attr("data-id"),n=t.attr("data-payment");if(isEmpty([e,a,n]))displayAlert("Revise","asegurate de llenar todos los datos y seleccionar el servicio","info");else{var o="id_contrato="+e+"&id_servicio="+a+"&cuota="+n;connectAndSend("process/upgrade",!0,initGlobalHandlers,null,o,Contracts.getAll)}}},{key:"reconnect",value:function(e,t){var a=$(".service-card.selected"),n=a.attr("data-id"),o=$("#reconnection-months").val(),l=$("#reconnection-date").val();if(isEmpty([e,n,l,o]))swal("Llene todos los campos");else{info={id_contrato:e,fecha:l,id_servicio:n,duracion:o};var c="data="+JSON.stringify(info);axios.post(BASE_URL+"contract/reconnect",c).then(function(e){displayMessage(e.data.mensaje),Payments.getAll(),$("#btn-reconnect").removeAttr("disabled"),$(".reconnect-caller").removeClass("visible"),t&&t()}).catch(function(e){console.log(e)})}}},{key:"addExtra",value:function(){var e=$("#extra-client-contract").val(),t=$("#extra-service-cost").val(),a=$("#select-extra-service").val(),n=$("#extra-equipo").val(),o=$("#extra-e-mac").val(),l=$("#extra-router").val(),c=$("#extra-r-mac").val(),i=$("#select-payment-mode").val();if(isEmpty([e,a,t,i]))displayAlert("revise","asegurate de llenar todos los datos y seleccionar el servicio","info");else{var r="id_contrato="+e+"&costo_servicio="+t+"&nombre_servicio="+a+"\n      &nombre_equipo="+n+"&mac_equipo="+o+"&router="+l+"&mac_router="+c+"\n      &modo_pago="+i;connectAndSend("process/addextra",!0,initGlobalHandlers,null,r,Contracts.getAll)}}},{key:"extend",value:function(){var e=$("#extra-client-contract").val(),t=$("#extra-extension-months").val();if(isEmpty([t,e]))displayAlert("revise","asegurate de llenar todos los datos y seleccionar el servicio","info");else{var a="id_contrato="+e+"&duracion="+t;connectAndSend("process/extend_contract",!0,initGlobalHandlers,null,a,Contracts.getAll)}}},{key:"getAllOfClient",value:function(e){var t="dni="+e,a=this;return axios.post(BASE_URL+"process/data_for_extra",t).then(function(e){a.makeContractList(e.data)}).catch(function(){})}},{key:"suspend",value:function(e,t){var a="data="+JSON.stringify({id_contrato:e});axios.post(BASE_URL+"contract/suspend",a).then(function(e){var a=e.data;displayMessage(a.mensaje),Contracts.getAll(),t&&t()}).catch(function(e){console.log(e)})}},{key:"deleteExtra",value:function(e){function t(){var t="data="+JSON.stringify({id_contrato:e});axios.post(BASE_URL+"contract/delete_extra",t).then(function(e){displayMessage(e.data.mensaje)}).catch(function(e){displayMessage(e.toString())})}var a=this;swal({title:"Está Seguro?",text:"Seguro que desea eliminar el seguro a este contrato?",type:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(function(){t(),a.inputContracEnsurance.val("")})}},{key:"makeContractList",value:function(e){if(e){var t="<option value=''>--Selecciona--</option>",a=e.cliente,n=a.cliente,o=a.contratos,l=void 0;"detalles"!==currentPage&&"home"!==currentPage?l=contractTable.getId():"home"!==currentPage&&(l=detailsContractTable.getSelectedRow().idContrato);for(var c=0;c<o.length;c+=1){var i=o[c].id_contrato,r=o[c].servicio,s=o[c].nombre_equipo,u=o[c].router,d=o[c].mac_equipo,v=o[c].mac_router,f=o[c].codigo,p=o[c].nombre_seguro,m=o[c].mensualidad_seguro;t+="<option value='"+i+"' data-service='"+r+"'  data-equipment='"+s+"'  data-e-mac='"+d+"'",t+=" data-router='"+u+"'  data-r-mac='"+v+"' data-code='"+f+"' data-ensurance='"+p+"- RD$ "+CurrencyFormat(m)+"'>",t+=i+"</option>"}this.selectExtraClientContract.html(t),this.selectExtraClientContract.val(l).change(),$("#extra-client-name").val(n.nombres+" "+n.apellidos)}else displayMessage(MESSAGE_ERROR+" Este cliente no existe revise su cedula por favor")}},{key:"dropDownEvents",value:function(){if(!this.ran){var e=this;this.ran=!0,this.selectExtraService=$("#select-extra-service"),this.selectExtraClientContract=$("#extra-client-contract"),this.btnDeleteExtra=$("#delete-extra"),this.inputContracEnsurance=$("#contract-ensurance"),this.inputExtraClientDni=$("#extra-client-dni"),this.selectExtraService.on("change",function(){var e=$("#select-extra-service :selected").data();$("#extra-service-cost").val(e.payment)}),this.selectExtraClientContract.on("change",function(){var t=$("#extra-client-contract :selected").data();$("#extra-contract-service").val(t.service),$("#extra-equipo").val(t.equipment),$("#extra-router").val(t.router),$("#extra-e-mac").val(t.eMac),$("#extra-r-mac").val(t.rMac),$("#extra-code").val(t.code),t.ensurance.includes("null")||e.inputContracEnsurance.val(t.ensurance)}),this.btnDeleteExtra.on("click",function(){var t=e.selectExtraClientContract.val();e.deleteExtra(t)})}}}]),e}();t.default=i},107:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"contratos"==currentPage&&(contractTable.init(),e.getAll()),$("#btn-save-contract").on("click",function(t){t.stopImmediatePropagation(),e.add()}),$("#btn-add-extra").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.callExtra()}),$("#btn-cancel-contract, #btn-detail-cancel-contract").on("click",function(t){t.preventDefault();var a,n;if("contratos"==currentPage?(a=contractTable.getSelectedRow(),n=e.getAll):(a=detailsContractTable.getSelectedRow(),a.id=a.id_contrato,a.id_cliente=$("#datail-client-id").val(),a.cliente=$("#detail-client-name").val(),n=Payments.contractRefresh),a){$(".cancel-name").text(a.cliente);var o=$(".confirmed-data"),l=$("#cancel-permanently");deleteValidation(o,a.cliente,l),$("#cancel-print").attr("href",BASE_URL+"process/getcancelcontract/"+a.id),$("#cancel-contract-modal").modal(),l.on("click",function(t){t.stopImmediatePropagation(),e.cancel(a,n),l.attr("disable")}),o.val(""),$("#cancel-contract-modal .alert").removeClass("hide"),l.attr("disabled","")}else swal("Debes seleccionar un contrato")}),$("#btn-suspend-contract").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var a=contractTable.getSelectedRow();a?swal({title:"Está Seguro?",text:"Desea Suspender el contrato de "+a.cliente+" ?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro",cancelButtonText:"Cancelar"}).then(function(){e.suspend(a.id)}):swal("Debe seleccionar un contrato")}),$("#btn-update-contract").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var a=contractTable.getId();a&&e.getOne(a,e.recieve)}),$("#select-contract-sector").on("change",function(t){t.stopImmediatePropagation(),e.getIpList()}),$("#select-pay-until").on("change",function(e){e.stopImmediatePropagation();var t=$("#select-pay-until :selected"),a=t.attr("data-contract"),n=$(this).val();Payments.updateUntil(a,n)})}},108:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(109),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(){function e(){n(this,e),this.ran=!1,this.hasChanged=!1,(0,c.default)(this)}return o(e,[{key:"getAll",value:function(){var e=$("#select-contract").val();if(null!=e){var t="tabla=pagos&id="+e;connectAndSend("process/getall",!1,null,paymentTable.refresh,t,Payments.contractRefresh)}}},{key:"update",value:function(e){var t=moment().format("YYYY-MM-DD"),a=$("#select-contract").val(),n="tabla=pagos&id="+e+"&estado=pagado&fecha_pago="+t+"&id_contrato="+a;connectAndSend("process/update",!0,null,null,n,Payments.getAll)}},{key:"saveAbonos",value:function(){var e=$("#text-abono-detail"),t=e.val(),a=$("#select-contract").val(),n=$("#input-abono"),o=n.val(),l="observaciones="+t+"&abonos="+o+"&contrato_abono="+a+"&tabla=abonos";connectAndSend("process/update",!0,null,null,l,Payments.getAll),n.val("")}},{key:"saveExtra",value:function(){axios.post(BASE_URL+"process/")}},{key:"updateUntil",value:function(e,t){var a="tabla=pagos_al_dia&id_ultimo_pago="+t+"&estado=pagado&id_contrato="+e;connectAndSend("process/update",!0,null,null,a,null,heavyLoad)}},{key:"removePayment",value:function(e){var t="tabla=deshacer_pago&id_pago="+e;connectAndSend("process/update",!0,null,null,t,Payments.getAll)}},{key:"contractRefresh",value:function(){var e=$("#detail-client-id").val(),t="tabla=contratos_cliente&id="+e;connectAndSend("process/getall",!1,null,detailsContractTable.refresh,t,null)}},{key:"getOne",value:function(e){var t=this,a="tabla=pagos&id_pago="+e;axios.post(BASE_URL+"process/getone",a).then(function(e){t.receiveForEdit(e.data)})}},{key:"receiveForEdit",value:function(e){function t(e){var t=moment().format("YYYY-MM-DD"),a="id_pago="+e+"&id_contrato="+n.idContrato+"&cuota="+s.val()+"\n        &mora="+u.val()+"&monto_extra="+d.val()+"\n        &total="+v.val()+"&descuento="+f.val()+"&razon_descuento="+p.val()+"\n        &fecha_pago="+t+"&detalles_extra="+r.val()+"&tabla=discount_pagos";connectAndSend("process/update",!0,null,null,a,Payments.getAll),m.hide()}function a(){t(n.idPago),m.hide(),m.modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()}var n=Payments,o=e.pago,l=e.settings;n.idContrato=o.id_contrato,n.idPago=o.id_pago;var c=$("#payment-concept"),i=$("#payment-limit-date"),r=$("#payment-extra-services"),s=$("#payment-cuota"),u=$("#payment-mora"),d=$("#payment-extra"),v=$("#payment-total"),f=$("#payment-discount-amount"),p=$("#payment-discount-reason"),m=$("#advanced-payment"),g=$("#c_mora"),y=$("#c_reconexion");c.val(o.concepto),i.val(o.fecha_limite),s.val(o.cuota),u.val(o.mora),d.val(o.monto_extra),v.val(o.total),r.val(o.detalles_extra),function(){$(".payment-sumandos").on("keyup",function(){s.val(o.cuota-f.val());var e=Number(s.val())+Number(u.val())+Number(d.val());v.val(Number(e))})}(),m.modal(),o.mora>0?(g.iCheck("check"),Payments.hasChanged=!0):(g.iCheck("uncheck"),Payments.hasChanged=!0),o.detalles_extra.includes("Reconexion")?(y.iCheck("check"),Payments.hasChanged=!0):(y.iCheck("uncheck"),Payments.hasChanged=!0),$("#btn-apply-discount").on("click",function(e){e.stopImmediatePropagation(),f.val()>0?swal({title:"Está Seguro?",text:"Seguro de que quiere aplicar este descuento de "+f.val()+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro!",cancelButtonText:"Cancelar"}).then(function(){a()}):a()}),this.ran||(this.ran=!0,m.on("hide.bs.modal",function(){m.find("input").val("")}),g.on("ifChecked",function(){var e=o.cuota*l.cargo_mora/100;Payments.setMora(e,n.idPago).then(function(){n.getOne(n.idPago,n.receiveForEdit)})}),y.on("ifChecked",function(){Payments.setExtra(0,n.idPago).then(function(){n.getOne(n.idPago,n.receiveForEdit)})}),g.on("ifUnchecked",function(){Payments.setMora(0,n.idPago).then(function(){n.getOne(n.idPago,n.receiveForEdit)})}),y.on("ifUnchecked",function(){Payments.deleteExtra(0,n.idPago).then(function(){n.getOne(n.idPago,n.receiveForEdit)})}),m.on("hide.bs.modal",function(){Payments.hasChanged&&(Payments.hasChanged=!1,Payments.getAll())}))}},{key:"deleteExtra",value:function(e,t){var a="data="+JSON.stringify({key:e,id_pago:t});return axios.post(BASE_URL+"payment/delete_extra",a).then(function(e){displayMessage(e.data.mensaje)}).catch(function(e){console.log(e)})}},{key:"setExtra",value:function(e,t){var a="data="+JSON.stringify({key:e,id_pago:t});return axios.post(BASE_URL+"payment/set_extra",a).then(function(e){displayMessage(e.data.mensaje)}).catch(function(e){console.log(e)})}},{key:"setMora",value:function(e,t){var a="data="+JSON.stringify({mora:e,id_pago:t});return axios.post(BASE_URL+"payment/set_mora",a).then(function(e){displayMessage(e.data.mensaje)}).catch(function(e){console.log(e)})}}]),e}();t.default=i},109:function(e,t,a){"use strict";function n(e){var t=$(".payment-mode.selected").text(),a={id:e.toString(),module:"pagos"},n="data="+JSON.stringify({tipo:t})+"&extra_info="+JSON.stringify(a);axios.post(BASE_URL+"process/axiosupdate",n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){paymentTable.init(),extraTable.init(),e.ran||(e.getAll(),e.ran=!0),$("#btn-pay").on("click",function(t){t.stopImmediatePropagation();var a=paymentTable.getId();a?(e.update(a),n(a)):displayMessage(MESSAGE_INFO+" Debes seleccionar un pago")}),$("#select-contract").on("change",function(t){t.stopImmediatePropagation(),e.getAll()}),$("#payment-detail-box").collapse()}},110:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(111),c=function(e){return e&&e.__esModule?e:{default:e}}(l),i=function(){function e(){n(this,e),this.ran=!1,(0,c.default)(this)}return o(e,[{key:"add",value:function(){swal.setDefaults({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,animation:!1,progressSteps:["1","2","3"]});var e=[{title:"Nombre del sector"},"Codigo del Sector"];swal.queue(e).then(function(e){swal.resetDefaults(),self.save(e)})}},{key:"save",value:function(){var e=this,t=this,a=result[0],n=result[1],o="nombre="+a+"&codigo_area="+n+"&tabla=secciones";return heavyLoad(!0),new Promise(function(a){return e.send("add",o).then(function(e){return t.getAll(),heavyLoad(!1),displayMessage(e.data),a()})})}},{key:"getIps",value:function(){var e=$("#select-sector").val();if($(".print-table").attr("href",BASE_URL+"process/getreport/secciones/"+e),null!=e){var t="tabla=ips&id="+e;this.send("getall",t).then(function(e){sectionTable.refresh(e.data)})}}},{key:"getAll",value:function(){var e=this;heavyLoad(!0),this.send("getall","tabla=secciones").then(function(t){heavyLoad(!1),e.fillSelect(t.data)})}},{key:"updateIpState",value:function(e){var t="data="+JSON.stringify(e)+"&extra_info="+JSON.stringify({module:"ip"});this.send("axiosupdate",t).then(function(e){displayMessage(e.data.mensaje)})}},{key:"send",value:function(e,t){return axios.post(BASE_URL+"process/"+e,t)}},{key:"fillSelect",value:function(e){$("#select-sector").html(e)}}]),e}();t.default=i},111:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){ran||(sectionTable.init(),e.getIps(),ran=!0),$("#btn-add-section").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e.add()}),$("#select-sector").on("change",function(t){t.stopImmediatePropagation(),e.getIps()})}},112:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=a(18),c=n(l),i=a(19),r=n(i),s=function e(){o(this,e),console.log("here"),console.log(c.default),console.log(r.default)};t.default=s},113:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n=$("#detail-client-name");$("#btn-save-observations").on("click",function(e){e.stopImmediatePropagation(),a.saveAbonos()}),$("#btn-save-real-observations").on("click",function(t){t.stopImmediatePropagation(),e.saveObservations()}),detailsContractTable.init(),$("#btn-detail-suspend-contract").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var o=detailsContractTable.getSelectedRow();o?swal({title:"Está Seguro?",text:"Desea Suspender el contrato de "+n.val()+" ?",type:"warning",showCancelButton:!0,confirmButtonText:"Estoy Seguro",cancelButtonText:"Cancelar"}).then(function(){t.suspend(o.id_contrato,a.contractRefresh)}):swal("Debe seleccionar un contrato")}),$("#btn-call-reconnect").on("click",function(e){e.stopImmediatePropagation(),detailsContractTable.getSelectedRow()?$("#reconnect-modal").modal():swal("Debe seleccionar un contrato primero")}),$("#btn-reconnect").on("click",function(e){e.stopImmediatePropagation();var n=detailsContractTable.getSelectedRow();n&&t.reconnect(n.id_contrato,a.contractRefresh)}),$("#btn-call-extra").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();t.callExtra("details")})}},18:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={add:function(e){var t=$("#a-description").val();if(isEmpty([e,t]))displayAlert("Revise","LLene todos los campos por favor","error");else{var a="id_cliente="+e+"&descripcion="+t+"&tabla=averias";connectAndSend("process/add",!0,initGlobalHandlers,null,a,Damages.getAll)}$("#new-averia-modal").find("input,textarea").val("")},getAll:function(){var e=$("#averias-view-mode").val();$(".presentado").text(e);var t="tabla=averias&estado="+e;connectAndSend("process/getall",!1,initGlobalHandlers,fillAveriasList,t,null)},update:function(e){var t="tabla=averias&id_averia="+e;connectAndSend("process/update",!0,initGlobalHandlers,null,t,Damages.getAll)}}},19:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getAll:function(){var e=$("#installations-view-mode").val(),t="tabla=instalaciones&estado="+e;connectAndSend("process/getall",!1,initGlobalHandlers,fillInstallationsList,t,null)},update:function(e){var t="tabla=instalaciones&id_pago="+e;connectAndSend("process/update",!0,initGlobalHandlers,null,t,Installations.getAll)}}},99:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){switch(currentPage){case"home":new c.default;break;case"clientes":new c.default;break;case"servicios":new u.default;break;case"notificaciones":new h.default;break;case"secciones":new g.default;break;case"nuevo_contrato":new v.default;break;case"detalles":var e=new c.default,t=new p.default,a=new v.default;(0,_.default)(e,a,t);break;case"contratos":new v.default,new c.default}}var l=a(100),c=n(l),i=a(102),r=n(i),s=a(104),u=n(s),d=a(106),v=n(d),f=a(108),p=n(f),m=a(110),g=n(m),y=a(112),h=n(y),b=a(113),_=n(b);new r.default;$(function(){o()})}},[99]);
//# sourceMappingURL=all.js.map